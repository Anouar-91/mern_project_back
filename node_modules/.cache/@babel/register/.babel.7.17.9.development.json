{"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/mern_project_app2/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/mern_project_app2\",\"filename\":\"/Applications/dossier/mern_project_app2/src/main.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/mern_project_app2\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nvar _server = require(\"./server\");\n\n(0, _server.launch)({\n  host: 'localhost',\n  protocol: 'http',\n  port: 8080\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiaG9zdCIsInByb3RvY29sIiwicG9ydCJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7QUFFQSxvQkFBTztBQUNMQSxFQUFBQSxJQUFJLEVBQUUsV0FERDtBQUVMQyxFQUFBQSxRQUFRLEVBQUUsTUFGTDtBQUdMQyxFQUFBQSxJQUFJLEVBQUU7QUFIRCxDQUFQIiwic291cmNlUm9vdCI6Ii9BcHBsaWNhdGlvbnMvZG9zc2llci9tZXJuX3Byb2plY3RfYXBwMi9zcmMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbGF1bmNoIH0gZnJvbSAnLi9zZXJ2ZXInO1xuXG5sYXVuY2goe1xuICBob3N0OiAnbG9jYWxob3N0JyxcbiAgcHJvdG9jb2w6ICdodHRwJyxcbiAgcG9ydDogODA4MCxcbn0pO1xuIl19","map":{"version":3,"sources":["main.js"],"names":["host","protocol","port"],"mappings":";;AAAA;;AAEA,oBAAO;AACLA,EAAAA,IAAI,EAAE,WADD;AAELC,EAAAA,QAAQ,EAAE,MAFL;AAGLC,EAAAA,IAAI,EAAE;AAHD,CAAP","sourceRoot":"/Applications/dossier/mern_project_app2/src/","sourcesContent":["import { launch } from './server';\n\nlaunch({\n  host: 'localhost',\n  protocol: 'http',\n  port: 8080,\n});\n"]}},"mtime":1651230875437},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/mern_project_app2/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/mern_project_app2\",\"filename\":\"/Applications/dossier/mern_project_app2/src/server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/mern_project_app2\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.launch = launch;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst userRoutes = require('./routes/user.routes');\n\nfunction launch({\n  host,\n  protocol,\n  port\n}) {\n  const application = (0, _express.default)();\n\n  require('./config/db.js');\n\n  application.use(_express.default.json());\n  application.use('/api/user', userRoutes);\n  application.listen(port, () => console.log(`Server started at ${protocol}://${host}:${port}`));\n}\n/* require('dotenv').config({path:'./config/.env'})\n */\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJuYW1lcyI6WyJ1c2VyUm91dGVzIiwicmVxdWlyZSIsImxhdW5jaCIsImhvc3QiLCJwcm90b2NvbCIsInBvcnQiLCJhcHBsaWNhdGlvbiIsInVzZSIsImV4cHJlc3MiLCJqc29uIiwibGlzdGVuIiwiY29uc29sZSIsImxvZyJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7O0FBQ0EsTUFBTUEsVUFBVSxHQUFHQyxPQUFPLENBQUMsc0JBQUQsQ0FBMUI7O0FBRU8sU0FBU0MsTUFBVCxDQUFnQjtBQUFFQyxFQUFBQSxJQUFGO0FBQVFDLEVBQUFBLFFBQVI7QUFBa0JDLEVBQUFBO0FBQWxCLENBQWhCLEVBQTBDO0FBQy9DLFFBQU1DLFdBQVcsR0FBRyx1QkFBcEI7O0FBQ0FMLEVBQUFBLE9BQU8sQ0FBQyxnQkFBRCxDQUFQOztBQUNBSyxFQUFBQSxXQUFXLENBQUNDLEdBQVosQ0FBZ0JDLGlCQUFRQyxJQUFSLEVBQWhCO0FBQ0FILEVBQUFBLFdBQVcsQ0FBQ0MsR0FBWixDQUFnQixXQUFoQixFQUE2QlAsVUFBN0I7QUFFQU0sRUFBQUEsV0FBVyxDQUFDSSxNQUFaLENBQ0VMLElBREYsRUFFRSxNQUFNTSxPQUFPLENBQUNDLEdBQVIsQ0FBYSxxQkFBb0JSLFFBQVMsTUFBS0QsSUFBSyxJQUFHRSxJQUFLLEVBQTVELENBRlI7QUFJRDtBQUlEO0FBQ0EiLCJzb3VyY2VSb290IjoiL0FwcGxpY2F0aW9ucy9kb3NzaWVyL21lcm5fcHJvamVjdF9hcHAyL3NyYy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmNvbnN0IHVzZXJSb3V0ZXMgPSByZXF1aXJlKCcuL3JvdXRlcy91c2VyLnJvdXRlcycpXG5cbmV4cG9ydCBmdW5jdGlvbiBsYXVuY2goeyBob3N0LCBwcm90b2NvbCwgcG9ydCB9KSB7XG4gIGNvbnN0IGFwcGxpY2F0aW9uID0gZXhwcmVzcygpO1xuICByZXF1aXJlKCcuL2NvbmZpZy9kYi5qcycpXG4gIGFwcGxpY2F0aW9uLnVzZShleHByZXNzLmpzb24oKSk7XG4gIGFwcGxpY2F0aW9uLnVzZSgnL2FwaS91c2VyJywgdXNlclJvdXRlcyk7XG5cbiAgYXBwbGljYXRpb24ubGlzdGVuKFxuICAgIHBvcnQsXG4gICAgKCkgPT4gY29uc29sZS5sb2coYFNlcnZlciBzdGFydGVkIGF0ICR7cHJvdG9jb2x9Oi8vJHtob3N0fToke3BvcnR9YCksXG4gICk7XG59XG5cblxuXG4vKiByZXF1aXJlKCdkb3RlbnYnKS5jb25maWcoe3BhdGg6Jy4vY29uZmlnLy5lbnYnfSlcbiAqL1xuXG5cblxuIl19","map":{"version":3,"sources":["server.js"],"names":["userRoutes","require","launch","host","protocol","port","application","use","express","json","listen","console","log"],"mappings":";;;;;;;AAAA;;;;AACA,MAAMA,UAAU,GAAGC,OAAO,CAAC,sBAAD,CAA1B;;AAEO,SAASC,MAAT,CAAgB;AAAEC,EAAAA,IAAF;AAAQC,EAAAA,QAAR;AAAkBC,EAAAA;AAAlB,CAAhB,EAA0C;AAC/C,QAAMC,WAAW,GAAG,uBAApB;;AACAL,EAAAA,OAAO,CAAC,gBAAD,CAAP;;AACAK,EAAAA,WAAW,CAACC,GAAZ,CAAgBC,iBAAQC,IAAR,EAAhB;AACAH,EAAAA,WAAW,CAACC,GAAZ,CAAgB,WAAhB,EAA6BP,UAA7B;AAEAM,EAAAA,WAAW,CAACI,MAAZ,CACEL,IADF,EAEE,MAAMM,OAAO,CAACC,GAAR,CAAa,qBAAoBR,QAAS,MAAKD,IAAK,IAAGE,IAAK,EAA5D,CAFR;AAID;AAID;AACA","sourceRoot":"/Applications/dossier/mern_project_app2/src/","sourcesContent":["import express from 'express';\nconst userRoutes = require('./routes/user.routes')\n\nexport function launch({ host, protocol, port }) {\n  const application = express();\n  require('./config/db.js')\n  application.use(express.json());\n  application.use('/api/user', userRoutes);\n\n  application.listen(\n    port,\n    () => console.log(`Server started at ${protocol}://${host}:${port}`),\n  );\n}\n\n\n\n/* require('dotenv').config({path:'./config/.env'})\n */\n\n\n\n"]}},"mtime":1651230883669},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/mern_project_app2/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/mern_project_app2\",\"filename\":\"/Applications/dossier/mern_project_app2/src/routes/user.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/mern_project_app2\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nconst router = require(\"express\").Router();\n\nconst authController = require('../controllers/auth.controller');\n\nrouter.post('/register', authController.signUp);\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIucm91dGVzLmpzIl0sIm5hbWVzIjpbInJvdXRlciIsInJlcXVpcmUiLCJSb3V0ZXIiLCJhdXRoQ29udHJvbGxlciIsInBvc3QiLCJzaWduVXAiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU1BLE1BQU0sR0FBR0MsT0FBTyxDQUFDLFNBQUQsQ0FBUCxDQUFtQkMsTUFBbkIsRUFBZjs7QUFDQSxNQUFNQyxjQUFjLEdBQUdGLE9BQU8sQ0FBQyxnQ0FBRCxDQUE5Qjs7QUFFQUQsTUFBTSxDQUFDSSxJQUFQLENBQVksV0FBWixFQUF5QkQsY0FBYyxDQUFDRSxNQUF4QztBQUVBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUJQLE1BQWpCIiwic291cmNlUm9vdCI6Ii9BcHBsaWNhdGlvbnMvZG9zc2llci9tZXJuX3Byb2plY3RfYXBwMi9zcmMvcm91dGVzLyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHJvdXRlciA9IHJlcXVpcmUoXCJleHByZXNzXCIpLlJvdXRlcigpO1xuY29uc3QgYXV0aENvbnRyb2xsZXIgPSByZXF1aXJlKCcuLi9jb250cm9sbGVycy9hdXRoLmNvbnRyb2xsZXInKVxuXG5yb3V0ZXIucG9zdCgnL3JlZ2lzdGVyJywgYXV0aENvbnRyb2xsZXIuc2lnblVwKTtcblxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7Il19","map":{"version":3,"sources":["user.routes.js"],"names":["router","require","Router","authController","post","signUp","module","exports"],"mappings":";;AAAA,MAAMA,MAAM,GAAGC,OAAO,CAAC,SAAD,CAAP,CAAmBC,MAAnB,EAAf;;AACA,MAAMC,cAAc,GAAGF,OAAO,CAAC,gCAAD,CAA9B;;AAEAD,MAAM,CAACI,IAAP,CAAY,WAAZ,EAAyBD,cAAc,CAACE,MAAxC;AAEAC,MAAM,CAACC,OAAP,GAAiBP,MAAjB","sourceRoot":"/Applications/dossier/mern_project_app2/src/routes/","sourcesContent":["const router = require(\"express\").Router();\nconst authController = require('../controllers/auth.controller')\n\nrouter.post('/register', authController.signUp);\n\nmodule.exports = router;"]}},"mtime":1651230869021},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/mern_project_app2/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/mern_project_app2\",\"filename\":\"/Applications/dossier/mern_project_app2/src/controllers/auth.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/mern_project_app2\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.signUp = exports.signIn = exports.logout = void 0;\n\nvar _express = require(\"express\");\n\nvar _errors = require(\"../utils/errors.utils\");\n\nconst User = require('../models/user.model');\n\nconst jwt = require('jsonwebtoken'); //equivalent de 3 jours\n\n\nconst maxAge = 3 * 24 * 60 * 60 * 1000; //function qui créer le token en fonction d'une clé de cryptage qu'on aura mis dans variable d'environnemment\n\nconst createToken = id => {\n  return jwt.sign({\n    id\n  }, process.env.TOKEN_SECRET, {\n    expiresIn: maxAge\n  });\n};\n\nconst signUp = async (req, res) => {\n  const {\n    pseudo,\n    email,\n    password\n  } = req.body;\n\n  try {\n    const user = await User.create({\n      pseudo,\n      email,\n      password\n    });\n    res.status(201).json({\n      user: user._id\n    });\n  } catch (err) {\n    const errors = (0, _errors.signUpErrors)(err);\n    res.status(200).send(errors);\n  }\n};\n\nexports.signUp = signUp;\n\nconst signIn = async (req, res) => {\n  const {\n    email,\n    password\n  } = req.body;\n\n  try {\n    //check user exist and compare email with password\n    const user = await User.login(email, password); //create token\n\n    const token = createToken(user._id); //on retourne le token dans les cookies accessible seulement par le serveur\n\n    res.cookie('jwt', token, {\n      httpOnly: true,\n      maxAge\n    });\n    res.status(200).json({\n      user: user._id\n    });\n  } catch (err) {\n    console.log(err);\n    const errors = (0, _errors.signInErrors)(err);\n    return res.status(200).json(errors);\n  }\n};\n\nexports.signIn = signIn;\n\nconst logout = async (req, res) => {\n  res.cookie('jwt', '', {\n    maxAge: 1\n  });\n  res.status(200).json({\n    message: \"disconect\"\n  });\n};\n\nexports.logout = logout;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGguY29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJVc2VyIiwicmVxdWlyZSIsImp3dCIsIm1heEFnZSIsImNyZWF0ZVRva2VuIiwiaWQiLCJzaWduIiwicHJvY2VzcyIsImVudiIsIlRPS0VOX1NFQ1JFVCIsImV4cGlyZXNJbiIsInNpZ25VcCIsInJlcSIsInJlcyIsInBzZXVkbyIsImVtYWlsIiwicGFzc3dvcmQiLCJib2R5IiwidXNlciIsImNyZWF0ZSIsInN0YXR1cyIsImpzb24iLCJfaWQiLCJlcnIiLCJlcnJvcnMiLCJzZW5kIiwic2lnbkluIiwibG9naW4iLCJ0b2tlbiIsImNvb2tpZSIsImh0dHBPbmx5IiwiY29uc29sZSIsImxvZyIsImxvZ291dCIsIm1lc3NhZ2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFFQSxNQUFNQSxJQUFJLEdBQUdDLE9BQU8sQ0FBQyxzQkFBRCxDQUFwQjs7QUFDQSxNQUFNQyxHQUFHLEdBQUdELE9BQU8sQ0FBQyxjQUFELENBQW5CLEMsQ0FFQTs7O0FBQ0EsTUFBTUUsTUFBTSxHQUFHLElBQUksRUFBSixHQUFTLEVBQVQsR0FBYyxFQUFkLEdBQW1CLElBQWxDLEMsQ0FDQTs7QUFDQSxNQUFNQyxXQUFXLEdBQUlDLEVBQUQsSUFBUTtBQUN4QixTQUFPSCxHQUFHLENBQUNJLElBQUosQ0FBUztBQUFFRCxJQUFBQTtBQUFGLEdBQVQsRUFBaUJFLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxZQUE3QixFQUEyQztBQUM5Q0MsSUFBQUEsU0FBUyxFQUFFUDtBQURtQyxHQUEzQyxDQUFQO0FBR0gsQ0FKRDs7QUFPTyxNQUFNUSxNQUFNLEdBQUcsT0FBT0MsR0FBUCxFQUFZQyxHQUFaLEtBQW9CO0FBQ3RDLFFBQU07QUFBRUMsSUFBQUEsTUFBRjtBQUFVQyxJQUFBQSxLQUFWO0FBQWlCQyxJQUFBQTtBQUFqQixNQUE4QkosR0FBRyxDQUFDSyxJQUF4Qzs7QUFDQSxNQUFJO0FBQ0EsVUFBTUMsSUFBSSxHQUFHLE1BQU1sQixJQUFJLENBQUNtQixNQUFMLENBQVk7QUFBRUwsTUFBQUEsTUFBRjtBQUFVQyxNQUFBQSxLQUFWO0FBQWlCQyxNQUFBQTtBQUFqQixLQUFaLENBQW5CO0FBQ0FILElBQUFBLEdBQUcsQ0FBQ08sTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQUVILE1BQUFBLElBQUksRUFBRUEsSUFBSSxDQUFDSTtBQUFiLEtBQXJCO0FBQ0gsR0FIRCxDQUlBLE9BQU1DLEdBQU4sRUFBVztBQUNQLFVBQU1DLE1BQU0sR0FBRywwQkFBYUQsR0FBYixDQUFmO0FBQ0FWLElBQUFBLEdBQUcsQ0FBQ08sTUFBSixDQUFXLEdBQVgsRUFBZ0JLLElBQWhCLENBQXFCRCxNQUFyQjtBQUNIO0FBQ0osQ0FWTTs7OztBQVlBLE1BQU1FLE1BQU0sR0FBRyxPQUFPZCxHQUFQLEVBQVlDLEdBQVosS0FBb0I7QUFDdEMsUUFBTTtBQUFFRSxJQUFBQSxLQUFGO0FBQVNDLElBQUFBO0FBQVQsTUFBc0JKLEdBQUcsQ0FBQ0ssSUFBaEM7O0FBRUEsTUFBSTtBQUNBO0FBQ0EsVUFBTUMsSUFBSSxHQUFHLE1BQU1sQixJQUFJLENBQUMyQixLQUFMLENBQVdaLEtBQVgsRUFBa0JDLFFBQWxCLENBQW5CLENBRkEsQ0FHQTs7QUFDQSxVQUFNWSxLQUFLLEdBQUd4QixXQUFXLENBQUNjLElBQUksQ0FBQ0ksR0FBTixDQUF6QixDQUpBLENBS0E7O0FBQ0FULElBQUFBLEdBQUcsQ0FBQ2dCLE1BQUosQ0FBVyxLQUFYLEVBQWtCRCxLQUFsQixFQUF5QjtBQUFFRSxNQUFBQSxRQUFRLEVBQUUsSUFBWjtBQUFrQjNCLE1BQUFBO0FBQWxCLEtBQXpCO0FBQ0FVLElBQUFBLEdBQUcsQ0FBQ08sTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQUVILE1BQUFBLElBQUksRUFBRUEsSUFBSSxDQUFDSTtBQUFiLEtBQXJCO0FBQ0gsR0FSRCxDQVNBLE9BQU9DLEdBQVAsRUFBWTtBQUNSUSxJQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWVQsR0FBWjtBQUNBLFVBQU1DLE1BQU0sR0FBRywwQkFBYUQsR0FBYixDQUFmO0FBQ0EsV0FBT1YsR0FBRyxDQUFDTyxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUJHLE1BQXJCLENBQVA7QUFDSDtBQUdKLENBbkJNOzs7O0FBcUJBLE1BQU1TLE1BQU0sR0FBRyxPQUFPckIsR0FBUCxFQUFZQyxHQUFaLEtBQW9CO0FBQ3RDQSxFQUFBQSxHQUFHLENBQUNnQixNQUFKLENBQVcsS0FBWCxFQUFrQixFQUFsQixFQUFzQjtBQUFFMUIsSUFBQUEsTUFBTSxFQUFFO0FBQVYsR0FBdEI7QUFDQVUsRUFBQUEsR0FBRyxDQUFDTyxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUI7QUFBRWEsSUFBQUEsT0FBTyxFQUFFO0FBQVgsR0FBckI7QUFDSCxDQUhNIiwic291cmNlUm9vdCI6Ii9BcHBsaWNhdGlvbnMvZG9zc2llci9tZXJuX3Byb2plY3RfYXBwMi9zcmMvY29udHJvbGxlcnMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcmVzcG9uc2UgfSBmcm9tICdleHByZXNzJ1xuaW1wb3J0IHsgc2lnblVwRXJyb3JzLCBzaWduSW5FcnJvcnMgfSBmcm9tICcuLi91dGlscy9lcnJvcnMudXRpbHMnXG5cbmNvbnN0IFVzZXIgPSByZXF1aXJlKCcuLi9tb2RlbHMvdXNlci5tb2RlbCcpXG5jb25zdCBqd3QgPSByZXF1aXJlKCdqc29ud2VidG9rZW4nKVxuXG4vL2VxdWl2YWxlbnQgZGUgMyBqb3Vyc1xuY29uc3QgbWF4QWdlID0gMyAqIDI0ICogNjAgKiA2MCAqIDEwMDBcbi8vZnVuY3Rpb24gcXVpIGNyw6llciBsZSB0b2tlbiBlbiBmb25jdGlvbiBkJ3VuZSBjbMOpIGRlIGNyeXB0YWdlIHF1J29uIGF1cmEgbWlzIGRhbnMgdmFyaWFibGUgZCdlbnZpcm9ubmVtbWVudFxuY29uc3QgY3JlYXRlVG9rZW4gPSAoaWQpID0+IHtcbiAgICByZXR1cm4gand0LnNpZ24oeyBpZCB9LCBwcm9jZXNzLmVudi5UT0tFTl9TRUNSRVQsIHtcbiAgICAgICAgZXhwaXJlc0luOiBtYXhBZ2VcbiAgICB9KVxufVxuXG5cbmV4cG9ydCBjb25zdCBzaWduVXAgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCB7IHBzZXVkbywgZW1haWwsIHBhc3N3b3JkIH0gPSByZXEuYm9keVxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmNyZWF0ZSh7IHBzZXVkbywgZW1haWwsIHBhc3N3b3JkIH0pXG4gICAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHsgdXNlcjogdXNlci5faWQgfSlcbiAgICB9XG4gICAgY2F0Y2goZXJyKSB7XG4gICAgICAgIGNvbnN0IGVycm9ycyA9IHNpZ25VcEVycm9ycyhlcnIpXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKGVycm9ycylcbiAgICB9XG59XG5cbmV4cG9ydCBjb25zdCBzaWduSW4gPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCB7IGVtYWlsLCBwYXNzd29yZCB9ID0gcmVxLmJvZHlcblxuICAgIHRyeSB7XG4gICAgICAgIC8vY2hlY2sgdXNlciBleGlzdCBhbmQgY29tcGFyZSBlbWFpbCB3aXRoIHBhc3N3b3JkXG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmxvZ2luKGVtYWlsLCBwYXNzd29yZClcbiAgICAgICAgLy9jcmVhdGUgdG9rZW5cbiAgICAgICAgY29uc3QgdG9rZW4gPSBjcmVhdGVUb2tlbih1c2VyLl9pZClcbiAgICAgICAgLy9vbiByZXRvdXJuZSBsZSB0b2tlbiBkYW5zIGxlcyBjb29raWVzIGFjY2Vzc2libGUgc2V1bGVtZW50IHBhciBsZSBzZXJ2ZXVyXG4gICAgICAgIHJlcy5jb29raWUoJ2p3dCcsIHRva2VuLCB7IGh0dHBPbmx5OiB0cnVlLCBtYXhBZ2UgfSlcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyB1c2VyOiB1c2VyLl9pZCB9KVxuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgICAgY29uc3QgZXJyb3JzID0gc2lnbkluRXJyb3JzKGVycilcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKGVycm9ycyApXG4gICAgfVxuXG5cbn1cblxuZXhwb3J0IGNvbnN0IGxvZ291dCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHJlcy5jb29raWUoJ2p3dCcsICcnLCB7IG1heEFnZTogMSB9KTtcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6IFwiZGlzY29uZWN0XCIgfSlcbn1cblxuIl19","map":{"version":3,"sources":["auth.controller.js"],"names":["User","require","jwt","maxAge","createToken","id","sign","process","env","TOKEN_SECRET","expiresIn","signUp","req","res","pseudo","email","password","body","user","create","status","json","_id","err","errors","send","signIn","login","token","cookie","httpOnly","console","log","logout","message"],"mappings":";;;;;;;AAAA;;AACA;;AAEA,MAAMA,IAAI,GAAGC,OAAO,CAAC,sBAAD,CAApB;;AACA,MAAMC,GAAG,GAAGD,OAAO,CAAC,cAAD,CAAnB,C,CAEA;;;AACA,MAAME,MAAM,GAAG,IAAI,EAAJ,GAAS,EAAT,GAAc,EAAd,GAAmB,IAAlC,C,CACA;;AACA,MAAMC,WAAW,GAAIC,EAAD,IAAQ;AACxB,SAAOH,GAAG,CAACI,IAAJ,CAAS;AAAED,IAAAA;AAAF,GAAT,EAAiBE,OAAO,CAACC,GAAR,CAAYC,YAA7B,EAA2C;AAC9CC,IAAAA,SAAS,EAAEP;AADmC,GAA3C,CAAP;AAGH,CAJD;;AAOO,MAAMQ,MAAM,GAAG,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACtC,QAAM;AAAEC,IAAAA,MAAF;AAAUC,IAAAA,KAAV;AAAiBC,IAAAA;AAAjB,MAA8BJ,GAAG,CAACK,IAAxC;;AACA,MAAI;AACA,UAAMC,IAAI,GAAG,MAAMlB,IAAI,CAACmB,MAAL,CAAY;AAAEL,MAAAA,MAAF;AAAUC,MAAAA,KAAV;AAAiBC,MAAAA;AAAjB,KAAZ,CAAnB;AACAH,IAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEH,MAAAA,IAAI,EAAEA,IAAI,CAACI;AAAb,KAArB;AACH,GAHD,CAIA,OAAMC,GAAN,EAAW;AACP,UAAMC,MAAM,GAAG,0BAAaD,GAAb,CAAf;AACAV,IAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBK,IAAhB,CAAqBD,MAArB;AACH;AACJ,CAVM;;;;AAYA,MAAME,MAAM,GAAG,OAAOd,GAAP,EAAYC,GAAZ,KAAoB;AACtC,QAAM;AAAEE,IAAAA,KAAF;AAASC,IAAAA;AAAT,MAAsBJ,GAAG,CAACK,IAAhC;;AAEA,MAAI;AACA;AACA,UAAMC,IAAI,GAAG,MAAMlB,IAAI,CAAC2B,KAAL,CAAWZ,KAAX,EAAkBC,QAAlB,CAAnB,CAFA,CAGA;;AACA,UAAMY,KAAK,GAAGxB,WAAW,CAACc,IAAI,CAACI,GAAN,CAAzB,CAJA,CAKA;;AACAT,IAAAA,GAAG,CAACgB,MAAJ,CAAW,KAAX,EAAkBD,KAAlB,EAAyB;AAAEE,MAAAA,QAAQ,EAAE,IAAZ;AAAkB3B,MAAAA;AAAlB,KAAzB;AACAU,IAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEH,MAAAA,IAAI,EAAEA,IAAI,CAACI;AAAb,KAArB;AACH,GARD,CASA,OAAOC,GAAP,EAAY;AACRQ,IAAAA,OAAO,CAACC,GAAR,CAAYT,GAAZ;AACA,UAAMC,MAAM,GAAG,0BAAaD,GAAb,CAAf;AACA,WAAOV,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBG,MAArB,CAAP;AACH;AAGJ,CAnBM;;;;AAqBA,MAAMS,MAAM,GAAG,OAAOrB,GAAP,EAAYC,GAAZ,KAAoB;AACtCA,EAAAA,GAAG,CAACgB,MAAJ,CAAW,KAAX,EAAkB,EAAlB,EAAsB;AAAE1B,IAAAA,MAAM,EAAE;AAAV,GAAtB;AACAU,EAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEa,IAAAA,OAAO,EAAE;AAAX,GAArB;AACH,CAHM","sourceRoot":"/Applications/dossier/mern_project_app2/src/controllers/","sourcesContent":["import { response } from 'express'\nimport { signUpErrors, signInErrors } from '../utils/errors.utils'\n\nconst User = require('../models/user.model')\nconst jwt = require('jsonwebtoken')\n\n//equivalent de 3 jours\nconst maxAge = 3 * 24 * 60 * 60 * 1000\n//function qui créer le token en fonction d'une clé de cryptage qu'on aura mis dans variable d'environnemment\nconst createToken = (id) => {\n    return jwt.sign({ id }, process.env.TOKEN_SECRET, {\n        expiresIn: maxAge\n    })\n}\n\n\nexport const signUp = async (req, res) => {\n    const { pseudo, email, password } = req.body\n    try {\n        const user = await User.create({ pseudo, email, password })\n        res.status(201).json({ user: user._id })\n    }\n    catch(err) {\n        const errors = signUpErrors(err)\n        res.status(200).send(errors)\n    }\n}\n\nexport const signIn = async (req, res) => {\n    const { email, password } = req.body\n\n    try {\n        //check user exist and compare email with password\n        const user = await User.login(email, password)\n        //create token\n        const token = createToken(user._id)\n        //on retourne le token dans les cookies accessible seulement par le serveur\n        res.cookie('jwt', token, { httpOnly: true, maxAge })\n        res.status(200).json({ user: user._id })\n    }\n    catch (err) {\n        console.log(err)\n        const errors = signInErrors(err)\n        return res.status(200).json(errors )\n    }\n\n\n}\n\nexport const logout = async (req, res) => {\n    res.cookie('jwt', '', { maxAge: 1 });\n    res.status(200).json({ message: \"disconect\" })\n}\n\n"]}},"mtime":1651272394408},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/mern_project_app2/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/mern_project_app2\",\"filename\":\"/Applications/dossier/mern_project_app2/src/models/user.models.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/mern_project_app2\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nconst mongoose = require('mongoose');\n\nconst {\n  isEmail\n} = require('validator');\n\nconst bcrypt = require('bcrypt');\n\nconst Schema = mongoose.Schema;\nconst UserSchema = new Schema({\n  pseudo: {\n    type: String,\n    required: true,\n    minlength: 3,\n    maxlength: 55,\n    unique: true,\n    trim: true\n  },\n  email: {\n    type: String,\n    required: true,\n    validate: [isEmail],\n    lowercase: true,\n    unique: true,\n    trim: true\n  },\n  password: {\n    type: String,\n    required: true,\n    max: 1024,\n    minlength: 6\n  },\n  picture: {\n    type: String,\n    default: \"./uploads/profile/random-user.png\"\n  },\n  bio: {\n    type: String,\n    max: 1024\n  },\n  followers: {\n    type: [String]\n  },\n  following: {\n    type: [String]\n  },\n  likes: {\n    type: [String]\n  }\n}, {\n  timestamps: true\n}); //play function before save into db to allow crypt password\n// le next veut dire quand t'a fini passe à la suite\n\nUserSchema.pre('save', async function (next) {\n  const salt = await bcrypt.genSalt();\n  this.password = await bcrypt.hash(this.password, salt);\n  next();\n}); //c'est ce qui va nous permettre de comparer le password crypté de notre user en base de données avec celui utilise pdt le login d'un user\n\nUserSchema.statics.login = async function (email, password) {\n  const user = await this.findOne({\n    email: email\n  });\n\n  if (user) {\n    const auth = await bcrypt.compare(password, user.password);\n\n    if (auth) {\n      return user;\n    } else {\n      throw Error('Incorrect password');\n    }\n  }\n\n  throw Error('Incorrect password');\n};\n\nlet User = mongoose.model('User', UserSchema);\nmodule.exports = User;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIubW9kZWxzLmpzIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwicmVxdWlyZSIsImlzRW1haWwiLCJiY3J5cHQiLCJTY2hlbWEiLCJVc2VyU2NoZW1hIiwicHNldWRvIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwibWlubGVuZ3RoIiwibWF4bGVuZ3RoIiwidW5pcXVlIiwidHJpbSIsImVtYWlsIiwidmFsaWRhdGUiLCJsb3dlcmNhc2UiLCJwYXNzd29yZCIsIm1heCIsInBpY3R1cmUiLCJkZWZhdWx0IiwiYmlvIiwiZm9sbG93ZXJzIiwiZm9sbG93aW5nIiwibGlrZXMiLCJ0aW1lc3RhbXBzIiwicHJlIiwibmV4dCIsInNhbHQiLCJnZW5TYWx0IiwiaGFzaCIsInN0YXRpY3MiLCJsb2dpbiIsInVzZXIiLCJmaW5kT25lIiwiYXV0aCIsImNvbXBhcmUiLCJFcnJvciIsIlVzZXIiLCJtb2RlbCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsVUFBRCxDQUF4Qjs7QUFDQSxNQUFNO0FBQUNDLEVBQUFBO0FBQUQsSUFBWUQsT0FBTyxDQUFDLFdBQUQsQ0FBekI7O0FBQ0EsTUFBTUUsTUFBTSxHQUFHRixPQUFPLENBQUMsUUFBRCxDQUF0Qjs7QUFFQSxNQUFNRyxNQUFNLEdBQUdKLFFBQVEsQ0FBQ0ksTUFBeEI7QUFDQSxNQUFNQyxVQUFVLEdBQUcsSUFBSUQsTUFBSixDQUFXO0FBQzFCRSxFQUFBQSxNQUFNLEVBQUU7QUFDSkMsSUFBQUEsSUFBSSxFQUFFQyxNQURGO0FBRUpDLElBQUFBLFFBQVEsRUFBQyxJQUZMO0FBR0pDLElBQUFBLFNBQVMsRUFBRSxDQUhQO0FBSUpDLElBQUFBLFNBQVMsRUFBQyxFQUpOO0FBS0pDLElBQUFBLE1BQU0sRUFBQyxJQUxIO0FBTUpDLElBQUFBLElBQUksRUFBQztBQU5ELEdBRGtCO0FBUzFCQyxFQUFBQSxLQUFLLEVBQUM7QUFDRlAsSUFBQUEsSUFBSSxFQUFDQyxNQURIO0FBRUZDLElBQUFBLFFBQVEsRUFBQyxJQUZQO0FBR0ZNLElBQUFBLFFBQVEsRUFBQyxDQUFDYixPQUFELENBSFA7QUFJRmMsSUFBQUEsU0FBUyxFQUFDLElBSlI7QUFLRkosSUFBQUEsTUFBTSxFQUFDLElBTEw7QUFNRkMsSUFBQUEsSUFBSSxFQUFDO0FBTkgsR0FUb0I7QUFpQjFCSSxFQUFBQSxRQUFRLEVBQUM7QUFDTFYsSUFBQUEsSUFBSSxFQUFDQyxNQURBO0FBRUxDLElBQUFBLFFBQVEsRUFBQyxJQUZKO0FBR0xTLElBQUFBLEdBQUcsRUFBQyxJQUhDO0FBSUxSLElBQUFBLFNBQVMsRUFBQztBQUpMLEdBakJpQjtBQXVCMUJTLEVBQUFBLE9BQU8sRUFBQztBQUNKWixJQUFBQSxJQUFJLEVBQUNDLE1BREQ7QUFFSlksSUFBQUEsT0FBTyxFQUFDO0FBRkosR0F2QmtCO0FBMkIxQkMsRUFBQUEsR0FBRyxFQUFDO0FBQ0FkLElBQUFBLElBQUksRUFBQ0MsTUFETDtBQUVBVSxJQUFBQSxHQUFHLEVBQUM7QUFGSixHQTNCc0I7QUErQjFCSSxFQUFBQSxTQUFTLEVBQUU7QUFDUGYsSUFBQUEsSUFBSSxFQUFDLENBQUNDLE1BQUQ7QUFERSxHQS9CZTtBQWtDMUJlLEVBQUFBLFNBQVMsRUFBQztBQUNOaEIsSUFBQUEsSUFBSSxFQUFDLENBQUNDLE1BQUQ7QUFEQyxHQWxDZ0I7QUFxQzFCZ0IsRUFBQUEsS0FBSyxFQUFFO0FBQ0hqQixJQUFBQSxJQUFJLEVBQUMsQ0FBQ0MsTUFBRDtBQURGO0FBckNtQixDQUFYLEVBd0NoQjtBQUNDaUIsRUFBQUEsVUFBVSxFQUFDO0FBRFosQ0F4Q2dCLENBQW5CLEMsQ0E2Q0E7QUFDQTs7QUFDQXBCLFVBQVUsQ0FBQ3FCLEdBQVgsQ0FBZSxNQUFmLEVBQXVCLGdCQUFnQkMsSUFBaEIsRUFBcUI7QUFDeEMsUUFBTUMsSUFBSSxHQUFHLE1BQU16QixNQUFNLENBQUMwQixPQUFQLEVBQW5CO0FBQ0EsT0FBS1osUUFBTCxHQUFnQixNQUFNZCxNQUFNLENBQUMyQixJQUFQLENBQVksS0FBS2IsUUFBakIsRUFBMkJXLElBQTNCLENBQXRCO0FBQ0FELEVBQUFBLElBQUk7QUFDUCxDQUpELEUsQ0FNQTs7QUFDQXRCLFVBQVUsQ0FBQzBCLE9BQVgsQ0FBbUJDLEtBQW5CLEdBQTJCLGdCQUFlbEIsS0FBZixFQUFzQkcsUUFBdEIsRUFBK0I7QUFDdEQsUUFBTWdCLElBQUksR0FBRyxNQUFNLEtBQUtDLE9BQUwsQ0FBYTtBQUFDcEIsSUFBQUEsS0FBSyxFQUFFQTtBQUFSLEdBQWIsQ0FBbkI7O0FBQ0EsTUFBR21CLElBQUgsRUFBUTtBQUNKLFVBQU1FLElBQUksR0FBRyxNQUFNaEMsTUFBTSxDQUFDaUMsT0FBUCxDQUFlbkIsUUFBZixFQUF5QmdCLElBQUksQ0FBQ2hCLFFBQTlCLENBQW5COztBQUNBLFFBQUdrQixJQUFILEVBQVE7QUFDSixhQUFPRixJQUFQO0FBQ0gsS0FGRCxNQUdJO0FBQ0EsWUFBTUksS0FBSyxDQUFDLG9CQUFELENBQVg7QUFDSDtBQUNKOztBQUNELFFBQU1BLEtBQUssQ0FBQyxvQkFBRCxDQUFYO0FBQ0gsQ0FaRDs7QUFhQSxJQUFJQyxJQUFJLEdBQUd0QyxRQUFRLENBQUN1QyxLQUFULENBQWUsTUFBZixFQUF1QmxDLFVBQXZCLENBQVg7QUFDQW1DLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQkgsSUFBakIiLCJzb3VyY2VSb290IjoiL0FwcGxpY2F0aW9ucy9kb3NzaWVyL21lcm5fcHJvamVjdF9hcHAyL3NyYy9tb2RlbHMvIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xuY29uc3Qge2lzRW1haWx9ID0gcmVxdWlyZSgndmFsaWRhdG9yJyk7XG5jb25zdCBiY3J5cHQgPSByZXF1aXJlKCdiY3J5cHQnKTtcblxuY29uc3QgU2NoZW1hID0gbW9uZ29vc2UuU2NoZW1hO1xuY29uc3QgVXNlclNjaGVtYSA9IG5ldyBTY2hlbWEoe1xuICAgIHBzZXVkbzoge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIHJlcXVpcmVkOnRydWUsXG4gICAgICAgIG1pbmxlbmd0aDogMywgXG4gICAgICAgIG1heGxlbmd0aDo1NSwgXG4gICAgICAgIHVuaXF1ZTp0cnVlLFxuICAgICAgICB0cmltOnRydWVcbiAgICB9LFxuICAgIGVtYWlsOntcbiAgICAgICAgdHlwZTpTdHJpbmcsXG4gICAgICAgIHJlcXVpcmVkOnRydWUsXG4gICAgICAgIHZhbGlkYXRlOltpc0VtYWlsXSxcbiAgICAgICAgbG93ZXJjYXNlOnRydWUsICAgICAgICBcbiAgICAgICAgdW5pcXVlOnRydWUsXG4gICAgICAgIHRyaW06dHJ1ZSxcbiAgICB9LFxuICAgIHBhc3N3b3JkOntcbiAgICAgICAgdHlwZTpTdHJpbmcsXG4gICAgICAgIHJlcXVpcmVkOnRydWUsXG4gICAgICAgIG1heDoxMDI0LFxuICAgICAgICBtaW5sZW5ndGg6NlxuICAgIH0sXG4gICAgcGljdHVyZTp7XG4gICAgICAgIHR5cGU6U3RyaW5nLFxuICAgICAgICBkZWZhdWx0OlwiLi91cGxvYWRzL3Byb2ZpbGUvcmFuZG9tLXVzZXIucG5nXCJcbiAgICB9LFxuICAgIGJpbzp7XG4gICAgICAgIHR5cGU6U3RyaW5nLFxuICAgICAgICBtYXg6MTAyNFxuICAgIH0sXG4gICAgZm9sbG93ZXJzOiB7XG4gICAgICAgIHR5cGU6W1N0cmluZ10sXG4gICAgfSxcbiAgICBmb2xsb3dpbmc6e1xuICAgICAgICB0eXBlOltTdHJpbmddLFxuICAgIH0sXG4gICAgbGlrZXM6IHtcbiAgICAgICAgdHlwZTpbU3RyaW5nXSxcbiAgICB9XG59LCB7XG4gICAgdGltZXN0YW1wczp0cnVlXG59XG4pO1xuXG4vL3BsYXkgZnVuY3Rpb24gYmVmb3JlIHNhdmUgaW50byBkYiB0byBhbGxvdyBjcnlwdCBwYXNzd29yZFxuLy8gbGUgbmV4dCB2ZXV0IGRpcmUgcXVhbmQgdCdhIGZpbmkgcGFzc2Ugw6AgbGEgc3VpdGVcblVzZXJTY2hlbWEucHJlKCdzYXZlJywgYXN5bmMgZnVuY3Rpb24gKG5leHQpe1xuICAgIGNvbnN0IHNhbHQgPSBhd2FpdCBiY3J5cHQuZ2VuU2FsdCgpO1xuICAgIHRoaXMucGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaCh0aGlzLnBhc3N3b3JkLCBzYWx0KTtcbiAgICBuZXh0KCk7XG59KVxuXG4vL2MnZXN0IGNlIHF1aSB2YSBub3VzIHBlcm1ldHRyZSBkZSBjb21wYXJlciBsZSBwYXNzd29yZCBjcnlwdMOpIGRlIG5vdHJlIHVzZXIgZW4gYmFzZSBkZSBkb25uw6llcyBhdmVjIGNlbHVpIHV0aWxpc2UgcGR0IGxlIGxvZ2luIGQndW4gdXNlclxuVXNlclNjaGVtYS5zdGF0aWNzLmxvZ2luID0gYXN5bmMgZnVuY3Rpb24oZW1haWwsIHBhc3N3b3JkKXtcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgdGhpcy5maW5kT25lKHtlbWFpbDogZW1haWx9KTtcbiAgICBpZih1c2VyKXtcbiAgICAgICAgY29uc3QgYXV0aCA9IGF3YWl0IGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCB1c2VyLnBhc3N3b3JkKVxuICAgICAgICBpZihhdXRoKXtcbiAgICAgICAgICAgIHJldHVybiB1c2VyXG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdJbmNvcnJlY3QgcGFzc3dvcmQnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0aHJvdyBFcnJvcignSW5jb3JyZWN0IHBhc3N3b3JkJyk7XG59XG5sZXQgVXNlciA9IG1vbmdvb3NlLm1vZGVsKCdVc2VyJywgVXNlclNjaGVtYSk7XG5tb2R1bGUuZXhwb3J0cyA9IFVzZXI7Il19","map":{"version":3,"sources":["user.models.js"],"names":["mongoose","require","isEmail","bcrypt","Schema","UserSchema","pseudo","type","String","required","minlength","maxlength","unique","trim","email","validate","lowercase","password","max","picture","default","bio","followers","following","likes","timestamps","pre","next","salt","genSalt","hash","statics","login","user","findOne","auth","compare","Error","User","model","module","exports"],"mappings":";;AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AACA,MAAM;AAACC,EAAAA;AAAD,IAAYD,OAAO,CAAC,WAAD,CAAzB;;AACA,MAAME,MAAM,GAAGF,OAAO,CAAC,QAAD,CAAtB;;AAEA,MAAMG,MAAM,GAAGJ,QAAQ,CAACI,MAAxB;AACA,MAAMC,UAAU,GAAG,IAAID,MAAJ,CAAW;AAC1BE,EAAAA,MAAM,EAAE;AACJC,IAAAA,IAAI,EAAEC,MADF;AAEJC,IAAAA,QAAQ,EAAC,IAFL;AAGJC,IAAAA,SAAS,EAAE,CAHP;AAIJC,IAAAA,SAAS,EAAC,EAJN;AAKJC,IAAAA,MAAM,EAAC,IALH;AAMJC,IAAAA,IAAI,EAAC;AAND,GADkB;AAS1BC,EAAAA,KAAK,EAAC;AACFP,IAAAA,IAAI,EAACC,MADH;AAEFC,IAAAA,QAAQ,EAAC,IAFP;AAGFM,IAAAA,QAAQ,EAAC,CAACb,OAAD,CAHP;AAIFc,IAAAA,SAAS,EAAC,IAJR;AAKFJ,IAAAA,MAAM,EAAC,IALL;AAMFC,IAAAA,IAAI,EAAC;AANH,GAToB;AAiB1BI,EAAAA,QAAQ,EAAC;AACLV,IAAAA,IAAI,EAACC,MADA;AAELC,IAAAA,QAAQ,EAAC,IAFJ;AAGLS,IAAAA,GAAG,EAAC,IAHC;AAILR,IAAAA,SAAS,EAAC;AAJL,GAjBiB;AAuB1BS,EAAAA,OAAO,EAAC;AACJZ,IAAAA,IAAI,EAACC,MADD;AAEJY,IAAAA,OAAO,EAAC;AAFJ,GAvBkB;AA2B1BC,EAAAA,GAAG,EAAC;AACAd,IAAAA,IAAI,EAACC,MADL;AAEAU,IAAAA,GAAG,EAAC;AAFJ,GA3BsB;AA+B1BI,EAAAA,SAAS,EAAE;AACPf,IAAAA,IAAI,EAAC,CAACC,MAAD;AADE,GA/Be;AAkC1Be,EAAAA,SAAS,EAAC;AACNhB,IAAAA,IAAI,EAAC,CAACC,MAAD;AADC,GAlCgB;AAqC1BgB,EAAAA,KAAK,EAAE;AACHjB,IAAAA,IAAI,EAAC,CAACC,MAAD;AADF;AArCmB,CAAX,EAwChB;AACCiB,EAAAA,UAAU,EAAC;AADZ,CAxCgB,CAAnB,C,CA6CA;AACA;;AACApB,UAAU,CAACqB,GAAX,CAAe,MAAf,EAAuB,gBAAgBC,IAAhB,EAAqB;AACxC,QAAMC,IAAI,GAAG,MAAMzB,MAAM,CAAC0B,OAAP,EAAnB;AACA,OAAKZ,QAAL,GAAgB,MAAMd,MAAM,CAAC2B,IAAP,CAAY,KAAKb,QAAjB,EAA2BW,IAA3B,CAAtB;AACAD,EAAAA,IAAI;AACP,CAJD,E,CAMA;;AACAtB,UAAU,CAAC0B,OAAX,CAAmBC,KAAnB,GAA2B,gBAAelB,KAAf,EAAsBG,QAAtB,EAA+B;AACtD,QAAMgB,IAAI,GAAG,MAAM,KAAKC,OAAL,CAAa;AAACpB,IAAAA,KAAK,EAAEA;AAAR,GAAb,CAAnB;;AACA,MAAGmB,IAAH,EAAQ;AACJ,UAAME,IAAI,GAAG,MAAMhC,MAAM,CAACiC,OAAP,CAAenB,QAAf,EAAyBgB,IAAI,CAAChB,QAA9B,CAAnB;;AACA,QAAGkB,IAAH,EAAQ;AACJ,aAAOF,IAAP;AACH,KAFD,MAGI;AACA,YAAMI,KAAK,CAAC,oBAAD,CAAX;AACH;AACJ;;AACD,QAAMA,KAAK,CAAC,oBAAD,CAAX;AACH,CAZD;;AAaA,IAAIC,IAAI,GAAGtC,QAAQ,CAACuC,KAAT,CAAe,MAAf,EAAuBlC,UAAvB,CAAX;AACAmC,MAAM,CAACC,OAAP,GAAiBH,IAAjB","sourceRoot":"/Applications/dossier/mern_project_app2/src/models/","sourcesContent":["const mongoose = require('mongoose');\nconst {isEmail} = require('validator');\nconst bcrypt = require('bcrypt');\n\nconst Schema = mongoose.Schema;\nconst UserSchema = new Schema({\n    pseudo: {\n        type: String,\n        required:true,\n        minlength: 3, \n        maxlength:55, \n        unique:true,\n        trim:true\n    },\n    email:{\n        type:String,\n        required:true,\n        validate:[isEmail],\n        lowercase:true,        \n        unique:true,\n        trim:true,\n    },\n    password:{\n        type:String,\n        required:true,\n        max:1024,\n        minlength:6\n    },\n    picture:{\n        type:String,\n        default:\"./uploads/profile/random-user.png\"\n    },\n    bio:{\n        type:String,\n        max:1024\n    },\n    followers: {\n        type:[String],\n    },\n    following:{\n        type:[String],\n    },\n    likes: {\n        type:[String],\n    }\n}, {\n    timestamps:true\n}\n);\n\n//play function before save into db to allow crypt password\n// le next veut dire quand t'a fini passe à la suite\nUserSchema.pre('save', async function (next){\n    const salt = await bcrypt.genSalt();\n    this.password = await bcrypt.hash(this.password, salt);\n    next();\n})\n\n//c'est ce qui va nous permettre de comparer le password crypté de notre user en base de données avec celui utilise pdt le login d'un user\nUserSchema.statics.login = async function(email, password){\n    const user = await this.findOne({email: email});\n    if(user){\n        const auth = await bcrypt.compare(password, user.password)\n        if(auth){\n            return user\n        }\n        else{\n            throw Error('Incorrect password');\n        }\n    }\n    throw Error('Incorrect password');\n}\nlet User = mongoose.model('User', UserSchema);\nmodule.exports = User;"]}},"mtime":1651271257003},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/mern_project_app2/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/mern_project_app2\",\"filename\":\"/Applications/dossier/mern_project_app2/src/server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/mern_project_app2\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.launch = launch;\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _response = _interopRequireDefault(require(\"express/lib/response\"));\n\nvar _routes = _interopRequireDefault(require(\"./routes\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst cookieParser = require(\"cookie-parser\");\n\nconst {\n  checkUser,\n  requireAuth\n} = require('./middlewares/auth.middleware');\n\nfunction launch({\n  host,\n  protocol,\n  port\n}) {\n  const application = (0, _express.default)();\n\n  require('dotenv').config({\n    path: './.env'\n  });\n\n  require('../database.js'); // va nous permettre de lire les body des requetes entre autres\n\n\n  application.use(_express.default.json()); // va nous permettre de lire les cookies\n\n  application.use(cookieParser()); // notre middleware de sécurité\n\n  application.get('*', checkUser); //cest ce qui permet de loger un user lorsqu'il arrive sur le site\n\n  application.get('/jwtid', requireAuth, (req, res) => {\n    res.status(200).send(res.locals.user._id);\n  });\n  application.use(_routes.default);\n  application.listen(port, () => console.log(`Server started at ${protocol}://${host}:${port}`));\n}\n/* require('dotenv').config({path:'./config/.env'})\n */\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJuYW1lcyI6WyJjb29raWVQYXJzZXIiLCJyZXF1aXJlIiwiY2hlY2tVc2VyIiwicmVxdWlyZUF1dGgiLCJsYXVuY2giLCJob3N0IiwicHJvdG9jb2wiLCJwb3J0IiwiYXBwbGljYXRpb24iLCJjb25maWciLCJwYXRoIiwidXNlIiwiZXhwcmVzcyIsImpzb24iLCJnZXQiLCJyZXEiLCJyZXMiLCJzdGF0dXMiLCJzZW5kIiwibG9jYWxzIiwidXNlciIsIl9pZCIsIkRlZmF1bHRSb3V0ZXIiLCJsaXN0ZW4iLCJjb25zb2xlIiwibG9nIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7Ozs7QUFDQSxNQUFNQSxZQUFZLEdBQUdDLE9BQU8sQ0FBQyxlQUFELENBQTVCOztBQUNBLE1BQU07QUFBQ0MsRUFBQUEsU0FBRDtBQUFZQyxFQUFBQTtBQUFaLElBQTJCRixPQUFPLENBQUMsK0JBQUQsQ0FBeEM7O0FBR08sU0FBU0csTUFBVCxDQUFnQjtBQUFFQyxFQUFBQSxJQUFGO0FBQVFDLEVBQUFBLFFBQVI7QUFBa0JDLEVBQUFBO0FBQWxCLENBQWhCLEVBQTBDO0FBQy9DLFFBQU1DLFdBQVcsR0FBRyx1QkFBcEI7O0FBQ0FQLEVBQUFBLE9BQU8sQ0FBQyxRQUFELENBQVAsQ0FBa0JRLE1BQWxCLENBQXlCO0FBQUNDLElBQUFBLElBQUksRUFBQztBQUFOLEdBQXpCOztBQUNBVCxFQUFBQSxPQUFPLENBQUMsZ0JBQUQsQ0FBUCxDQUgrQyxDQUkvQzs7O0FBQ0FPLEVBQUFBLFdBQVcsQ0FBQ0csR0FBWixDQUFnQkMsaUJBQVFDLElBQVIsRUFBaEIsRUFMK0MsQ0FNL0M7O0FBQ0FMLEVBQUFBLFdBQVcsQ0FBQ0csR0FBWixDQUFnQlgsWUFBWSxFQUE1QixFQVArQyxDQVEvQzs7QUFDQVEsRUFBQUEsV0FBVyxDQUFDTSxHQUFaLENBQWdCLEdBQWhCLEVBQW9CWixTQUFwQixFQVQrQyxDQVUvQzs7QUFDQU0sRUFBQUEsV0FBVyxDQUFDTSxHQUFaLENBQWdCLFFBQWhCLEVBQXlCWCxXQUF6QixFQUFzQyxDQUFDWSxHQUFELEVBQU1DLEdBQU4sS0FBYTtBQUNqREEsSUFBQUEsR0FBRyxDQUFDQyxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUJGLEdBQUcsQ0FBQ0csTUFBSixDQUFXQyxJQUFYLENBQWdCQyxHQUFyQztBQUNELEdBRkQ7QUFLQWIsRUFBQUEsV0FBVyxDQUFDRyxHQUFaLENBQWdCVyxlQUFoQjtBQUVBZCxFQUFBQSxXQUFXLENBQUNlLE1BQVosQ0FDRWhCLElBREYsRUFFRSxNQUFNaUIsT0FBTyxDQUFDQyxHQUFSLENBQWEscUJBQW9CbkIsUUFBUyxNQUFLRCxJQUFLLElBQUdFLElBQUssRUFBNUQsQ0FGUjtBQUlEO0FBSUQ7QUFDQSIsInNvdXJjZVJvb3QiOiIvQXBwbGljYXRpb25zL2Rvc3NpZXIvbWVybl9wcm9qZWN0X2FwcDIvc3JjLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IHJlcyBmcm9tICdleHByZXNzL2xpYi9yZXNwb25zZSc7XG5pbXBvcnQgRGVmYXVsdFJvdXRlciBmcm9tICcuL3JvdXRlcyc7XG5jb25zdCBjb29raWVQYXJzZXIgPSByZXF1aXJlKFwiY29va2llLXBhcnNlclwiKVxuY29uc3Qge2NoZWNrVXNlciwgcmVxdWlyZUF1dGh9ID0gcmVxdWlyZSgnLi9taWRkbGV3YXJlcy9hdXRoLm1pZGRsZXdhcmUnKVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBsYXVuY2goeyBob3N0LCBwcm90b2NvbCwgcG9ydCB9KSB7XG4gIGNvbnN0IGFwcGxpY2F0aW9uID0gZXhwcmVzcygpO1xuICByZXF1aXJlKCdkb3RlbnYnKS5jb25maWcoe3BhdGg6Jy4vLmVudid9KVxuICByZXF1aXJlKCcuLi9kYXRhYmFzZS5qcycpXG4gIC8vIHZhIG5vdXMgcGVybWV0dHJlIGRlIGxpcmUgbGVzIGJvZHkgZGVzIHJlcXVldGVzIGVudHJlIGF1dHJlc1xuICBhcHBsaWNhdGlvbi51c2UoZXhwcmVzcy5qc29uKCkpO1xuICAvLyB2YSBub3VzIHBlcm1ldHRyZSBkZSBsaXJlIGxlcyBjb29raWVzXG4gIGFwcGxpY2F0aW9uLnVzZShjb29raWVQYXJzZXIoKSk7XG4gIC8vIG5vdHJlIG1pZGRsZXdhcmUgZGUgc8OpY3VyaXTDqVxuICBhcHBsaWNhdGlvbi5nZXQoJyonLGNoZWNrVXNlcilcbiAgLy9jZXN0IGNlIHF1aSBwZXJtZXQgZGUgbG9nZXIgdW4gdXNlciBsb3JzcXUnaWwgYXJyaXZlIHN1ciBsZSBzaXRlXG4gIGFwcGxpY2F0aW9uLmdldCgnL2p3dGlkJyxyZXF1aXJlQXV0aCwgKHJlcSwgcmVzKT0+IHtcbiAgICByZXMuc3RhdHVzKDIwMCkuc2VuZChyZXMubG9jYWxzLnVzZXIuX2lkKVxuICB9KVxuXG5cbiAgYXBwbGljYXRpb24udXNlKERlZmF1bHRSb3V0ZXIpO1xuXG4gIGFwcGxpY2F0aW9uLmxpc3RlbihcbiAgICBwb3J0LFxuICAgICgpID0+IGNvbnNvbGUubG9nKGBTZXJ2ZXIgc3RhcnRlZCBhdCAke3Byb3RvY29sfTovLyR7aG9zdH06JHtwb3J0fWApLFxuICApO1xufVxuXG5cblxuLyogcmVxdWlyZSgnZG90ZW52JykuY29uZmlnKHtwYXRoOicuL2NvbmZpZy8uZW52J30pXG4gKi9cblxuXG5cbiJdfQ==","map":{"version":3,"sources":["server.js"],"names":["cookieParser","require","checkUser","requireAuth","launch","host","protocol","port","application","config","path","use","express","json","get","req","res","status","send","locals","user","_id","DefaultRouter","listen","console","log"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AACA,MAAMA,YAAY,GAAGC,OAAO,CAAC,eAAD,CAA5B;;AACA,MAAM;AAACC,EAAAA,SAAD;AAAYC,EAAAA;AAAZ,IAA2BF,OAAO,CAAC,+BAAD,CAAxC;;AAGO,SAASG,MAAT,CAAgB;AAAEC,EAAAA,IAAF;AAAQC,EAAAA,QAAR;AAAkBC,EAAAA;AAAlB,CAAhB,EAA0C;AAC/C,QAAMC,WAAW,GAAG,uBAApB;;AACAP,EAAAA,OAAO,CAAC,QAAD,CAAP,CAAkBQ,MAAlB,CAAyB;AAACC,IAAAA,IAAI,EAAC;AAAN,GAAzB;;AACAT,EAAAA,OAAO,CAAC,gBAAD,CAAP,CAH+C,CAI/C;;;AACAO,EAAAA,WAAW,CAACG,GAAZ,CAAgBC,iBAAQC,IAAR,EAAhB,EAL+C,CAM/C;;AACAL,EAAAA,WAAW,CAACG,GAAZ,CAAgBX,YAAY,EAA5B,EAP+C,CAQ/C;;AACAQ,EAAAA,WAAW,CAACM,GAAZ,CAAgB,GAAhB,EAAoBZ,SAApB,EAT+C,CAU/C;;AACAM,EAAAA,WAAW,CAACM,GAAZ,CAAgB,QAAhB,EAAyBX,WAAzB,EAAsC,CAACY,GAAD,EAAMC,GAAN,KAAa;AACjDA,IAAAA,GAAG,CAACC,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBF,GAAG,CAACG,MAAJ,CAAWC,IAAX,CAAgBC,GAArC;AACD,GAFD;AAKAb,EAAAA,WAAW,CAACG,GAAZ,CAAgBW,eAAhB;AAEAd,EAAAA,WAAW,CAACe,MAAZ,CACEhB,IADF,EAEE,MAAMiB,OAAO,CAACC,GAAR,CAAa,qBAAoBnB,QAAS,MAAKD,IAAK,IAAGE,IAAK,EAA5D,CAFR;AAID;AAID;AACA","sourceRoot":"/Applications/dossier/mern_project_app2/src/","sourcesContent":["import express from 'express';\nimport res from 'express/lib/response';\nimport DefaultRouter from './routes';\nconst cookieParser = require(\"cookie-parser\")\nconst {checkUser, requireAuth} = require('./middlewares/auth.middleware')\n\n\nexport function launch({ host, protocol, port }) {\n  const application = express();\n  require('dotenv').config({path:'./.env'})\n  require('../database.js')\n  // va nous permettre de lire les body des requetes entre autres\n  application.use(express.json());\n  // va nous permettre de lire les cookies\n  application.use(cookieParser());\n  // notre middleware de sécurité\n  application.get('*',checkUser)\n  //cest ce qui permet de loger un user lorsqu'il arrive sur le site\n  application.get('/jwtid',requireAuth, (req, res)=> {\n    res.status(200).send(res.locals.user._id)\n  })\n\n\n  application.use(DefaultRouter);\n\n  application.listen(\n    port,\n    () => console.log(`Server started at ${protocol}://${host}:${port}`),\n  );\n}\n\n\n\n/* require('dotenv').config({path:'./config/.env'})\n */\n\n\n\n"]}},"mtime":1651256245627},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/mern_project_app2/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/mern_project_app2\",\"filename\":\"/Applications/dossier/mern_project_app2/db.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/mern_project_app2\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nconst mongoose = require('mongoose');\n\nmongoose.connect(`mongodb+srv://${process.env.DB_USERNAME}:${process.env.DB_PASSWORD}@cluster0.gbvxg.mongodb.net/mern_project`).then(() => console.log('Connected to MongoDB')).catch(error => console.log(\"Failed to connect MongoDB\", error));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRiLmpzIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwicmVxdWlyZSIsImNvbm5lY3QiLCJwcm9jZXNzIiwiZW52IiwiREJfVVNFUk5BTUUiLCJEQl9QQVNTV09SRCIsInRoZW4iLCJjb25zb2xlIiwibG9nIiwiY2F0Y2giLCJlcnJvciJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxVQUFELENBQXhCOztBQUVBRCxRQUFRLENBQ0hFLE9BREwsQ0FDYyxpQkFBZ0JDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxXQUFZLElBQUdGLE9BQU8sQ0FBQ0MsR0FBUixDQUFZRSxXQUFZLDBDQURqRixFQUVLQyxJQUZMLENBRVUsTUFBTUMsT0FBTyxDQUFDQyxHQUFSLENBQVksc0JBQVosQ0FGaEIsRUFHS0MsS0FITCxDQUdZQyxLQUFELElBQVdILE9BQU8sQ0FBQ0MsR0FBUixDQUFZLDJCQUFaLEVBQXlDRSxLQUF6QyxDQUh0QiIsInNvdXJjZVJvb3QiOiIvQXBwbGljYXRpb25zL2Rvc3NpZXIvbWVybl9wcm9qZWN0X2FwcDIvIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpXG5cbm1vbmdvb3NlXG4gICAgLmNvbm5lY3QoYG1vbmdvZGIrc3J2Oi8vJHtwcm9jZXNzLmVudi5EQl9VU0VSTkFNRX06JHtwcm9jZXNzLmVudi5EQl9QQVNTV09SRH1AY2x1c3RlcjAuZ2J2eGcubW9uZ29kYi5uZXQvbWVybl9wcm9qZWN0YClcbiAgICAudGhlbigoKSA9PiBjb25zb2xlLmxvZygnQ29ubmVjdGVkIHRvIE1vbmdvREInKSlcbiAgICAuY2F0Y2goKGVycm9yKSA9PiBjb25zb2xlLmxvZyhcIkZhaWxlZCB0byBjb25uZWN0IE1vbmdvREJcIiwgZXJyb3IpKSJdfQ==","map":{"version":3,"sources":["db.js"],"names":["mongoose","require","connect","process","env","DB_USERNAME","DB_PASSWORD","then","console","log","catch","error"],"mappings":";;AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AAEAD,QAAQ,CACHE,OADL,CACc,iBAAgBC,OAAO,CAACC,GAAR,CAAYC,WAAY,IAAGF,OAAO,CAACC,GAAR,CAAYE,WAAY,0CADjF,EAEKC,IAFL,CAEU,MAAMC,OAAO,CAACC,GAAR,CAAY,sBAAZ,CAFhB,EAGKC,KAHL,CAGYC,KAAD,IAAWH,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAAyCE,KAAzC,CAHtB","sourceRoot":"/Applications/dossier/mern_project_app2/","sourcesContent":["const mongoose = require('mongoose')\n\nmongoose\n    .connect(`mongodb+srv://${process.env.DB_USERNAME}:${process.env.DB_PASSWORD}@cluster0.gbvxg.mongodb.net/mern_project`)\n    .then(() => console.log('Connected to MongoDB'))\n    .catch((error) => console.log(\"Failed to connect MongoDB\", error))"]}},"mtime":1651231241527},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/mern_project_app2/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/mern_project_app2\",\"filename\":\"/Applications/dossier/mern_project_app2/src/routes/user.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/mern_project_app2\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nconst router = require(\"express\").Router();\n\nconst authController = require('../controllers/auth.controller');\n\nrouter.post('/register', authController.signUp);\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIucm91dGVzLmpzIl0sIm5hbWVzIjpbInJvdXRlciIsInJlcXVpcmUiLCJSb3V0ZXIiLCJhdXRoQ29udHJvbGxlciIsInBvc3QiLCJzaWduVXAiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU1BLE1BQU0sR0FBR0MsT0FBTyxDQUFDLFNBQUQsQ0FBUCxDQUFtQkMsTUFBbkIsRUFBZjs7QUFDQSxNQUFNQyxjQUFjLEdBQUdGLE9BQU8sQ0FBQyxnQ0FBRCxDQUE5Qjs7QUFFQUQsTUFBTSxDQUFDSSxJQUFQLENBQVksV0FBWixFQUF5QkQsY0FBYyxDQUFDRSxNQUF4QztBQUVBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUJQLE1BQWpCIiwic291cmNlUm9vdCI6Ii9BcHBsaWNhdGlvbnMvZG9zc2llci9tZXJuX3Byb2plY3RfYXBwMi9zcmMvcm91dGVzLyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHJvdXRlciA9IHJlcXVpcmUoXCJleHByZXNzXCIpLlJvdXRlcigpO1xuY29uc3QgYXV0aENvbnRyb2xsZXIgPSByZXF1aXJlKCcuLi9jb250cm9sbGVycy9hdXRoLmNvbnRyb2xsZXInKVxuXG5yb3V0ZXIucG9zdCgnL3JlZ2lzdGVyJywgYXV0aENvbnRyb2xsZXIuc2lnblVwKTtcblxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7Il19","map":{"version":3,"sources":["user.routes.js"],"names":["router","require","Router","authController","post","signUp","module","exports"],"mappings":";;AAAA,MAAMA,MAAM,GAAGC,OAAO,CAAC,SAAD,CAAP,CAAmBC,MAAnB,EAAf;;AACA,MAAMC,cAAc,GAAGF,OAAO,CAAC,gCAAD,CAA9B;;AAEAD,MAAM,CAACI,IAAP,CAAY,WAAZ,EAAyBD,cAAc,CAACE,MAAxC;AAEAC,MAAM,CAACC,OAAP,GAAiBP,MAAjB","sourceRoot":"/Applications/dossier/mern_project_app2/src/routes/","sourcesContent":["const router = require(\"express\").Router();\nconst authController = require('../controllers/auth.controller')\n\nrouter.post('/register', authController.signUp);\n\nmodule.exports = router;"]}},"mtime":1651230869021},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/mern_project_app2/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/mern_project_app2\",\"filename\":\"/Applications/dossier/mern_project_app2/src/controllers/auth.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/mern_project_app2\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.signUp = exports.signIn = exports.logout = void 0;\n\nvar _express = require(\"express\");\n\nvar _errors = require(\"../utils/errors.utils\");\n\nconst User = require('../models/user.model');\n\nconst jwt = require('jsonwebtoken'); //equivalent de 3 jours\n\n\nconst maxAge = 3 * 24 * 60 * 60 * 1000; //function qui créer le token en fonction d'une clé de cryptage qu'on aura mis dans variable d'environnemment\n\nconst createToken = id => {\n  return jwt.sign({\n    id\n  }, process.env.TOKEN_SECRET, {\n    expiresIn: maxAge\n  });\n};\n\nconst signUp = async (req, res) => {\n  const {\n    pseudo,\n    email,\n    password\n  } = req.body;\n\n  try {\n    const user = await User.create({\n      pseudo,\n      email,\n      password\n    });\n    res.status(201).json({\n      user: user._id\n    });\n  } catch (err) {\n    const errors = (0, _errors.signUpErrors)(err);\n    res.status(200).send(errors);\n  }\n};\n\nexports.signUp = signUp;\n\nconst signIn = async (req, res) => {\n  const {\n    email,\n    password\n  } = req.body;\n\n  try {\n    //check user exist and compare email with password\n    const user = await User.login(email, password); //create token\n\n    const token = createToken(user._id); //on retourne le token dans les cookies accessible seulement par le serveur\n\n    res.cookie('jwt', token, {\n      httpOnly: true,\n      maxAge\n    });\n    res.status(200).json({\n      user: user._id\n    });\n  } catch (err) {\n    console.log(err);\n    const errors = (0, _errors.signInErrors)(err);\n    return res.status(200).json(errors);\n  }\n};\n\nexports.signIn = signIn;\n\nconst logout = async (req, res) => {\n  res.cookie('jwt', '', {\n    maxAge: 1\n  });\n  res.status(200).json({\n    message: \"disconect\"\n  });\n};\n\nexports.logout = logout;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGguY29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJVc2VyIiwicmVxdWlyZSIsImp3dCIsIm1heEFnZSIsImNyZWF0ZVRva2VuIiwiaWQiLCJzaWduIiwicHJvY2VzcyIsImVudiIsIlRPS0VOX1NFQ1JFVCIsImV4cGlyZXNJbiIsInNpZ25VcCIsInJlcSIsInJlcyIsInBzZXVkbyIsImVtYWlsIiwicGFzc3dvcmQiLCJib2R5IiwidXNlciIsImNyZWF0ZSIsInN0YXR1cyIsImpzb24iLCJfaWQiLCJlcnIiLCJlcnJvcnMiLCJzZW5kIiwic2lnbkluIiwibG9naW4iLCJ0b2tlbiIsImNvb2tpZSIsImh0dHBPbmx5IiwiY29uc29sZSIsImxvZyIsImxvZ291dCIsIm1lc3NhZ2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFFQSxNQUFNQSxJQUFJLEdBQUdDLE9BQU8sQ0FBQyxzQkFBRCxDQUFwQjs7QUFDQSxNQUFNQyxHQUFHLEdBQUdELE9BQU8sQ0FBQyxjQUFELENBQW5CLEMsQ0FFQTs7O0FBQ0EsTUFBTUUsTUFBTSxHQUFHLElBQUksRUFBSixHQUFTLEVBQVQsR0FBYyxFQUFkLEdBQW1CLElBQWxDLEMsQ0FDQTs7QUFDQSxNQUFNQyxXQUFXLEdBQUlDLEVBQUQsSUFBUTtBQUN4QixTQUFPSCxHQUFHLENBQUNJLElBQUosQ0FBUztBQUFFRCxJQUFBQTtBQUFGLEdBQVQsRUFBaUJFLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxZQUE3QixFQUEyQztBQUM5Q0MsSUFBQUEsU0FBUyxFQUFFUDtBQURtQyxHQUEzQyxDQUFQO0FBR0gsQ0FKRDs7QUFPTyxNQUFNUSxNQUFNLEdBQUcsT0FBT0MsR0FBUCxFQUFZQyxHQUFaLEtBQW9CO0FBQ3RDLFFBQU07QUFBRUMsSUFBQUEsTUFBRjtBQUFVQyxJQUFBQSxLQUFWO0FBQWlCQyxJQUFBQTtBQUFqQixNQUE4QkosR0FBRyxDQUFDSyxJQUF4Qzs7QUFDQSxNQUFJO0FBQ0EsVUFBTUMsSUFBSSxHQUFHLE1BQU1sQixJQUFJLENBQUNtQixNQUFMLENBQVk7QUFBRUwsTUFBQUEsTUFBRjtBQUFVQyxNQUFBQSxLQUFWO0FBQWlCQyxNQUFBQTtBQUFqQixLQUFaLENBQW5CO0FBQ0FILElBQUFBLEdBQUcsQ0FBQ08sTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQUVILE1BQUFBLElBQUksRUFBRUEsSUFBSSxDQUFDSTtBQUFiLEtBQXJCO0FBQ0gsR0FIRCxDQUlBLE9BQU1DLEdBQU4sRUFBVztBQUNQLFVBQU1DLE1BQU0sR0FBRywwQkFBYUQsR0FBYixDQUFmO0FBQ0FWLElBQUFBLEdBQUcsQ0FBQ08sTUFBSixDQUFXLEdBQVgsRUFBZ0JLLElBQWhCLENBQXFCRCxNQUFyQjtBQUNIO0FBQ0osQ0FWTTs7OztBQVlBLE1BQU1FLE1BQU0sR0FBRyxPQUFPZCxHQUFQLEVBQVlDLEdBQVosS0FBb0I7QUFDdEMsUUFBTTtBQUFFRSxJQUFBQSxLQUFGO0FBQVNDLElBQUFBO0FBQVQsTUFBc0JKLEdBQUcsQ0FBQ0ssSUFBaEM7O0FBRUEsTUFBSTtBQUNBO0FBQ0EsVUFBTUMsSUFBSSxHQUFHLE1BQU1sQixJQUFJLENBQUMyQixLQUFMLENBQVdaLEtBQVgsRUFBa0JDLFFBQWxCLENBQW5CLENBRkEsQ0FHQTs7QUFDQSxVQUFNWSxLQUFLLEdBQUd4QixXQUFXLENBQUNjLElBQUksQ0FBQ0ksR0FBTixDQUF6QixDQUpBLENBS0E7O0FBQ0FULElBQUFBLEdBQUcsQ0FBQ2dCLE1BQUosQ0FBVyxLQUFYLEVBQWtCRCxLQUFsQixFQUF5QjtBQUFFRSxNQUFBQSxRQUFRLEVBQUUsSUFBWjtBQUFrQjNCLE1BQUFBO0FBQWxCLEtBQXpCO0FBQ0FVLElBQUFBLEdBQUcsQ0FBQ08sTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQUVILE1BQUFBLElBQUksRUFBRUEsSUFBSSxDQUFDSTtBQUFiLEtBQXJCO0FBQ0gsR0FSRCxDQVNBLE9BQU9DLEdBQVAsRUFBWTtBQUNSUSxJQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWVQsR0FBWjtBQUNBLFVBQU1DLE1BQU0sR0FBRywwQkFBYUQsR0FBYixDQUFmO0FBQ0EsV0FBT1YsR0FBRyxDQUFDTyxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUJHLE1BQXJCLENBQVA7QUFDSDtBQUdKLENBbkJNOzs7O0FBcUJBLE1BQU1TLE1BQU0sR0FBRyxPQUFPckIsR0FBUCxFQUFZQyxHQUFaLEtBQW9CO0FBQ3RDQSxFQUFBQSxHQUFHLENBQUNnQixNQUFKLENBQVcsS0FBWCxFQUFrQixFQUFsQixFQUFzQjtBQUFFMUIsSUFBQUEsTUFBTSxFQUFFO0FBQVYsR0FBdEI7QUFDQVUsRUFBQUEsR0FBRyxDQUFDTyxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUI7QUFBRWEsSUFBQUEsT0FBTyxFQUFFO0FBQVgsR0FBckI7QUFDSCxDQUhNIiwic291cmNlUm9vdCI6Ii9BcHBsaWNhdGlvbnMvZG9zc2llci9tZXJuX3Byb2plY3RfYXBwMi9zcmMvY29udHJvbGxlcnMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcmVzcG9uc2UgfSBmcm9tICdleHByZXNzJ1xuaW1wb3J0IHsgc2lnblVwRXJyb3JzLCBzaWduSW5FcnJvcnMgfSBmcm9tICcuLi91dGlscy9lcnJvcnMudXRpbHMnXG5cbmNvbnN0IFVzZXIgPSByZXF1aXJlKCcuLi9tb2RlbHMvdXNlci5tb2RlbCcpXG5jb25zdCBqd3QgPSByZXF1aXJlKCdqc29ud2VidG9rZW4nKVxuXG4vL2VxdWl2YWxlbnQgZGUgMyBqb3Vyc1xuY29uc3QgbWF4QWdlID0gMyAqIDI0ICogNjAgKiA2MCAqIDEwMDBcbi8vZnVuY3Rpb24gcXVpIGNyw6llciBsZSB0b2tlbiBlbiBmb25jdGlvbiBkJ3VuZSBjbMOpIGRlIGNyeXB0YWdlIHF1J29uIGF1cmEgbWlzIGRhbnMgdmFyaWFibGUgZCdlbnZpcm9ubmVtbWVudFxuY29uc3QgY3JlYXRlVG9rZW4gPSAoaWQpID0+IHtcbiAgICByZXR1cm4gand0LnNpZ24oeyBpZCB9LCBwcm9jZXNzLmVudi5UT0tFTl9TRUNSRVQsIHtcbiAgICAgICAgZXhwaXJlc0luOiBtYXhBZ2VcbiAgICB9KVxufVxuXG5cbmV4cG9ydCBjb25zdCBzaWduVXAgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCB7IHBzZXVkbywgZW1haWwsIHBhc3N3b3JkIH0gPSByZXEuYm9keVxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmNyZWF0ZSh7IHBzZXVkbywgZW1haWwsIHBhc3N3b3JkIH0pXG4gICAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHsgdXNlcjogdXNlci5faWQgfSlcbiAgICB9XG4gICAgY2F0Y2goZXJyKSB7XG4gICAgICAgIGNvbnN0IGVycm9ycyA9IHNpZ25VcEVycm9ycyhlcnIpXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKGVycm9ycylcbiAgICB9XG59XG5cbmV4cG9ydCBjb25zdCBzaWduSW4gPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCB7IGVtYWlsLCBwYXNzd29yZCB9ID0gcmVxLmJvZHlcblxuICAgIHRyeSB7XG4gICAgICAgIC8vY2hlY2sgdXNlciBleGlzdCBhbmQgY29tcGFyZSBlbWFpbCB3aXRoIHBhc3N3b3JkXG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmxvZ2luKGVtYWlsLCBwYXNzd29yZClcbiAgICAgICAgLy9jcmVhdGUgdG9rZW5cbiAgICAgICAgY29uc3QgdG9rZW4gPSBjcmVhdGVUb2tlbih1c2VyLl9pZClcbiAgICAgICAgLy9vbiByZXRvdXJuZSBsZSB0b2tlbiBkYW5zIGxlcyBjb29raWVzIGFjY2Vzc2libGUgc2V1bGVtZW50IHBhciBsZSBzZXJ2ZXVyXG4gICAgICAgIHJlcy5jb29raWUoJ2p3dCcsIHRva2VuLCB7IGh0dHBPbmx5OiB0cnVlLCBtYXhBZ2UgfSlcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyB1c2VyOiB1c2VyLl9pZCB9KVxuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgICAgY29uc3QgZXJyb3JzID0gc2lnbkluRXJyb3JzKGVycilcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKGVycm9ycyApXG4gICAgfVxuXG5cbn1cblxuZXhwb3J0IGNvbnN0IGxvZ291dCA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHJlcy5jb29raWUoJ2p3dCcsICcnLCB7IG1heEFnZTogMSB9KTtcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6IFwiZGlzY29uZWN0XCIgfSlcbn1cblxuIl19","map":{"version":3,"sources":["auth.controller.js"],"names":["User","require","jwt","maxAge","createToken","id","sign","process","env","TOKEN_SECRET","expiresIn","signUp","req","res","pseudo","email","password","body","user","create","status","json","_id","err","errors","send","signIn","login","token","cookie","httpOnly","console","log","logout","message"],"mappings":";;;;;;;AAAA;;AACA;;AAEA,MAAMA,IAAI,GAAGC,OAAO,CAAC,sBAAD,CAApB;;AACA,MAAMC,GAAG,GAAGD,OAAO,CAAC,cAAD,CAAnB,C,CAEA;;;AACA,MAAME,MAAM,GAAG,IAAI,EAAJ,GAAS,EAAT,GAAc,EAAd,GAAmB,IAAlC,C,CACA;;AACA,MAAMC,WAAW,GAAIC,EAAD,IAAQ;AACxB,SAAOH,GAAG,CAACI,IAAJ,CAAS;AAAED,IAAAA;AAAF,GAAT,EAAiBE,OAAO,CAACC,GAAR,CAAYC,YAA7B,EAA2C;AAC9CC,IAAAA,SAAS,EAAEP;AADmC,GAA3C,CAAP;AAGH,CAJD;;AAOO,MAAMQ,MAAM,GAAG,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACtC,QAAM;AAAEC,IAAAA,MAAF;AAAUC,IAAAA,KAAV;AAAiBC,IAAAA;AAAjB,MAA8BJ,GAAG,CAACK,IAAxC;;AACA,MAAI;AACA,UAAMC,IAAI,GAAG,MAAMlB,IAAI,CAACmB,MAAL,CAAY;AAAEL,MAAAA,MAAF;AAAUC,MAAAA,KAAV;AAAiBC,MAAAA;AAAjB,KAAZ,CAAnB;AACAH,IAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEH,MAAAA,IAAI,EAAEA,IAAI,CAACI;AAAb,KAArB;AACH,GAHD,CAIA,OAAMC,GAAN,EAAW;AACP,UAAMC,MAAM,GAAG,0BAAaD,GAAb,CAAf;AACAV,IAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBK,IAAhB,CAAqBD,MAArB;AACH;AACJ,CAVM;;;;AAYA,MAAME,MAAM,GAAG,OAAOd,GAAP,EAAYC,GAAZ,KAAoB;AACtC,QAAM;AAAEE,IAAAA,KAAF;AAASC,IAAAA;AAAT,MAAsBJ,GAAG,CAACK,IAAhC;;AAEA,MAAI;AACA;AACA,UAAMC,IAAI,GAAG,MAAMlB,IAAI,CAAC2B,KAAL,CAAWZ,KAAX,EAAkBC,QAAlB,CAAnB,CAFA,CAGA;;AACA,UAAMY,KAAK,GAAGxB,WAAW,CAACc,IAAI,CAACI,GAAN,CAAzB,CAJA,CAKA;;AACAT,IAAAA,GAAG,CAACgB,MAAJ,CAAW,KAAX,EAAkBD,KAAlB,EAAyB;AAAEE,MAAAA,QAAQ,EAAE,IAAZ;AAAkB3B,MAAAA;AAAlB,KAAzB;AACAU,IAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEH,MAAAA,IAAI,EAAEA,IAAI,CAACI;AAAb,KAArB;AACH,GARD,CASA,OAAOC,GAAP,EAAY;AACRQ,IAAAA,OAAO,CAACC,GAAR,CAAYT,GAAZ;AACA,UAAMC,MAAM,GAAG,0BAAaD,GAAb,CAAf;AACA,WAAOV,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBG,MAArB,CAAP;AACH;AAGJ,CAnBM;;;;AAqBA,MAAMS,MAAM,GAAG,OAAOrB,GAAP,EAAYC,GAAZ,KAAoB;AACtCA,EAAAA,GAAG,CAACgB,MAAJ,CAAW,KAAX,EAAkB,EAAlB,EAAsB;AAAE1B,IAAAA,MAAM,EAAE;AAAV,GAAtB;AACAU,EAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEa,IAAAA,OAAO,EAAE;AAAX,GAArB;AACH,CAHM","sourceRoot":"/Applications/dossier/mern_project_app2/src/controllers/","sourcesContent":["import { response } from 'express'\nimport { signUpErrors, signInErrors } from '../utils/errors.utils'\n\nconst User = require('../models/user.model')\nconst jwt = require('jsonwebtoken')\n\n//equivalent de 3 jours\nconst maxAge = 3 * 24 * 60 * 60 * 1000\n//function qui créer le token en fonction d'une clé de cryptage qu'on aura mis dans variable d'environnemment\nconst createToken = (id) => {\n    return jwt.sign({ id }, process.env.TOKEN_SECRET, {\n        expiresIn: maxAge\n    })\n}\n\n\nexport const signUp = async (req, res) => {\n    const { pseudo, email, password } = req.body\n    try {\n        const user = await User.create({ pseudo, email, password })\n        res.status(201).json({ user: user._id })\n    }\n    catch(err) {\n        const errors = signUpErrors(err)\n        res.status(200).send(errors)\n    }\n}\n\nexport const signIn = async (req, res) => {\n    const { email, password } = req.body\n\n    try {\n        //check user exist and compare email with password\n        const user = await User.login(email, password)\n        //create token\n        const token = createToken(user._id)\n        //on retourne le token dans les cookies accessible seulement par le serveur\n        res.cookie('jwt', token, { httpOnly: true, maxAge })\n        res.status(200).json({ user: user._id })\n    }\n    catch (err) {\n        console.log(err)\n        const errors = signInErrors(err)\n        return res.status(200).json(errors )\n    }\n\n\n}\n\nexport const logout = async (req, res) => {\n    res.cookie('jwt', '', { maxAge: 1 });\n    res.status(200).json({ message: \"disconect\" })\n}\n\n"]}},"mtime":1651272394408},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/mern_project_app2/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/mern_project_app2\",\"filename\":\"/Applications/dossier/mern_project_app2/src/models/user.models.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/mern_project_app2\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nconst mongoose = require('mongoose');\n\nconst {\n  isEmail\n} = require('validator');\n\nconst bcrypt = require('bcrypt');\n\nconst Schema = mongoose.Schema;\nconst UserSchema = new Schema({\n  pseudo: {\n    type: String,\n    required: true,\n    minlength: 3,\n    maxlength: 55,\n    unique: true,\n    trim: true\n  },\n  email: {\n    type: String,\n    required: true,\n    validate: [isEmail],\n    lowercase: true,\n    unique: true,\n    trim: true\n  },\n  password: {\n    type: String,\n    required: true,\n    max: 1024,\n    minlength: 6\n  },\n  picture: {\n    type: String,\n    default: \"./uploads/profile/random-user.png\"\n  },\n  bio: {\n    type: String,\n    max: 1024\n  },\n  followers: {\n    type: [String]\n  },\n  following: {\n    type: [String]\n  },\n  likes: {\n    type: [String]\n  }\n}, {\n  timestamps: true\n}); //play function before save into db to allow crypt password\n// le next veut dire quand t'a fini passe à la suite\n\nUserSchema.pre('save', async function (next) {\n  const salt = await bcrypt.genSalt();\n  this.password = await bcrypt.hash(this.password, salt);\n  next();\n}); //c'est ce qui va nous permettre de comparer le password crypté de notre user en base de données avec celui utilise pdt le login d'un user\n\nUserSchema.statics.login = async function (email, password) {\n  const user = await this.findOne({\n    email: email\n  });\n\n  if (user) {\n    const auth = await bcrypt.compare(password, user.password);\n\n    if (auth) {\n      return user;\n    } else {\n      throw Error('Incorrect password');\n    }\n  }\n\n  throw Error('Incorrect password');\n};\n\nlet User = mongoose.model('User', UserSchema);\nmodule.exports = User;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIubW9kZWxzLmpzIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwicmVxdWlyZSIsImlzRW1haWwiLCJiY3J5cHQiLCJTY2hlbWEiLCJVc2VyU2NoZW1hIiwicHNldWRvIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwibWlubGVuZ3RoIiwibWF4bGVuZ3RoIiwidW5pcXVlIiwidHJpbSIsImVtYWlsIiwidmFsaWRhdGUiLCJsb3dlcmNhc2UiLCJwYXNzd29yZCIsIm1heCIsInBpY3R1cmUiLCJkZWZhdWx0IiwiYmlvIiwiZm9sbG93ZXJzIiwiZm9sbG93aW5nIiwibGlrZXMiLCJ0aW1lc3RhbXBzIiwicHJlIiwibmV4dCIsInNhbHQiLCJnZW5TYWx0IiwiaGFzaCIsInN0YXRpY3MiLCJsb2dpbiIsInVzZXIiLCJmaW5kT25lIiwiYXV0aCIsImNvbXBhcmUiLCJFcnJvciIsIlVzZXIiLCJtb2RlbCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsVUFBRCxDQUF4Qjs7QUFDQSxNQUFNO0FBQUNDLEVBQUFBO0FBQUQsSUFBWUQsT0FBTyxDQUFDLFdBQUQsQ0FBekI7O0FBQ0EsTUFBTUUsTUFBTSxHQUFHRixPQUFPLENBQUMsUUFBRCxDQUF0Qjs7QUFFQSxNQUFNRyxNQUFNLEdBQUdKLFFBQVEsQ0FBQ0ksTUFBeEI7QUFDQSxNQUFNQyxVQUFVLEdBQUcsSUFBSUQsTUFBSixDQUFXO0FBQzFCRSxFQUFBQSxNQUFNLEVBQUU7QUFDSkMsSUFBQUEsSUFBSSxFQUFFQyxNQURGO0FBRUpDLElBQUFBLFFBQVEsRUFBQyxJQUZMO0FBR0pDLElBQUFBLFNBQVMsRUFBRSxDQUhQO0FBSUpDLElBQUFBLFNBQVMsRUFBQyxFQUpOO0FBS0pDLElBQUFBLE1BQU0sRUFBQyxJQUxIO0FBTUpDLElBQUFBLElBQUksRUFBQztBQU5ELEdBRGtCO0FBUzFCQyxFQUFBQSxLQUFLLEVBQUM7QUFDRlAsSUFBQUEsSUFBSSxFQUFDQyxNQURIO0FBRUZDLElBQUFBLFFBQVEsRUFBQyxJQUZQO0FBR0ZNLElBQUFBLFFBQVEsRUFBQyxDQUFDYixPQUFELENBSFA7QUFJRmMsSUFBQUEsU0FBUyxFQUFDLElBSlI7QUFLRkosSUFBQUEsTUFBTSxFQUFDLElBTEw7QUFNRkMsSUFBQUEsSUFBSSxFQUFDO0FBTkgsR0FUb0I7QUFpQjFCSSxFQUFBQSxRQUFRLEVBQUM7QUFDTFYsSUFBQUEsSUFBSSxFQUFDQyxNQURBO0FBRUxDLElBQUFBLFFBQVEsRUFBQyxJQUZKO0FBR0xTLElBQUFBLEdBQUcsRUFBQyxJQUhDO0FBSUxSLElBQUFBLFNBQVMsRUFBQztBQUpMLEdBakJpQjtBQXVCMUJTLEVBQUFBLE9BQU8sRUFBQztBQUNKWixJQUFBQSxJQUFJLEVBQUNDLE1BREQ7QUFFSlksSUFBQUEsT0FBTyxFQUFDO0FBRkosR0F2QmtCO0FBMkIxQkMsRUFBQUEsR0FBRyxFQUFDO0FBQ0FkLElBQUFBLElBQUksRUFBQ0MsTUFETDtBQUVBVSxJQUFBQSxHQUFHLEVBQUM7QUFGSixHQTNCc0I7QUErQjFCSSxFQUFBQSxTQUFTLEVBQUU7QUFDUGYsSUFBQUEsSUFBSSxFQUFDLENBQUNDLE1BQUQ7QUFERSxHQS9CZTtBQWtDMUJlLEVBQUFBLFNBQVMsRUFBQztBQUNOaEIsSUFBQUEsSUFBSSxFQUFDLENBQUNDLE1BQUQ7QUFEQyxHQWxDZ0I7QUFxQzFCZ0IsRUFBQUEsS0FBSyxFQUFFO0FBQ0hqQixJQUFBQSxJQUFJLEVBQUMsQ0FBQ0MsTUFBRDtBQURGO0FBckNtQixDQUFYLEVBd0NoQjtBQUNDaUIsRUFBQUEsVUFBVSxFQUFDO0FBRFosQ0F4Q2dCLENBQW5CLEMsQ0E2Q0E7QUFDQTs7QUFDQXBCLFVBQVUsQ0FBQ3FCLEdBQVgsQ0FBZSxNQUFmLEVBQXVCLGdCQUFnQkMsSUFBaEIsRUFBcUI7QUFDeEMsUUFBTUMsSUFBSSxHQUFHLE1BQU16QixNQUFNLENBQUMwQixPQUFQLEVBQW5CO0FBQ0EsT0FBS1osUUFBTCxHQUFnQixNQUFNZCxNQUFNLENBQUMyQixJQUFQLENBQVksS0FBS2IsUUFBakIsRUFBMkJXLElBQTNCLENBQXRCO0FBQ0FELEVBQUFBLElBQUk7QUFDUCxDQUpELEUsQ0FNQTs7QUFDQXRCLFVBQVUsQ0FBQzBCLE9BQVgsQ0FBbUJDLEtBQW5CLEdBQTJCLGdCQUFlbEIsS0FBZixFQUFzQkcsUUFBdEIsRUFBK0I7QUFDdEQsUUFBTWdCLElBQUksR0FBRyxNQUFNLEtBQUtDLE9BQUwsQ0FBYTtBQUFDcEIsSUFBQUEsS0FBSyxFQUFFQTtBQUFSLEdBQWIsQ0FBbkI7O0FBQ0EsTUFBR21CLElBQUgsRUFBUTtBQUNKLFVBQU1FLElBQUksR0FBRyxNQUFNaEMsTUFBTSxDQUFDaUMsT0FBUCxDQUFlbkIsUUFBZixFQUF5QmdCLElBQUksQ0FBQ2hCLFFBQTlCLENBQW5COztBQUNBLFFBQUdrQixJQUFILEVBQVE7QUFDSixhQUFPRixJQUFQO0FBQ0gsS0FGRCxNQUdJO0FBQ0EsWUFBTUksS0FBSyxDQUFDLG9CQUFELENBQVg7QUFDSDtBQUNKOztBQUNELFFBQU1BLEtBQUssQ0FBQyxvQkFBRCxDQUFYO0FBQ0gsQ0FaRDs7QUFhQSxJQUFJQyxJQUFJLEdBQUd0QyxRQUFRLENBQUN1QyxLQUFULENBQWUsTUFBZixFQUF1QmxDLFVBQXZCLENBQVg7QUFDQW1DLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQkgsSUFBakIiLCJzb3VyY2VSb290IjoiL0FwcGxpY2F0aW9ucy9kb3NzaWVyL21lcm5fcHJvamVjdF9hcHAyL3NyYy9tb2RlbHMvIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xuY29uc3Qge2lzRW1haWx9ID0gcmVxdWlyZSgndmFsaWRhdG9yJyk7XG5jb25zdCBiY3J5cHQgPSByZXF1aXJlKCdiY3J5cHQnKTtcblxuY29uc3QgU2NoZW1hID0gbW9uZ29vc2UuU2NoZW1hO1xuY29uc3QgVXNlclNjaGVtYSA9IG5ldyBTY2hlbWEoe1xuICAgIHBzZXVkbzoge1xuICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgIHJlcXVpcmVkOnRydWUsXG4gICAgICAgIG1pbmxlbmd0aDogMywgXG4gICAgICAgIG1heGxlbmd0aDo1NSwgXG4gICAgICAgIHVuaXF1ZTp0cnVlLFxuICAgICAgICB0cmltOnRydWVcbiAgICB9LFxuICAgIGVtYWlsOntcbiAgICAgICAgdHlwZTpTdHJpbmcsXG4gICAgICAgIHJlcXVpcmVkOnRydWUsXG4gICAgICAgIHZhbGlkYXRlOltpc0VtYWlsXSxcbiAgICAgICAgbG93ZXJjYXNlOnRydWUsICAgICAgICBcbiAgICAgICAgdW5pcXVlOnRydWUsXG4gICAgICAgIHRyaW06dHJ1ZSxcbiAgICB9LFxuICAgIHBhc3N3b3JkOntcbiAgICAgICAgdHlwZTpTdHJpbmcsXG4gICAgICAgIHJlcXVpcmVkOnRydWUsXG4gICAgICAgIG1heDoxMDI0LFxuICAgICAgICBtaW5sZW5ndGg6NlxuICAgIH0sXG4gICAgcGljdHVyZTp7XG4gICAgICAgIHR5cGU6U3RyaW5nLFxuICAgICAgICBkZWZhdWx0OlwiLi91cGxvYWRzL3Byb2ZpbGUvcmFuZG9tLXVzZXIucG5nXCJcbiAgICB9LFxuICAgIGJpbzp7XG4gICAgICAgIHR5cGU6U3RyaW5nLFxuICAgICAgICBtYXg6MTAyNFxuICAgIH0sXG4gICAgZm9sbG93ZXJzOiB7XG4gICAgICAgIHR5cGU6W1N0cmluZ10sXG4gICAgfSxcbiAgICBmb2xsb3dpbmc6e1xuICAgICAgICB0eXBlOltTdHJpbmddLFxuICAgIH0sXG4gICAgbGlrZXM6IHtcbiAgICAgICAgdHlwZTpbU3RyaW5nXSxcbiAgICB9XG59LCB7XG4gICAgdGltZXN0YW1wczp0cnVlXG59XG4pO1xuXG4vL3BsYXkgZnVuY3Rpb24gYmVmb3JlIHNhdmUgaW50byBkYiB0byBhbGxvdyBjcnlwdCBwYXNzd29yZFxuLy8gbGUgbmV4dCB2ZXV0IGRpcmUgcXVhbmQgdCdhIGZpbmkgcGFzc2Ugw6AgbGEgc3VpdGVcblVzZXJTY2hlbWEucHJlKCdzYXZlJywgYXN5bmMgZnVuY3Rpb24gKG5leHQpe1xuICAgIGNvbnN0IHNhbHQgPSBhd2FpdCBiY3J5cHQuZ2VuU2FsdCgpO1xuICAgIHRoaXMucGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaCh0aGlzLnBhc3N3b3JkLCBzYWx0KTtcbiAgICBuZXh0KCk7XG59KVxuXG4vL2MnZXN0IGNlIHF1aSB2YSBub3VzIHBlcm1ldHRyZSBkZSBjb21wYXJlciBsZSBwYXNzd29yZCBjcnlwdMOpIGRlIG5vdHJlIHVzZXIgZW4gYmFzZSBkZSBkb25uw6llcyBhdmVjIGNlbHVpIHV0aWxpc2UgcGR0IGxlIGxvZ2luIGQndW4gdXNlclxuVXNlclNjaGVtYS5zdGF0aWNzLmxvZ2luID0gYXN5bmMgZnVuY3Rpb24oZW1haWwsIHBhc3N3b3JkKXtcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgdGhpcy5maW5kT25lKHtlbWFpbDogZW1haWx9KTtcbiAgICBpZih1c2VyKXtcbiAgICAgICAgY29uc3QgYXV0aCA9IGF3YWl0IGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCB1c2VyLnBhc3N3b3JkKVxuICAgICAgICBpZihhdXRoKXtcbiAgICAgICAgICAgIHJldHVybiB1c2VyXG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdJbmNvcnJlY3QgcGFzc3dvcmQnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0aHJvdyBFcnJvcignSW5jb3JyZWN0IHBhc3N3b3JkJyk7XG59XG5sZXQgVXNlciA9IG1vbmdvb3NlLm1vZGVsKCdVc2VyJywgVXNlclNjaGVtYSk7XG5tb2R1bGUuZXhwb3J0cyA9IFVzZXI7Il19","map":{"version":3,"sources":["user.models.js"],"names":["mongoose","require","isEmail","bcrypt","Schema","UserSchema","pseudo","type","String","required","minlength","maxlength","unique","trim","email","validate","lowercase","password","max","picture","default","bio","followers","following","likes","timestamps","pre","next","salt","genSalt","hash","statics","login","user","findOne","auth","compare","Error","User","model","module","exports"],"mappings":";;AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AACA,MAAM;AAACC,EAAAA;AAAD,IAAYD,OAAO,CAAC,WAAD,CAAzB;;AACA,MAAME,MAAM,GAAGF,OAAO,CAAC,QAAD,CAAtB;;AAEA,MAAMG,MAAM,GAAGJ,QAAQ,CAACI,MAAxB;AACA,MAAMC,UAAU,GAAG,IAAID,MAAJ,CAAW;AAC1BE,EAAAA,MAAM,EAAE;AACJC,IAAAA,IAAI,EAAEC,MADF;AAEJC,IAAAA,QAAQ,EAAC,IAFL;AAGJC,IAAAA,SAAS,EAAE,CAHP;AAIJC,IAAAA,SAAS,EAAC,EAJN;AAKJC,IAAAA,MAAM,EAAC,IALH;AAMJC,IAAAA,IAAI,EAAC;AAND,GADkB;AAS1BC,EAAAA,KAAK,EAAC;AACFP,IAAAA,IAAI,EAACC,MADH;AAEFC,IAAAA,QAAQ,EAAC,IAFP;AAGFM,IAAAA,QAAQ,EAAC,CAACb,OAAD,CAHP;AAIFc,IAAAA,SAAS,EAAC,IAJR;AAKFJ,IAAAA,MAAM,EAAC,IALL;AAMFC,IAAAA,IAAI,EAAC;AANH,GAToB;AAiB1BI,EAAAA,QAAQ,EAAC;AACLV,IAAAA,IAAI,EAACC,MADA;AAELC,IAAAA,QAAQ,EAAC,IAFJ;AAGLS,IAAAA,GAAG,EAAC,IAHC;AAILR,IAAAA,SAAS,EAAC;AAJL,GAjBiB;AAuB1BS,EAAAA,OAAO,EAAC;AACJZ,IAAAA,IAAI,EAACC,MADD;AAEJY,IAAAA,OAAO,EAAC;AAFJ,GAvBkB;AA2B1BC,EAAAA,GAAG,EAAC;AACAd,IAAAA,IAAI,EAACC,MADL;AAEAU,IAAAA,GAAG,EAAC;AAFJ,GA3BsB;AA+B1BI,EAAAA,SAAS,EAAE;AACPf,IAAAA,IAAI,EAAC,CAACC,MAAD;AADE,GA/Be;AAkC1Be,EAAAA,SAAS,EAAC;AACNhB,IAAAA,IAAI,EAAC,CAACC,MAAD;AADC,GAlCgB;AAqC1BgB,EAAAA,KAAK,EAAE;AACHjB,IAAAA,IAAI,EAAC,CAACC,MAAD;AADF;AArCmB,CAAX,EAwChB;AACCiB,EAAAA,UAAU,EAAC;AADZ,CAxCgB,CAAnB,C,CA6CA;AACA;;AACApB,UAAU,CAACqB,GAAX,CAAe,MAAf,EAAuB,gBAAgBC,IAAhB,EAAqB;AACxC,QAAMC,IAAI,GAAG,MAAMzB,MAAM,CAAC0B,OAAP,EAAnB;AACA,OAAKZ,QAAL,GAAgB,MAAMd,MAAM,CAAC2B,IAAP,CAAY,KAAKb,QAAjB,EAA2BW,IAA3B,CAAtB;AACAD,EAAAA,IAAI;AACP,CAJD,E,CAMA;;AACAtB,UAAU,CAAC0B,OAAX,CAAmBC,KAAnB,GAA2B,gBAAelB,KAAf,EAAsBG,QAAtB,EAA+B;AACtD,QAAMgB,IAAI,GAAG,MAAM,KAAKC,OAAL,CAAa;AAACpB,IAAAA,KAAK,EAAEA;AAAR,GAAb,CAAnB;;AACA,MAAGmB,IAAH,EAAQ;AACJ,UAAME,IAAI,GAAG,MAAMhC,MAAM,CAACiC,OAAP,CAAenB,QAAf,EAAyBgB,IAAI,CAAChB,QAA9B,CAAnB;;AACA,QAAGkB,IAAH,EAAQ;AACJ,aAAOF,IAAP;AACH,KAFD,MAGI;AACA,YAAMI,KAAK,CAAC,oBAAD,CAAX;AACH;AACJ;;AACD,QAAMA,KAAK,CAAC,oBAAD,CAAX;AACH,CAZD;;AAaA,IAAIC,IAAI,GAAGtC,QAAQ,CAACuC,KAAT,CAAe,MAAf,EAAuBlC,UAAvB,CAAX;AACAmC,MAAM,CAACC,OAAP,GAAiBH,IAAjB","sourceRoot":"/Applications/dossier/mern_project_app2/src/models/","sourcesContent":["const mongoose = require('mongoose');\nconst {isEmail} = require('validator');\nconst bcrypt = require('bcrypt');\n\nconst Schema = mongoose.Schema;\nconst UserSchema = new Schema({\n    pseudo: {\n        type: String,\n        required:true,\n        minlength: 3, \n        maxlength:55, \n        unique:true,\n        trim:true\n    },\n    email:{\n        type:String,\n        required:true,\n        validate:[isEmail],\n        lowercase:true,        \n        unique:true,\n        trim:true,\n    },\n    password:{\n        type:String,\n        required:true,\n        max:1024,\n        minlength:6\n    },\n    picture:{\n        type:String,\n        default:\"./uploads/profile/random-user.png\"\n    },\n    bio:{\n        type:String,\n        max:1024\n    },\n    followers: {\n        type:[String],\n    },\n    following:{\n        type:[String],\n    },\n    likes: {\n        type:[String],\n    }\n}, {\n    timestamps:true\n}\n);\n\n//play function before save into db to allow crypt password\n// le next veut dire quand t'a fini passe à la suite\nUserSchema.pre('save', async function (next){\n    const salt = await bcrypt.genSalt();\n    this.password = await bcrypt.hash(this.password, salt);\n    next();\n})\n\n//c'est ce qui va nous permettre de comparer le password crypté de notre user en base de données avec celui utilise pdt le login d'un user\nUserSchema.statics.login = async function(email, password){\n    const user = await this.findOne({email: email});\n    if(user){\n        const auth = await bcrypt.compare(password, user.password)\n        if(auth){\n            return user\n        }\n        else{\n            throw Error('Incorrect password');\n        }\n    }\n    throw Error('Incorrect password');\n}\nlet User = mongoose.model('User', UserSchema);\nmodule.exports = User;"]}},"mtime":1651271257003},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/mern_project_app2/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/mern_project_app2\",\"filename\":\"/Applications/dossier/mern_project_app2/db.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/mern_project_app2\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nconst mongoose = require('mongoose');\n\nmongoose.connect(`mongodb+srv://${process.env.DB_USERNAME}:${process.env.DB_PASSWORD}@cluster0.gbvxg.mongodb.net/mern_project`).then(() => console.log('Connected to MongoDB')).catch(error => console.log(\"Failed to connect MongoDB\", error));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRiLmpzIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwicmVxdWlyZSIsImNvbm5lY3QiLCJwcm9jZXNzIiwiZW52IiwiREJfVVNFUk5BTUUiLCJEQl9QQVNTV09SRCIsInRoZW4iLCJjb25zb2xlIiwibG9nIiwiY2F0Y2giLCJlcnJvciJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxVQUFELENBQXhCOztBQUVBRCxRQUFRLENBQ0hFLE9BREwsQ0FDYyxpQkFBZ0JDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxXQUFZLElBQUdGLE9BQU8sQ0FBQ0MsR0FBUixDQUFZRSxXQUFZLDBDQURqRixFQUVLQyxJQUZMLENBRVUsTUFBTUMsT0FBTyxDQUFDQyxHQUFSLENBQVksc0JBQVosQ0FGaEIsRUFHS0MsS0FITCxDQUdZQyxLQUFELElBQVdILE9BQU8sQ0FBQ0MsR0FBUixDQUFZLDJCQUFaLEVBQXlDRSxLQUF6QyxDQUh0QiIsInNvdXJjZVJvb3QiOiIvQXBwbGljYXRpb25zL2Rvc3NpZXIvbWVybl9wcm9qZWN0X2FwcDIvIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpXG5cbm1vbmdvb3NlXG4gICAgLmNvbm5lY3QoYG1vbmdvZGIrc3J2Oi8vJHtwcm9jZXNzLmVudi5EQl9VU0VSTkFNRX06JHtwcm9jZXNzLmVudi5EQl9QQVNTV09SRH1AY2x1c3RlcjAuZ2J2eGcubW9uZ29kYi5uZXQvbWVybl9wcm9qZWN0YClcbiAgICAudGhlbigoKSA9PiBjb25zb2xlLmxvZygnQ29ubmVjdGVkIHRvIE1vbmdvREInKSlcbiAgICAuY2F0Y2goKGVycm9yKSA9PiBjb25zb2xlLmxvZyhcIkZhaWxlZCB0byBjb25uZWN0IE1vbmdvREJcIiwgZXJyb3IpKSJdfQ==","map":{"version":3,"sources":["db.js"],"names":["mongoose","require","connect","process","env","DB_USERNAME","DB_PASSWORD","then","console","log","catch","error"],"mappings":";;AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AAEAD,QAAQ,CACHE,OADL,CACc,iBAAgBC,OAAO,CAACC,GAAR,CAAYC,WAAY,IAAGF,OAAO,CAACC,GAAR,CAAYE,WAAY,0CADjF,EAEKC,IAFL,CAEU,MAAMC,OAAO,CAACC,GAAR,CAAY,sBAAZ,CAFhB,EAGKC,KAHL,CAGYC,KAAD,IAAWH,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAAyCE,KAAzC,CAHtB","sourceRoot":"/Applications/dossier/mern_project_app2/","sourcesContent":["const mongoose = require('mongoose')\n\nmongoose\n    .connect(`mongodb+srv://${process.env.DB_USERNAME}:${process.env.DB_PASSWORD}@cluster0.gbvxg.mongodb.net/mern_project`)\n    .then(() => console.log('Connected to MongoDB'))\n    .catch((error) => console.log(\"Failed to connect MongoDB\", error))"]}},"mtime":1651231241527},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/mern_project_app2/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/mern_project_app2\",\"filename\":\"/Applications/dossier/mern_project_app2/database.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/mern_project_app2\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nconst mongoose = require('mongoose');\n\nmongoose.connect(`mongodb+srv://${process.env.DB_USERNAME}:${process.env.DB_PASSWORD}@cluster0.gbvxg.mongodb.net/mern_project`).then(() => console.log('Connected to MongoDB')).catch(error => console.log(\"Failed to connect MongoDB\", error));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRhdGFiYXNlLmpzIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwicmVxdWlyZSIsImNvbm5lY3QiLCJwcm9jZXNzIiwiZW52IiwiREJfVVNFUk5BTUUiLCJEQl9QQVNTV09SRCIsInRoZW4iLCJjb25zb2xlIiwibG9nIiwiY2F0Y2giLCJlcnJvciJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxVQUFELENBQXhCOztBQUVBRCxRQUFRLENBQ0hFLE9BREwsQ0FDYyxpQkFBZ0JDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxXQUFZLElBQUdGLE9BQU8sQ0FBQ0MsR0FBUixDQUFZRSxXQUFZLDBDQURqRixFQUVLQyxJQUZMLENBRVUsTUFBTUMsT0FBTyxDQUFDQyxHQUFSLENBQVksc0JBQVosQ0FGaEIsRUFHS0MsS0FITCxDQUdZQyxLQUFELElBQVdILE9BQU8sQ0FBQ0MsR0FBUixDQUFZLDJCQUFaLEVBQXlDRSxLQUF6QyxDQUh0QiIsInNvdXJjZVJvb3QiOiIvQXBwbGljYXRpb25zL2Rvc3NpZXIvbWVybl9wcm9qZWN0X2FwcDIvIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpXG5cbm1vbmdvb3NlXG4gICAgLmNvbm5lY3QoYG1vbmdvZGIrc3J2Oi8vJHtwcm9jZXNzLmVudi5EQl9VU0VSTkFNRX06JHtwcm9jZXNzLmVudi5EQl9QQVNTV09SRH1AY2x1c3RlcjAuZ2J2eGcubW9uZ29kYi5uZXQvbWVybl9wcm9qZWN0YClcbiAgICAudGhlbigoKSA9PiBjb25zb2xlLmxvZygnQ29ubmVjdGVkIHRvIE1vbmdvREInKSlcbiAgICAuY2F0Y2goKGVycm9yKSA9PiBjb25zb2xlLmxvZyhcIkZhaWxlZCB0byBjb25uZWN0IE1vbmdvREJcIiwgZXJyb3IpKSJdfQ==","map":{"version":3,"sources":["database.js"],"names":["mongoose","require","connect","process","env","DB_USERNAME","DB_PASSWORD","then","console","log","catch","error"],"mappings":";;AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AAEAD,QAAQ,CACHE,OADL,CACc,iBAAgBC,OAAO,CAACC,GAAR,CAAYC,WAAY,IAAGF,OAAO,CAACC,GAAR,CAAYE,WAAY,0CADjF,EAEKC,IAFL,CAEU,MAAMC,OAAO,CAACC,GAAR,CAAY,sBAAZ,CAFhB,EAGKC,KAHL,CAGYC,KAAD,IAAWH,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAAyCE,KAAzC,CAHtB","sourceRoot":"/Applications/dossier/mern_project_app2/","sourcesContent":["const mongoose = require('mongoose')\n\nmongoose\n    .connect(`mongodb+srv://${process.env.DB_USERNAME}:${process.env.DB_PASSWORD}@cluster0.gbvxg.mongodb.net/mern_project`)\n    .then(() => console.log('Connected to MongoDB'))\n    .catch((error) => console.log(\"Failed to connect MongoDB\", error))"]}},"mtime":1651231241527},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/mern_project_app2/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/mern_project_app2\",\"filename\":\"/Applications/dossier/mern_project_app2/database.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/mern_project_app2\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nconst mongoose = require('mongoose');\n\nmongoose.connect(`mongodb+srv://${process.env.DB_USERNAME}:${process.env.DB_PASSWORD}@cluster0.gbvxg.mongodb.net/mern_project`).then(() => console.log('Connected to MongoDB')).catch(error => console.log(\"Failed to connect MongoDB\", error));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRhdGFiYXNlLmpzIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwicmVxdWlyZSIsImNvbm5lY3QiLCJwcm9jZXNzIiwiZW52IiwiREJfVVNFUk5BTUUiLCJEQl9QQVNTV09SRCIsInRoZW4iLCJjb25zb2xlIiwibG9nIiwiY2F0Y2giLCJlcnJvciJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxVQUFELENBQXhCOztBQUVBRCxRQUFRLENBQ0hFLE9BREwsQ0FDYyxpQkFBZ0JDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxXQUFZLElBQUdGLE9BQU8sQ0FBQ0MsR0FBUixDQUFZRSxXQUFZLDBDQURqRixFQUVLQyxJQUZMLENBRVUsTUFBTUMsT0FBTyxDQUFDQyxHQUFSLENBQVksc0JBQVosQ0FGaEIsRUFHS0MsS0FITCxDQUdZQyxLQUFELElBQVdILE9BQU8sQ0FBQ0MsR0FBUixDQUFZLDJCQUFaLEVBQXlDRSxLQUF6QyxDQUh0QiIsInNvdXJjZVJvb3QiOiIvQXBwbGljYXRpb25zL2Rvc3NpZXIvbWVybl9wcm9qZWN0X2FwcDIvIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpXG5cbm1vbmdvb3NlXG4gICAgLmNvbm5lY3QoYG1vbmdvZGIrc3J2Oi8vJHtwcm9jZXNzLmVudi5EQl9VU0VSTkFNRX06JHtwcm9jZXNzLmVudi5EQl9QQVNTV09SRH1AY2x1c3RlcjAuZ2J2eGcubW9uZ29kYi5uZXQvbWVybl9wcm9qZWN0YClcbiAgICAudGhlbigoKSA9PiBjb25zb2xlLmxvZygnQ29ubmVjdGVkIHRvIE1vbmdvREInKSlcbiAgICAuY2F0Y2goKGVycm9yKSA9PiBjb25zb2xlLmxvZyhcIkZhaWxlZCB0byBjb25uZWN0IE1vbmdvREJcIiwgZXJyb3IpKSJdfQ==","map":{"version":3,"sources":["database.js"],"names":["mongoose","require","connect","process","env","DB_USERNAME","DB_PASSWORD","then","console","log","catch","error"],"mappings":";;AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AAEAD,QAAQ,CACHE,OADL,CACc,iBAAgBC,OAAO,CAACC,GAAR,CAAYC,WAAY,IAAGF,OAAO,CAACC,GAAR,CAAYE,WAAY,0CADjF,EAEKC,IAFL,CAEU,MAAMC,OAAO,CAACC,GAAR,CAAY,sBAAZ,CAFhB,EAGKC,KAHL,CAGYC,KAAD,IAAWH,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAAyCE,KAAzC,CAHtB","sourceRoot":"/Applications/dossier/mern_project_app2/","sourcesContent":["const mongoose = require('mongoose')\n\nmongoose\n    .connect(`mongodb+srv://${process.env.DB_USERNAME}:${process.env.DB_PASSWORD}@cluster0.gbvxg.mongodb.net/mern_project`)\n    .then(() => console.log('Connected to MongoDB'))\n    .catch((error) => console.log(\"Failed to connect MongoDB\", error))"]}},"mtime":1651231241527},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/mern_project_app2/src/routes/api/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/mern_project_app2\",\"filename\":\"/Applications/dossier/mern_project_app2/src/routes/api/user.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/mern_project_app2\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nconst router = require(\"express\").Router();\n\nconst authController = require('../../controllers/auth.controller');\n\nrouter.post('/register', authController.signUp);\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIucm91dGVzLmpzIl0sIm5hbWVzIjpbInJvdXRlciIsInJlcXVpcmUiLCJSb3V0ZXIiLCJhdXRoQ29udHJvbGxlciIsInBvc3QiLCJzaWduVXAiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU1BLE1BQU0sR0FBR0MsT0FBTyxDQUFDLFNBQUQsQ0FBUCxDQUFtQkMsTUFBbkIsRUFBZjs7QUFDQSxNQUFNQyxjQUFjLEdBQUdGLE9BQU8sQ0FBQyxtQ0FBRCxDQUE5Qjs7QUFFQUQsTUFBTSxDQUFDSSxJQUFQLENBQVksV0FBWixFQUF5QkQsY0FBYyxDQUFDRSxNQUF4QztBQUVBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUJQLE1BQWpCIiwic291cmNlUm9vdCI6Ii9BcHBsaWNhdGlvbnMvZG9zc2llci9tZXJuX3Byb2plY3RfYXBwMi9zcmMvcm91dGVzL2FwaS8iLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCByb3V0ZXIgPSByZXF1aXJlKFwiZXhwcmVzc1wiKS5Sb3V0ZXIoKTtcbmNvbnN0IGF1dGhDb250cm9sbGVyID0gcmVxdWlyZSgnLi4vLi4vY29udHJvbGxlcnMvYXV0aC5jb250cm9sbGVyJylcblxucm91dGVyLnBvc3QoJy9yZWdpc3RlcicsIGF1dGhDb250cm9sbGVyLnNpZ25VcCk7XG5cbm1vZHVsZS5leHBvcnRzID0gcm91dGVyOyJdfQ==","map":{"version":3,"sources":["user.routes.js"],"names":["router","require","Router","authController","post","signUp","module","exports"],"mappings":";;AAAA,MAAMA,MAAM,GAAGC,OAAO,CAAC,SAAD,CAAP,CAAmBC,MAAnB,EAAf;;AACA,MAAMC,cAAc,GAAGF,OAAO,CAAC,mCAAD,CAA9B;;AAEAD,MAAM,CAACI,IAAP,CAAY,WAAZ,EAAyBD,cAAc,CAACE,MAAxC;AAEAC,MAAM,CAACC,OAAP,GAAiBP,MAAjB","sourceRoot":"/Applications/dossier/mern_project_app2/src/routes/api/","sourcesContent":["const router = require(\"express\").Router();\nconst authController = require('../../controllers/auth.controller')\n\nrouter.post('/register', authController.signUp);\n\nmodule.exports = router;"]}},"mtime":1651234921473},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/mern_project_app2/src/routes/api/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/mern_project_app2\",\"filename\":\"/Applications/dossier/mern_project_app2/src/routes/api/user.routes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/mern_project_app2\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nconst router = require(\"express\").Router();\n\nconst authController = require('../../controllers/auth.controller');\n\nrouter.post('/register', authController.signUp);\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIucm91dGVzLmpzIl0sIm5hbWVzIjpbInJvdXRlciIsInJlcXVpcmUiLCJSb3V0ZXIiLCJhdXRoQ29udHJvbGxlciIsInBvc3QiLCJzaWduVXAiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU1BLE1BQU0sR0FBR0MsT0FBTyxDQUFDLFNBQUQsQ0FBUCxDQUFtQkMsTUFBbkIsRUFBZjs7QUFDQSxNQUFNQyxjQUFjLEdBQUdGLE9BQU8sQ0FBQyxtQ0FBRCxDQUE5Qjs7QUFFQUQsTUFBTSxDQUFDSSxJQUFQLENBQVksV0FBWixFQUF5QkQsY0FBYyxDQUFDRSxNQUF4QztBQUVBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUJQLE1BQWpCIiwic291cmNlUm9vdCI6Ii9BcHBsaWNhdGlvbnMvZG9zc2llci9tZXJuX3Byb2plY3RfYXBwMi9zcmMvcm91dGVzL2FwaS8iLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCByb3V0ZXIgPSByZXF1aXJlKFwiZXhwcmVzc1wiKS5Sb3V0ZXIoKTtcbmNvbnN0IGF1dGhDb250cm9sbGVyID0gcmVxdWlyZSgnLi4vLi4vY29udHJvbGxlcnMvYXV0aC5jb250cm9sbGVyJylcblxucm91dGVyLnBvc3QoJy9yZWdpc3RlcicsIGF1dGhDb250cm9sbGVyLnNpZ25VcCk7XG5cbm1vZHVsZS5leHBvcnRzID0gcm91dGVyOyJdfQ==","map":{"version":3,"sources":["user.routes.js"],"names":["router","require","Router","authController","post","signUp","module","exports"],"mappings":";;AAAA,MAAMA,MAAM,GAAGC,OAAO,CAAC,SAAD,CAAP,CAAmBC,MAAnB,EAAf;;AACA,MAAMC,cAAc,GAAGF,OAAO,CAAC,mCAAD,CAA9B;;AAEAD,MAAM,CAACI,IAAP,CAAY,WAAZ,EAAyBD,cAAc,CAACE,MAAxC;AAEAC,MAAM,CAACC,OAAP,GAAiBP,MAAjB","sourceRoot":"/Applications/dossier/mern_project_app2/src/routes/api/","sourcesContent":["const router = require(\"express\").Router();\nconst authController = require('../../controllers/auth.controller')\n\nrouter.post('/register', authController.signUp);\n\nmodule.exports = router;"]}},"mtime":1651234921473},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/mern_project_app2/src/routes/api/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/mern_project_app2\",\"filename\":\"/Applications/dossier/mern_project_app2/src/routes/api/user.route.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/mern_project_app2\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar AuthController = _interopRequireWildcard(require(\"../../controllers/auth.controller\"));\n\nvar UserController = _interopRequireWildcard(require(\"../../controllers/user.controller\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst api = (0, _express.Router)(); //auth\n\napi.post('/register', AuthController.signUp);\napi.post('/login', AuthController.signIn);\napi.get('/logout', AuthController.logout); //user\n\napi.get('/', UserController.getAllUsers);\napi.get('/:id', UserController.getUserInfo);\napi.put('/:id', UserController.updateUser);\napi.delete('/:id', UserController.deleteUser);\napi.patch('/follow/:id', UserController.follow);\napi.patch('/unfollow/:id', UserController.unfollow);\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIucm91dGUuanMiXSwibmFtZXMiOlsiYXBpIiwicG9zdCIsIkF1dGhDb250cm9sbGVyIiwic2lnblVwIiwic2lnbkluIiwiZ2V0IiwibG9nb3V0IiwiVXNlckNvbnRyb2xsZXIiLCJnZXRBbGxVc2VycyIsImdldFVzZXJJbmZvIiwicHV0IiwidXBkYXRlVXNlciIsImRlbGV0ZSIsImRlbGV0ZVVzZXIiLCJwYXRjaCIsImZvbGxvdyIsInVuZm9sbG93Il0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7Ozs7OztBQUVBLE1BQU1BLEdBQUcsR0FBRyxzQkFBWixDLENBRUE7O0FBQ0FBLEdBQUcsQ0FBQ0MsSUFBSixDQUFTLFdBQVQsRUFBc0JDLGNBQWMsQ0FBQ0MsTUFBckM7QUFDQUgsR0FBRyxDQUFDQyxJQUFKLENBQVMsUUFBVCxFQUFtQkMsY0FBYyxDQUFDRSxNQUFsQztBQUNBSixHQUFHLENBQUNLLEdBQUosQ0FBUSxTQUFSLEVBQW1CSCxjQUFjLENBQUNJLE1BQWxDLEUsQ0FFQTs7QUFDQU4sR0FBRyxDQUFDSyxHQUFKLENBQVEsR0FBUixFQUFhRSxjQUFjLENBQUNDLFdBQTVCO0FBQ0FSLEdBQUcsQ0FBQ0ssR0FBSixDQUFRLE1BQVIsRUFBZ0JFLGNBQWMsQ0FBQ0UsV0FBL0I7QUFDQVQsR0FBRyxDQUFDVSxHQUFKLENBQVEsTUFBUixFQUFnQkgsY0FBYyxDQUFDSSxVQUEvQjtBQUNBWCxHQUFHLENBQUNZLE1BQUosQ0FBVyxNQUFYLEVBQW1CTCxjQUFjLENBQUNNLFVBQWxDO0FBQ0FiLEdBQUcsQ0FBQ2MsS0FBSixDQUFVLGFBQVYsRUFBeUJQLGNBQWMsQ0FBQ1EsTUFBeEM7QUFDQWYsR0FBRyxDQUFDYyxLQUFKLENBQVUsZUFBVixFQUEyQlAsY0FBYyxDQUFDUyxRQUExQztlQUVlaEIsRyIsInNvdXJjZVJvb3QiOiIvQXBwbGljYXRpb25zL2Rvc3NpZXIvbWVybl9wcm9qZWN0X2FwcDIvc3JjL3JvdXRlcy9hcGkvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUm91dGVyIH0gZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgKiBhcyBBdXRoQ29udHJvbGxlciBmcm9tICcuLi8uLi9jb250cm9sbGVycy9hdXRoLmNvbnRyb2xsZXInO1xuaW1wb3J0ICogYXMgVXNlckNvbnRyb2xsZXIgZnJvbSAnLi4vLi4vY29udHJvbGxlcnMvdXNlci5jb250cm9sbGVyJztcblxuY29uc3QgYXBpID0gUm91dGVyKCk7XG5cbi8vYXV0aFxuYXBpLnBvc3QoJy9yZWdpc3RlcicsIEF1dGhDb250cm9sbGVyLnNpZ25VcCk7XG5hcGkucG9zdCgnL2xvZ2luJywgQXV0aENvbnRyb2xsZXIuc2lnbkluKTtcbmFwaS5nZXQoJy9sb2dvdXQnLCBBdXRoQ29udHJvbGxlci5sb2dvdXQpO1xuXG4vL3VzZXJcbmFwaS5nZXQoJy8nLCBVc2VyQ29udHJvbGxlci5nZXRBbGxVc2Vycyk7XG5hcGkuZ2V0KCcvOmlkJywgVXNlckNvbnRyb2xsZXIuZ2V0VXNlckluZm8pO1xuYXBpLnB1dCgnLzppZCcsIFVzZXJDb250cm9sbGVyLnVwZGF0ZVVzZXIpO1xuYXBpLmRlbGV0ZSgnLzppZCcsIFVzZXJDb250cm9sbGVyLmRlbGV0ZVVzZXIpO1xuYXBpLnBhdGNoKCcvZm9sbG93LzppZCcsIFVzZXJDb250cm9sbGVyLmZvbGxvdyk7XG5hcGkucGF0Y2goJy91bmZvbGxvdy86aWQnLCBVc2VyQ29udHJvbGxlci51bmZvbGxvdyk7XG5cbmV4cG9ydCBkZWZhdWx0IGFwaTsiXX0=","map":{"version":3,"sources":["user.route.js"],"names":["api","post","AuthController","signUp","signIn","get","logout","UserController","getAllUsers","getUserInfo","put","updateUser","delete","deleteUser","patch","follow","unfollow"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;;;AAEA,MAAMA,GAAG,GAAG,sBAAZ,C,CAEA;;AACAA,GAAG,CAACC,IAAJ,CAAS,WAAT,EAAsBC,cAAc,CAACC,MAArC;AACAH,GAAG,CAACC,IAAJ,CAAS,QAAT,EAAmBC,cAAc,CAACE,MAAlC;AACAJ,GAAG,CAACK,GAAJ,CAAQ,SAAR,EAAmBH,cAAc,CAACI,MAAlC,E,CAEA;;AACAN,GAAG,CAACK,GAAJ,CAAQ,GAAR,EAAaE,cAAc,CAACC,WAA5B;AACAR,GAAG,CAACK,GAAJ,CAAQ,MAAR,EAAgBE,cAAc,CAACE,WAA/B;AACAT,GAAG,CAACU,GAAJ,CAAQ,MAAR,EAAgBH,cAAc,CAACI,UAA/B;AACAX,GAAG,CAACY,MAAJ,CAAW,MAAX,EAAmBL,cAAc,CAACM,UAAlC;AACAb,GAAG,CAACc,KAAJ,CAAU,aAAV,EAAyBP,cAAc,CAACQ,MAAxC;AACAf,GAAG,CAACc,KAAJ,CAAU,eAAV,EAA2BP,cAAc,CAACS,QAA1C;eAEehB,G","sourceRoot":"/Applications/dossier/mern_project_app2/src/routes/api/","sourcesContent":["import { Router } from 'express';\nimport * as AuthController from '../../controllers/auth.controller';\nimport * as UserController from '../../controllers/user.controller';\n\nconst api = Router();\n\n//auth\napi.post('/register', AuthController.signUp);\napi.post('/login', AuthController.signIn);\napi.get('/logout', AuthController.logout);\n\n//user\napi.get('/', UserController.getAllUsers);\napi.get('/:id', UserController.getUserInfo);\napi.put('/:id', UserController.updateUser);\napi.delete('/:id', UserController.deleteUser);\napi.patch('/follow/:id', UserController.follow);\napi.patch('/unfollow/:id', UserController.unfollow);\n\nexport default api;"]}},"mtime":1651244597145},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/mern_project_app2/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/mern_project_app2\",\"filename\":\"/Applications/dossier/mern_project_app2/src/routes/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/mern_project_app2\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _user = _interopRequireDefault(require(\"./api/user.route\"));\n\nvar _jwt = require(\"../middlewares/jwt.middleware\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst router = (0, _express.Router)();\nrouter.use('/api/user', _user.default);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbInJvdXRlciIsInVzZSIsIlVzZXJSb3V0ZXIiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7OztBQUVBLE1BQU1BLE1BQU0sR0FBRyxzQkFBZjtBQUVBQSxNQUFNLENBQUNDLEdBQVAsQ0FBVyxXQUFYLEVBQXlCQyxhQUF6QjtlQUVlRixNIiwic291cmNlUm9vdCI6Ii9BcHBsaWNhdGlvbnMvZG9zc2llci9tZXJuX3Byb2plY3RfYXBwMi9zcmMvcm91dGVzLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJvdXRlciB9IGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IFVzZXJSb3V0ZXIgZnJvbSAnLi9hcGkvdXNlci5yb3V0ZSc7XG5pbXBvcnQgeyBqd3RNaWRkbGV3YXJlIH0gZnJvbSAnLi4vbWlkZGxld2FyZXMvand0Lm1pZGRsZXdhcmUnO1xuXG5jb25zdCByb3V0ZXIgPSBSb3V0ZXIoKTtcblxucm91dGVyLnVzZSgnL2FwaS91c2VyJywgIFVzZXJSb3V0ZXIpO1xuXG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XG4iXX0=","map":{"version":3,"sources":["index.js"],"names":["router","use","UserRouter"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AAEA,MAAMA,MAAM,GAAG,sBAAf;AAEAA,MAAM,CAACC,GAAP,CAAW,WAAX,EAAyBC,aAAzB;eAEeF,M","sourceRoot":"/Applications/dossier/mern_project_app2/src/routes/","sourcesContent":["import { Router } from 'express';\nimport UserRouter from './api/user.route';\nimport { jwtMiddleware } from '../middlewares/jwt.middleware';\n\nconst router = Router();\n\nrouter.use('/api/user',  UserRouter);\n\nexport default router;\n"]}},"mtime":1651254365838},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/mern_project_app2/src/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/mern_project_app2\",\"filename\":\"/Applications/dossier/mern_project_app2/src/routes/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/mern_project_app2\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _user = _interopRequireDefault(require(\"./api/user.route\"));\n\nvar _post = _interopRequireDefault(require(\"./api/post.route\"));\n\nvar _jwt = require(\"../middlewares/jwt.middleware\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst router = (0, _express.Router)();\nrouter.use('/api/user', _user.default);\nrouter.use('/api/post', _post.default);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbInJvdXRlciIsInVzZSIsIlVzZXJSb3V0ZXIiLCJQb3N0Um91dGVyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxNQUFNLEdBQUcsc0JBQWY7QUFFQUEsTUFBTSxDQUFDQyxHQUFQLENBQVcsV0FBWCxFQUF5QkMsYUFBekI7QUFDQUYsTUFBTSxDQUFDQyxHQUFQLENBQVcsV0FBWCxFQUF5QkUsYUFBekI7ZUFFZUgsTSIsInNvdXJjZVJvb3QiOiIvQXBwbGljYXRpb25zL2Rvc3NpZXIvbWVybl9wcm9qZWN0X2FwcDIvc3JjL3JvdXRlcy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tICdleHByZXNzJztcbmltcG9ydCBVc2VyUm91dGVyIGZyb20gJy4vYXBpL3VzZXIucm91dGUnO1xuaW1wb3J0IFBvc3RSb3V0ZXIgZnJvbSAnLi9hcGkvcG9zdC5yb3V0ZSc7XG5pbXBvcnQgeyBqd3RNaWRkbGV3YXJlIH0gZnJvbSAnLi4vbWlkZGxld2FyZXMvand0Lm1pZGRsZXdhcmUnO1xuXG5jb25zdCByb3V0ZXIgPSBSb3V0ZXIoKTtcblxucm91dGVyLnVzZSgnL2FwaS91c2VyJywgIFVzZXJSb3V0ZXIpO1xucm91dGVyLnVzZSgnL2FwaS9wb3N0JywgIFBvc3RSb3V0ZXIpO1xuXG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XG4iXX0=","map":{"version":3,"sources":["index.js"],"names":["router","use","UserRouter","PostRouter"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;AAEA,MAAMA,MAAM,GAAG,sBAAf;AAEAA,MAAM,CAACC,GAAP,CAAW,WAAX,EAAyBC,aAAzB;AACAF,MAAM,CAACC,GAAP,CAAW,WAAX,EAAyBE,aAAzB;eAEeH,M","sourceRoot":"/Applications/dossier/mern_project_app2/src/routes/","sourcesContent":["import { Router } from 'express';\nimport UserRouter from './api/user.route';\nimport PostRouter from './api/post.route';\nimport { jwtMiddleware } from '../middlewares/jwt.middleware';\n\nconst router = Router();\n\nrouter.use('/api/user',  UserRouter);\nrouter.use('/api/post',  PostRouter);\n\nexport default router;\n"]}},"mtime":1651271937411},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/mern_project_app2/src/routes/api/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/mern_project_app2\",\"filename\":\"/Applications/dossier/mern_project_app2/src/routes/api/user.route.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/mern_project_app2\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar AuthController = _interopRequireWildcard(require(\"../../controllers/auth.controller\"));\n\nvar UserController = _interopRequireWildcard(require(\"../../controllers/user.controller\"));\n\nvar UploadController = _interopRequireWildcard(require(\"../../controllers/upload.controller\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst multer = require('multer');\n\nconst fileStorageEngine = multer.diskStorage({\n  destination: (req, file, cb) => {\n    cb(null, `${__dirname}/../../../client/public/uploads/profil`);\n  },\n  filename: function (req, file, cb) {\n    const uniqueSuffix = Date.now() + '-' + Math.round(Math.random() * 1E9);\n    let originalNameFile = file.originalname;\n    let extension = originalNameFile.substring(originalNameFile.lastIndexOf('.') + 1);\n    cb(null, file.fieldname + '-' + uniqueSuffix + \".\" + extension);\n  }\n});\nconst upload = multer({\n  storage: fileStorageEngine\n});\nconst api = (0, _express.Router)(); //auth\n\napi.post('/register', AuthController.signUp);\napi.post('/login', AuthController.signIn);\napi.get('/logout', AuthController.logout); //user\n\napi.get('/', UserController.getAllUsers);\napi.get('/:id', UserController.getUserInfo);\napi.put('/:id', UserController.updateUser);\napi.delete('/:id', UserController.deleteUser);\napi.patch('/follow/:id', UserController.follow);\napi.patch('/unfollow/:id', UserController.unfollow); //upload\n//avant de passer à notre controlleur il va check notre file\n\napi.post('/upload', upload.single(\"file\"), UploadController.uploadProfil);\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIucm91dGUuanMiXSwibmFtZXMiOlsibXVsdGVyIiwicmVxdWlyZSIsImZpbGVTdG9yYWdlRW5naW5lIiwiZGlza1N0b3JhZ2UiLCJkZXN0aW5hdGlvbiIsInJlcSIsImZpbGUiLCJjYiIsIl9fZGlybmFtZSIsImZpbGVuYW1lIiwidW5pcXVlU3VmZml4IiwiRGF0ZSIsIm5vdyIsIk1hdGgiLCJyb3VuZCIsInJhbmRvbSIsIm9yaWdpbmFsTmFtZUZpbGUiLCJvcmlnaW5hbG5hbWUiLCJleHRlbnNpb24iLCJzdWJzdHJpbmciLCJsYXN0SW5kZXhPZiIsImZpZWxkbmFtZSIsInVwbG9hZCIsInN0b3JhZ2UiLCJhcGkiLCJwb3N0IiwiQXV0aENvbnRyb2xsZXIiLCJzaWduVXAiLCJzaWduSW4iLCJnZXQiLCJsb2dvdXQiLCJVc2VyQ29udHJvbGxlciIsImdldEFsbFVzZXJzIiwiZ2V0VXNlckluZm8iLCJwdXQiLCJ1cGRhdGVVc2VyIiwiZGVsZXRlIiwiZGVsZXRlVXNlciIsInBhdGNoIiwiZm9sbG93IiwidW5mb2xsb3ciLCJzaW5nbGUiLCJVcGxvYWRDb250cm9sbGVyIiwidXBsb2FkUHJvZmlsIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7OztBQUNBLE1BQU1BLE1BQU0sR0FBSUMsT0FBTyxDQUFDLFFBQUQsQ0FBdkI7O0FBRUEsTUFBTUMsaUJBQWlCLEdBQUdGLE1BQU0sQ0FBQ0csV0FBUCxDQUFtQjtBQUN6Q0MsRUFBQUEsV0FBVyxFQUFDLENBQUNDLEdBQUQsRUFBTUMsSUFBTixFQUFZQyxFQUFaLEtBQW1CO0FBQzNCQSxJQUFBQSxFQUFFLENBQUMsSUFBRCxFQUFRLEdBQUVDLFNBQVUsd0NBQXBCLENBQUY7QUFDSCxHQUh3QztBQUl6Q0MsRUFBQUEsUUFBUSxFQUFFLFVBQVVKLEdBQVYsRUFBZUMsSUFBZixFQUFxQkMsRUFBckIsRUFBeUI7QUFDL0IsVUFBTUcsWUFBWSxHQUFHQyxJQUFJLENBQUNDLEdBQUwsS0FBYSxHQUFiLEdBQW1CQyxJQUFJLENBQUNDLEtBQUwsQ0FBV0QsSUFBSSxDQUFDRSxNQUFMLEtBQWdCLEdBQTNCLENBQXhDO0FBQ0EsUUFBSUMsZ0JBQWdCLEdBQUdWLElBQUksQ0FBQ1csWUFBNUI7QUFDQSxRQUFJQyxTQUFTLEdBQUdGLGdCQUFnQixDQUFDRyxTQUFqQixDQUEyQkgsZ0JBQWdCLENBQUNJLFdBQWpCLENBQTZCLEdBQTdCLElBQW9DLENBQS9ELENBQWhCO0FBQ0FiLElBQUFBLEVBQUUsQ0FBQyxJQUFELEVBQU9ELElBQUksQ0FBQ2UsU0FBTCxHQUFpQixHQUFqQixHQUF1QlgsWUFBdkIsR0FBc0MsR0FBdEMsR0FBMkNRLFNBQWxELENBQUY7QUFDRDtBQVRzQyxDQUFuQixDQUExQjtBQVlBLE1BQU1JLE1BQU0sR0FBR3RCLE1BQU0sQ0FBQztBQUFDdUIsRUFBQUEsT0FBTyxFQUFDckI7QUFBVCxDQUFELENBQXJCO0FBRUEsTUFBTXNCLEdBQUcsR0FBRyxzQkFBWixDLENBRUE7O0FBQ0FBLEdBQUcsQ0FBQ0MsSUFBSixDQUFTLFdBQVQsRUFBc0JDLGNBQWMsQ0FBQ0MsTUFBckM7QUFDQUgsR0FBRyxDQUFDQyxJQUFKLENBQVMsUUFBVCxFQUFtQkMsY0FBYyxDQUFDRSxNQUFsQztBQUNBSixHQUFHLENBQUNLLEdBQUosQ0FBUSxTQUFSLEVBQW1CSCxjQUFjLENBQUNJLE1BQWxDLEUsQ0FFQTs7QUFDQU4sR0FBRyxDQUFDSyxHQUFKLENBQVEsR0FBUixFQUFhRSxjQUFjLENBQUNDLFdBQTVCO0FBQ0FSLEdBQUcsQ0FBQ0ssR0FBSixDQUFRLE1BQVIsRUFBZ0JFLGNBQWMsQ0FBQ0UsV0FBL0I7QUFDQVQsR0FBRyxDQUFDVSxHQUFKLENBQVEsTUFBUixFQUFnQkgsY0FBYyxDQUFDSSxVQUEvQjtBQUNBWCxHQUFHLENBQUNZLE1BQUosQ0FBVyxNQUFYLEVBQW1CTCxjQUFjLENBQUNNLFVBQWxDO0FBQ0FiLEdBQUcsQ0FBQ2MsS0FBSixDQUFVLGFBQVYsRUFBeUJQLGNBQWMsQ0FBQ1EsTUFBeEM7QUFDQWYsR0FBRyxDQUFDYyxLQUFKLENBQVUsZUFBVixFQUEyQlAsY0FBYyxDQUFDUyxRQUExQyxFLENBR0E7QUFDQTs7QUFDQWhCLEdBQUcsQ0FBQ0MsSUFBSixDQUFTLFNBQVQsRUFBb0JILE1BQU0sQ0FBQ21CLE1BQVAsQ0FBYyxNQUFkLENBQXBCLEVBQTRDQyxnQkFBZ0IsQ0FBQ0MsWUFBN0Q7ZUFFZW5CLEciLCJzb3VyY2VSb290IjoiL0FwcGxpY2F0aW9ucy9kb3NzaWVyL21lcm5fcHJvamVjdF9hcHAyL3NyYy9yb3V0ZXMvYXBpLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJvdXRlciB9IGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0ICogYXMgQXV0aENvbnRyb2xsZXIgZnJvbSAnLi4vLi4vY29udHJvbGxlcnMvYXV0aC5jb250cm9sbGVyJztcbmltcG9ydCAqIGFzIFVzZXJDb250cm9sbGVyIGZyb20gJy4uLy4uL2NvbnRyb2xsZXJzL3VzZXIuY29udHJvbGxlcic7XG5pbXBvcnQgKiBhcyBVcGxvYWRDb250cm9sbGVyIGZyb20gJy4uLy4uL2NvbnRyb2xsZXJzL3VwbG9hZC5jb250cm9sbGVyJztcbmNvbnN0IG11bHRlciAgPSByZXF1aXJlKCdtdWx0ZXInKVxuXG5jb25zdCBmaWxlU3RvcmFnZUVuZ2luZSA9IG11bHRlci5kaXNrU3RvcmFnZSh7XG4gICAgZGVzdGluYXRpb246KHJlcSwgZmlsZSwgY2IpID0+IHtcbiAgICAgICAgY2IobnVsbCwgYCR7X19kaXJuYW1lfS8uLi8uLi8uLi9jbGllbnQvcHVibGljL3VwbG9hZHMvcHJvZmlsYClcbiAgICB9LFxuICAgIGZpbGVuYW1lOiBmdW5jdGlvbiAocmVxLCBmaWxlLCBjYikge1xuICAgICAgICBjb25zdCB1bmlxdWVTdWZmaXggPSBEYXRlLm5vdygpICsgJy0nICsgTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMUU5KVxuICAgICAgICBsZXQgb3JpZ2luYWxOYW1lRmlsZSA9IGZpbGUub3JpZ2luYWxuYW1lO1xuICAgICAgICBsZXQgZXh0ZW5zaW9uID0gb3JpZ2luYWxOYW1lRmlsZS5zdWJzdHJpbmcob3JpZ2luYWxOYW1lRmlsZS5sYXN0SW5kZXhPZignLicpICsgMSk7IFxuICAgICAgICBjYihudWxsLCBmaWxlLmZpZWxkbmFtZSArICctJyArIHVuaXF1ZVN1ZmZpeCArIFwiLlwiKyBleHRlbnNpb24gKVxuICAgICAgfVxufSk7XG5cbmNvbnN0IHVwbG9hZCA9IG11bHRlcih7c3RvcmFnZTpmaWxlU3RvcmFnZUVuZ2luZX0pXG5cbmNvbnN0IGFwaSA9IFJvdXRlcigpO1xuXG4vL2F1dGhcbmFwaS5wb3N0KCcvcmVnaXN0ZXInLCBBdXRoQ29udHJvbGxlci5zaWduVXApO1xuYXBpLnBvc3QoJy9sb2dpbicsIEF1dGhDb250cm9sbGVyLnNpZ25Jbik7XG5hcGkuZ2V0KCcvbG9nb3V0JywgQXV0aENvbnRyb2xsZXIubG9nb3V0KTtcblxuLy91c2VyXG5hcGkuZ2V0KCcvJywgVXNlckNvbnRyb2xsZXIuZ2V0QWxsVXNlcnMpO1xuYXBpLmdldCgnLzppZCcsIFVzZXJDb250cm9sbGVyLmdldFVzZXJJbmZvKTtcbmFwaS5wdXQoJy86aWQnLCBVc2VyQ29udHJvbGxlci51cGRhdGVVc2VyKTtcbmFwaS5kZWxldGUoJy86aWQnLCBVc2VyQ29udHJvbGxlci5kZWxldGVVc2VyKTtcbmFwaS5wYXRjaCgnL2ZvbGxvdy86aWQnLCBVc2VyQ29udHJvbGxlci5mb2xsb3cpO1xuYXBpLnBhdGNoKCcvdW5mb2xsb3cvOmlkJywgVXNlckNvbnRyb2xsZXIudW5mb2xsb3cpO1xuXG5cbi8vdXBsb2FkXG4vL2F2YW50IGRlIHBhc3NlciDDoCBub3RyZSBjb250cm9sbGV1ciBpbCB2YSBjaGVjayBub3RyZSBmaWxlXG5hcGkucG9zdCgnL3VwbG9hZCcsIHVwbG9hZC5zaW5nbGUoXCJmaWxlXCIpLCAgVXBsb2FkQ29udHJvbGxlci51cGxvYWRQcm9maWwpXG5cbmV4cG9ydCBkZWZhdWx0IGFwaTsiXX0=","map":{"version":3,"sources":["user.route.js"],"names":["multer","require","fileStorageEngine","diskStorage","destination","req","file","cb","__dirname","filename","uniqueSuffix","Date","now","Math","round","random","originalNameFile","originalname","extension","substring","lastIndexOf","fieldname","upload","storage","api","post","AuthController","signUp","signIn","get","logout","UserController","getAllUsers","getUserInfo","put","updateUser","delete","deleteUser","patch","follow","unfollow","single","UploadController","uploadProfil"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;;;AACA,MAAMA,MAAM,GAAIC,OAAO,CAAC,QAAD,CAAvB;;AAEA,MAAMC,iBAAiB,GAAGF,MAAM,CAACG,WAAP,CAAmB;AACzCC,EAAAA,WAAW,EAAC,CAACC,GAAD,EAAMC,IAAN,EAAYC,EAAZ,KAAmB;AAC3BA,IAAAA,EAAE,CAAC,IAAD,EAAQ,GAAEC,SAAU,wCAApB,CAAF;AACH,GAHwC;AAIzCC,EAAAA,QAAQ,EAAE,UAAUJ,GAAV,EAAeC,IAAf,EAAqBC,EAArB,EAAyB;AAC/B,UAAMG,YAAY,GAAGC,IAAI,CAACC,GAAL,KAAa,GAAb,GAAmBC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,GAA3B,CAAxC;AACA,QAAIC,gBAAgB,GAAGV,IAAI,CAACW,YAA5B;AACA,QAAIC,SAAS,GAAGF,gBAAgB,CAACG,SAAjB,CAA2BH,gBAAgB,CAACI,WAAjB,CAA6B,GAA7B,IAAoC,CAA/D,CAAhB;AACAb,IAAAA,EAAE,CAAC,IAAD,EAAOD,IAAI,CAACe,SAAL,GAAiB,GAAjB,GAAuBX,YAAvB,GAAsC,GAAtC,GAA2CQ,SAAlD,CAAF;AACD;AATsC,CAAnB,CAA1B;AAYA,MAAMI,MAAM,GAAGtB,MAAM,CAAC;AAACuB,EAAAA,OAAO,EAACrB;AAAT,CAAD,CAArB;AAEA,MAAMsB,GAAG,GAAG,sBAAZ,C,CAEA;;AACAA,GAAG,CAACC,IAAJ,CAAS,WAAT,EAAsBC,cAAc,CAACC,MAArC;AACAH,GAAG,CAACC,IAAJ,CAAS,QAAT,EAAmBC,cAAc,CAACE,MAAlC;AACAJ,GAAG,CAACK,GAAJ,CAAQ,SAAR,EAAmBH,cAAc,CAACI,MAAlC,E,CAEA;;AACAN,GAAG,CAACK,GAAJ,CAAQ,GAAR,EAAaE,cAAc,CAACC,WAA5B;AACAR,GAAG,CAACK,GAAJ,CAAQ,MAAR,EAAgBE,cAAc,CAACE,WAA/B;AACAT,GAAG,CAACU,GAAJ,CAAQ,MAAR,EAAgBH,cAAc,CAACI,UAA/B;AACAX,GAAG,CAACY,MAAJ,CAAW,MAAX,EAAmBL,cAAc,CAACM,UAAlC;AACAb,GAAG,CAACc,KAAJ,CAAU,aAAV,EAAyBP,cAAc,CAACQ,MAAxC;AACAf,GAAG,CAACc,KAAJ,CAAU,eAAV,EAA2BP,cAAc,CAACS,QAA1C,E,CAGA;AACA;;AACAhB,GAAG,CAACC,IAAJ,CAAS,SAAT,EAAoBH,MAAM,CAACmB,MAAP,CAAc,MAAd,CAApB,EAA4CC,gBAAgB,CAACC,YAA7D;eAEenB,G","sourceRoot":"/Applications/dossier/mern_project_app2/src/routes/api/","sourcesContent":["import { Router } from 'express';\nimport * as AuthController from '../../controllers/auth.controller';\nimport * as UserController from '../../controllers/user.controller';\nimport * as UploadController from '../../controllers/upload.controller';\nconst multer  = require('multer')\n\nconst fileStorageEngine = multer.diskStorage({\n    destination:(req, file, cb) => {\n        cb(null, `${__dirname}/../../../client/public/uploads/profil`)\n    },\n    filename: function (req, file, cb) {\n        const uniqueSuffix = Date.now() + '-' + Math.round(Math.random() * 1E9)\n        let originalNameFile = file.originalname;\n        let extension = originalNameFile.substring(originalNameFile.lastIndexOf('.') + 1); \n        cb(null, file.fieldname + '-' + uniqueSuffix + \".\"+ extension )\n      }\n});\n\nconst upload = multer({storage:fileStorageEngine})\n\nconst api = Router();\n\n//auth\napi.post('/register', AuthController.signUp);\napi.post('/login', AuthController.signIn);\napi.get('/logout', AuthController.logout);\n\n//user\napi.get('/', UserController.getAllUsers);\napi.get('/:id', UserController.getUserInfo);\napi.put('/:id', UserController.updateUser);\napi.delete('/:id', UserController.deleteUser);\napi.patch('/follow/:id', UserController.follow);\napi.patch('/unfollow/:id', UserController.unfollow);\n\n\n//upload\n//avant de passer à notre controlleur il va check notre file\napi.post('/upload', upload.single(\"file\"),  UploadController.uploadProfil)\n\nexport default api;"]}},"mtime":1651289820854},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/mern_project_app2/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/mern_project_app2\",\"filename\":\"/Applications/dossier/mern_project_app2/src/controllers/user.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/mern_project_app2\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.updateUser = exports.unfollow = exports.getUserInfo = exports.getAllUsers = exports.follow = exports.deleteUser = void 0;\n\nconst User = require('../models/user.model');\n\nconst ObjectID = require(\"mongoose\").Types.ObjectId;\n\nconst getAllUsers = async (req, res) => {\n  //allow to receive all users without password\n  const users = await User.find().select('-password');\n  res.status(200).json(users);\n};\n\nexports.getAllUsers = getAllUsers;\n\nconst getUserInfo = async (req, res) => {\n  //if id exist in databse\n  if (!ObjectID.isValid(req.params.id)) {\n    return res.status(400).send(`Id unknown : ${req.params.id}`);\n  }\n\n  await User.findById(req.params.id).select('-password').then(user => {\n    res.status(200).json(user);\n  }).catch(err => {\n    console.log(err);\n  });\n};\n\nexports.getUserInfo = getUserInfo;\n\nconst updateUser = async (req, res) => {\n  if (!ObjectID.isValid(req.params.id)) {\n    return res.status(400).send(`Id unknown : ${req.params.id}`);\n  }\n\n  await User.findOneAndUpdate({\n    _id: req.params.id\n  }, {\n    $set: {\n      bio: req.body.bio\n    }\n  }, {\n    new: true,\n    upsert: true,\n    setDefaultsOnInsert: true\n  }).select('-password').then(user => {\n    res.status(200).json(user);\n  }).catch(err => {\n    res.status(500).json({\n      message: err\n    });\n  });\n};\n\nexports.updateUser = updateUser;\n\nconst deleteUser = async (req, res) => {\n  if (!ObjectID.isValid(req.params.id)) {\n    return res.status(400).send(`Id unknown : ${req.params.id}`);\n  }\n\n  await User.remove({\n    _id: req.params.id\n  }).exec().then(() => {\n    res.status(200).json({\n      message: 'Successfully deleted !'\n    });\n  }).catch(err => {\n    res.status(500).json({\n      message: err\n    });\n  });\n};\n\nexports.deleteUser = deleteUser;\n\nconst follow = async (req, res) => {\n  if (!ObjectID.isValid(req.params.id)) {\n    return res.status(400).send(`Id unknown : ${req.params.id}`);\n  }\n\n  if (!ObjectID.isValid(req.body.idToFollow)) {\n    return res.status(400).send(`Id unknown : ${req.body.idToFollow}`);\n  } //add to the follower list\n\n\n  await User.findByIdAndUpdate(req.params.id, {\n    $addToSet: {\n      following: req.body.idToFollow\n    }\n  }, {\n    new: true,\n    upsert: true\n  }).then(user => {\n    res.status(201).json(user);\n  }).catch(err => {\n    return res.status(500).json({\n      message: err\n    });\n  }); //add to the following list\n\n  await User.findByIdAndUpdate(req.body.idToFollow, {\n    $addToSet: {\n      followers: req.params.id\n    }\n  }, {\n    new: true,\n    upsert: true\n  }).then(user => {}).catch(err => {\n    return res.status(500).json({\n      message: err\n    });\n  });\n};\n\nexports.follow = follow;\n\nconst unfollow = async (req, res) => {\n  if (!ObjectID.isValid(req.params.id)) {\n    return res.status(400).send(`Id unknown : ${req.params.id}`);\n  }\n\n  if (!ObjectID.isValid(req.body.idToUnFollow)) {\n    return res.status(400).send(`Id unknown : ${req.body.idToUnFollow}`);\n  } //delete to the follower list\n\n\n  await User.findByIdAndUpdate(req.params.id, {\n    $pull: {\n      following: req.body.idToUnFollow\n    }\n  }, {\n    new: true,\n    upsert: true\n  }).then(user => {\n    res.status(201).json(user);\n  }).catch(err => {\n    return res.status(500).json({\n      message: err\n    });\n  }); //delete to the following list\n\n  await User.findByIdAndUpdate(req.body.idToUnFollow, {\n    $pull: {\n      followers: req.params.id\n    }\n  }, {\n    new: true,\n    upsert: true\n  }).then(user => {}).catch(err => {\n    return res.status(500).json({\n      message: err\n    });\n  });\n};\n\nexports.unfollow = unfollow;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIuY29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJVc2VyIiwicmVxdWlyZSIsIk9iamVjdElEIiwiVHlwZXMiLCJPYmplY3RJZCIsImdldEFsbFVzZXJzIiwicmVxIiwicmVzIiwidXNlcnMiLCJmaW5kIiwic2VsZWN0Iiwic3RhdHVzIiwianNvbiIsImdldFVzZXJJbmZvIiwiaXNWYWxpZCIsInBhcmFtcyIsImlkIiwic2VuZCIsImZpbmRCeUlkIiwidGhlbiIsInVzZXIiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJ1cGRhdGVVc2VyIiwiZmluZE9uZUFuZFVwZGF0ZSIsIl9pZCIsIiRzZXQiLCJiaW8iLCJib2R5IiwibmV3IiwidXBzZXJ0Iiwic2V0RGVmYXVsdHNPbkluc2VydCIsIm1lc3NhZ2UiLCJkZWxldGVVc2VyIiwicmVtb3ZlIiwiZXhlYyIsImZvbGxvdyIsImlkVG9Gb2xsb3ciLCJmaW5kQnlJZEFuZFVwZGF0ZSIsIiRhZGRUb1NldCIsImZvbGxvd2luZyIsImZvbGxvd2VycyIsInVuZm9sbG93IiwiaWRUb1VuRm9sbG93IiwiJHB1bGwiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxNQUFNQSxJQUFJLEdBQUdDLE9BQU8sQ0FBQyxzQkFBRCxDQUFwQjs7QUFDQSxNQUFNQyxRQUFRLEdBQUdELE9BQU8sQ0FBQyxVQUFELENBQVAsQ0FBb0JFLEtBQXBCLENBQTBCQyxRQUEzQzs7QUFHTyxNQUFNQyxXQUFXLEdBQUcsT0FBT0MsR0FBUCxFQUFZQyxHQUFaLEtBQW9CO0FBQzNDO0FBQ0EsUUFBTUMsS0FBSyxHQUFHLE1BQU1SLElBQUksQ0FBQ1MsSUFBTCxHQUFZQyxNQUFaLENBQW1CLFdBQW5CLENBQXBCO0FBQ0FILEVBQUFBLEdBQUcsQ0FDRUksTUFETCxDQUNZLEdBRFosRUFFS0MsSUFGTCxDQUVVSixLQUZWO0FBR0gsQ0FOTTs7OztBQVFBLE1BQU1LLFdBQVcsR0FBRyxPQUFPUCxHQUFQLEVBQVlDLEdBQVosS0FBb0I7QUFD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QyxDQUFOO0FBVUgsQ0E1Qk0iLCJzb3VyY2VSb290IjoiL0FwcGxpY2F0aW9ucy9kb3NzaWVyL21lcm5fcHJvamVjdF9hcHAyL3NyYy9jb250cm9sbGVycy8iLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBVc2VyID0gcmVxdWlyZSgnLi4vbW9kZWxzL3VzZXIubW9kZWwnKVxuY29uc3QgT2JqZWN0SUQgPSByZXF1aXJlKFwibW9uZ29vc2VcIikuVHlwZXMuT2JqZWN0SWQ7XG5cblxuZXhwb3J0IGNvbnN0IGdldEFsbFVzZXJzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgLy9hbGxvdyB0byByZWNlaXZlIGFsbCB1c2VycyB3aXRob3V0IHBhc3N3b3JkXG4gICAgY29uc3QgdXNlcnMgPSBhd2FpdCBVc2VyLmZpbmQoKS5zZWxlY3QoJy1wYXNzd29yZCcpO1xuICAgIHJlc1xuICAgICAgICAuc3RhdHVzKDIwMClcbiAgICAgICAgLmpzb24odXNlcnMpXG59XG5cbmV4cG9ydCBjb25zdCBnZXRVc2VySW5mbyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIC8vaWYgaWQgZXhpc3QgaW4gZGF0YWJzZVxuICAgIGlmICghT2JqZWN0SUQuaXNWYWxpZChyZXEucGFyYW1zLmlkKSkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoYElkIHVua25vd24gOiAke3JlcS5wYXJhbXMuaWR9YClcbiAgICB9XG4gICAgYXdhaXQgVXNlci5maW5kQnlJZChyZXEucGFyYW1zLmlkKS5zZWxlY3QoJy1wYXNzd29yZCcpXG4gICAgICAgIC50aGVuKCh1c2VyKSA9PiB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih1c2VyKVxuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgICB9KVxufVxuXG5leHBvcnQgY29uc3QgdXBkYXRlVXNlciA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGlmICghT2JqZWN0SUQuaXNWYWxpZChyZXEucGFyYW1zLmlkKSkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoYElkIHVua25vd24gOiAke3JlcS5wYXJhbXMuaWR9YClcbiAgICB9XG4gICAgYXdhaXQgVXNlci5maW5kT25lQW5kVXBkYXRlKFxuICAgICAgICB7IF9pZDogcmVxLnBhcmFtcy5pZCB9LFxuICAgICAgICB7XG4gICAgICAgICAgICAkc2V0OiB7XG4gICAgICAgICAgICAgICAgYmlvOiByZXEuYm9keS5iaW9cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmV3OiB0cnVlLFxuICAgICAgICAgICAgdXBzZXJ0OiB0cnVlLFxuICAgICAgICAgICAgc2V0RGVmYXVsdHNPbkluc2VydDogdHJ1ZVxuICAgICAgICB9KS5zZWxlY3QoJy1wYXNzd29yZCcpLnRoZW4oKHVzZXIpID0+IHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHVzZXIpXG4gICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogZXJyIH0pXG4gICAgICAgIH0pXG59XG5cbmV4cG9ydCBjb25zdCBkZWxldGVVc2VyID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgaWYgKCFPYmplY3RJRC5pc1ZhbGlkKHJlcS5wYXJhbXMuaWQpKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZChgSWQgdW5rbm93biA6ICR7cmVxLnBhcmFtcy5pZH1gKVxuICAgIH1cbiAgICBhd2FpdCBVc2VyLnJlbW92ZSh7XG4gICAgICAgIF9pZDogcmVxLnBhcmFtcy5pZFxuICAgIH0pLmV4ZWMoKVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe21lc3NhZ2U6ICdTdWNjZXNzZnVsbHkgZGVsZXRlZCAhJ30pXG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7bWVzc2FnZTplcnJ9KVxuICAgIH0pXG59XG5leHBvcnQgY29uc3QgZm9sbG93ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgaWYgKCFPYmplY3RJRC5pc1ZhbGlkKHJlcS5wYXJhbXMuaWQpICkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoYElkIHVua25vd24gOiAke3JlcS5wYXJhbXMuaWR9YClcbiAgICB9XG4gICAgaWYgKCFPYmplY3RJRC5pc1ZhbGlkKHJlcS5ib2R5LmlkVG9Gb2xsb3cpICkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoYElkIHVua25vd24gOiAke3JlcS5ib2R5LmlkVG9Gb2xsb3d9YClcbiAgICB9XG4gICAgLy9hZGQgdG8gdGhlIGZvbGxvd2VyIGxpc3RcbiAgICBhd2FpdCBVc2VyLmZpbmRCeUlkQW5kVXBkYXRlKHJlcS5wYXJhbXMuaWQsIFxuICAgICAgICB7ICRhZGRUb1NldCA6IHsgZm9sbG93aW5nOiByZXEuYm9keS5pZFRvRm9sbG93fX0sXG4gICAgICAgIHtuZXcgOiB0cnVlLCB1cHNlcnQ6dHJ1ZX0pXG4gICAgICAgIC50aGVuKCh1c2VyKSA9PiB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih1c2VyKVxuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHttZXNzYWdlOmVycn0pXG4gICAgICAgIH0pXG4gICAgLy9hZGQgdG8gdGhlIGZvbGxvd2luZyBsaXN0XG4gICAgYXdhaXQgVXNlci5maW5kQnlJZEFuZFVwZGF0ZShyZXEuYm9keS5pZFRvRm9sbG93LFxuICAgICAgICB7ICRhZGRUb1NldCA6IHsgZm9sbG93ZXJzOiByZXEucGFyYW1zLmlkfX0sXG4gICAgICAgIHtuZXcgOiB0cnVlLCB1cHNlcnQ6dHJ1ZX0pXG4gICAgICAgIC50aGVuKCh1c2VyKSA9PiB7XG5cbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7bWVzc2FnZTplcnJ9KVxuICAgICAgICB9KVxuXG59XG5leHBvcnQgY29uc3QgdW5mb2xsb3cgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBpZiAoIU9iamVjdElELmlzVmFsaWQocmVxLnBhcmFtcy5pZCkgKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZChgSWQgdW5rbm93biA6ICR7cmVxLnBhcmFtcy5pZH1gKVxuICAgIH1cbiAgICBpZiAoIU9iamVjdElELmlzVmFsaWQocmVxLmJvZHkuaWRUb1VuRm9sbG93KSApIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKGBJZCB1bmtub3duIDogJHtyZXEuYm9keS5pZFRvVW5Gb2xsb3d9YClcbiAgICB9XG4gICAgIC8vZGVsZXRlIHRvIHRoZSBmb2xsb3dlciBsaXN0XG4gICAgIGF3YWl0IFVzZXIuZmluZEJ5SWRBbmRVcGRhdGUocmVxLnBhcmFtcy5pZCwgXG4gICAgICAgIHsgJHB1bGwgOiB7IGZvbGxvd2luZzogcmVxLmJvZHkuaWRUb1VuRm9sbG93fX0sXG4gICAgICAgIHtuZXcgOiB0cnVlLCB1cHNlcnQ6dHJ1ZX0pXG4gICAgICAgIC50aGVuKCh1c2VyKSA9PiB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih1c2VyKVxuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHttZXNzYWdlOmVycn0pXG4gICAgICAgIH0pXG4gICAgLy9kZWxldGUgdG8gdGhlIGZvbGxvd2luZyBsaXN0XG4gICAgYXdhaXQgVXNlci5maW5kQnlJZEFuZFVwZGF0ZShyZXEuYm9keS5pZFRvVW5Gb2xsb3csXG4gICAgICAgIHsgJHB1bGwgOiB7IGZvbGxvd2VyczogcmVxLnBhcmFtcy5pZH19LFxuICAgICAgICB7bmV3IDogdHJ1ZSwgdXBzZXJ0OnRydWV9KVxuICAgICAgICAudGhlbigodXNlcikgPT4ge1xuXG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe21lc3NhZ2U6ZXJyfSlcbiAgICAgICAgfSlcblxufSJdfQ==","map":{"version":3,"sources":["user.controller.js"],"names":["User","require","ObjectID","Types","ObjectId","getAllUsers","req","res","users","find","select","status","json","getUserInfo","isValid","params","id","send","findById","then","user","catch","err","console","log","updateUser","findOneAndUpdate","_id","$set","bio","body","new","upsert","setDefaultsOnInsert","message","deleteUser","remove","exec","follow","idToFollow","findByIdAndUpdate","$addToSet","following","followers","unfollow","idToUnFollow","$pull"],"mappings":";;;;;;;AAAA,MAAMA,IAAI,GAAGC,OAAO,CAAC,sBAAD,CAApB;;AACA,MAAMC,QAAQ,GAAGD,OAAO,CAAC,UAAD,CAAP,CAAoBE,KAApB,CAA0BC,QAA3C;;AAGO,MAAMC,WAAW,GAAG,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAC3C;AACA,QAAMC,KAAK,GAAG,MAAMR,IAAI,CAACS,IAAL,GAAYC,MAAZ,CAAmB,WAAnB,CAApB;AACAH,EAAAA,GAAG,CACEI,MADL,CACY,GADZ,EAEKC,IAFL,CAEUJ,KAFV;AAGH,CANM;;;;AAQA,MAAMK,WAAW,GAAG,OAAOP,GAAP,EAAYC,GAAZ,KAAoB;AAC3C;AACA,MAAI,CAACL,QAAQ,CAACY,OAAT,CAAiBR,GAAG,CAACS,MAAJ,CAAWC,EAA5B,CAAL,EAAsC;AAClC,WAAOT,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBM,IAAhB,CAAsB,gBAAeX,GAAG,CAACS,MAAJ,CAAWC,EAAG,EAAnD,CAAP;AACH;;AACD,QAAMhB,IAAI,CAACkB,QAAL,CAAcZ,GAAG,CAACS,MAAJ,CAAWC,EAAzB,EAA6BN,MAA7B,CAAoC,WAApC,EACDS,IADC,CACKC,IAAD,IAAU;AACZb,IAAAA,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBQ,IAArB;AACH,GAHC,EAIDC,KAJC,CAIMC,GAAD,IAAS;AACZC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACH,GANC,CAAN;AAOH,CAZM;;;;AAcA,MAAMG,UAAU,GAAG,OAAOnB,GAAP,EAAYC,GAAZ,KAAoB;AAC1C,MAAI,CAACL,QAAQ,CAACY,OAAT,CAAiBR,GAAG,CAACS,MAAJ,CAAWC,EAA5B,CAAL,EAAsC;AAClC,WAAOT,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBM,IAAhB,CAAsB,gBAAeX,GAAG,CAACS,MAAJ,CAAWC,EAAG,EAAnD,CAAP;AACH;;AACD,QAAMhB,IAAI,CAAC0B,gBAAL,CACF;AAAEC,IAAAA,GAAG,EAAErB,GAAG,CAACS,MAAJ,CAAWC;AAAlB,GADE,EAEF;AACIY,IAAAA,IAAI,EAAE;AACFC,MAAAA,GAAG,EAAEvB,GAAG,CAACwB,IAAJ,CAASD;AADZ;AADV,GAFE,EAOF;AACIE,IAAAA,GAAG,EAAE,IADT;AAEIC,IAAAA,MAAM,EAAE,IAFZ;AAGIC,IAAAA,mBAAmB,EAAE;AAHzB,GAPE,EAWCvB,MAXD,CAWQ,WAXR,EAWqBS,IAXrB,CAW2BC,IAAD,IAAU;AAClCb,IAAAA,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBQ,IAArB;AACH,GAbC,EAaCC,KAbD,CAaQC,GAAD,IAAS;AACdf,IAAAA,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEsB,MAAAA,OAAO,EAAEZ;AAAX,KAArB;AACH,GAfC,CAAN;AAgBH,CApBM;;;;AAsBA,MAAMa,UAAU,GAAG,OAAO7B,GAAP,EAAYC,GAAZ,KAAoB;AAC1C,MAAI,CAACL,QAAQ,CAACY,OAAT,CAAiBR,GAAG,CAACS,MAAJ,CAAWC,EAA5B,CAAL,EAAsC;AAClC,WAAOT,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBM,IAAhB,CAAsB,gBAAeX,GAAG,CAACS,MAAJ,CAAWC,EAAG,EAAnD,CAAP;AACH;;AACD,QAAMhB,IAAI,CAACoC,MAAL,CAAY;AACdT,IAAAA,GAAG,EAAErB,GAAG,CAACS,MAAJ,CAAWC;AADF,GAAZ,EAEHqB,IAFG,GAGLlB,IAHK,CAGA,MAAM;AACRZ,IAAAA,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACsB,MAAAA,OAAO,EAAE;AAAV,KAArB;AACH,GALK,EAMLb,KANK,CAMEC,GAAD,IAAS;AACZf,IAAAA,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACsB,MAAAA,OAAO,EAACZ;AAAT,KAArB;AACH,GARK,CAAN;AASH,CAbM;;;;AAcA,MAAMgB,MAAM,GAAG,OAAOhC,GAAP,EAAYC,GAAZ,KAAoB;AACtC,MAAI,CAACL,QAAQ,CAACY,OAAT,CAAiBR,GAAG,CAACS,MAAJ,CAAWC,EAA5B,CAAL,EAAuC;AACnC,WAAOT,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBM,IAAhB,CAAsB,gBAAeX,GAAG,CAACS,MAAJ,CAAWC,EAAG,EAAnD,CAAP;AACH;;AACD,MAAI,CAACd,QAAQ,CAACY,OAAT,CAAiBR,GAAG,CAACwB,IAAJ,CAASS,UAA1B,CAAL,EAA6C;AACzC,WAAOhC,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBM,IAAhB,CAAsB,gBAAeX,GAAG,CAACwB,IAAJ,CAASS,UAAW,EAAzD,CAAP;AACH,GANqC,CAOtC;;;AACA,QAAMvC,IAAI,CAACwC,iBAAL,CAAuBlC,GAAG,CAACS,MAAJ,CAAWC,EAAlC,EACF;AAAEyB,IAAAA,SAAS,EAAG;AAAEC,MAAAA,SAAS,EAAEpC,GAAG,CAACwB,IAAJ,CAASS;AAAtB;AAAd,GADE,EAEF;AAACR,IAAAA,GAAG,EAAG,IAAP;AAAaC,IAAAA,MAAM,EAAC;AAApB,GAFE,EAGDb,IAHC,CAGKC,IAAD,IAAU;AACZb,IAAAA,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBQ,IAArB;AACH,GALC,EAMDC,KANC,CAMMC,GAAD,IAAS;AACZ,WAAOf,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACsB,MAAAA,OAAO,EAACZ;AAAT,KAArB,CAAP;AACH,GARC,CAAN,CARsC,CAiBtC;;AACA,QAAMtB,IAAI,CAACwC,iBAAL,CAAuBlC,GAAG,CAACwB,IAAJ,CAASS,UAAhC,EACF;AAAEE,IAAAA,SAAS,EAAG;AAAEE,MAAAA,SAAS,EAAErC,GAAG,CAACS,MAAJ,CAAWC;AAAxB;AAAd,GADE,EAEF;AAACe,IAAAA,GAAG,EAAG,IAAP;AAAaC,IAAAA,MAAM,EAAC;AAApB,GAFE,EAGDb,IAHC,CAGKC,IAAD,IAAU,CAEf,CALC,EAMDC,KANC,CAMMC,GAAD,IAAS;AACZ,WAAOf,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACsB,MAAAA,OAAO,EAACZ;AAAT,KAArB,CAAP;AACH,GARC,CAAN;AAUH,CA5BM;;;;AA6BA,MAAMsB,QAAQ,GAAG,OAAOtC,GAAP,EAAYC,GAAZ,KAAoB;AACxC,MAAI,CAACL,QAAQ,CAACY,OAAT,CAAiBR,GAAG,CAACS,MAAJ,CAAWC,EAA5B,CAAL,EAAuC;AACnC,WAAOT,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBM,IAAhB,CAAsB,gBAAeX,GAAG,CAACS,MAAJ,CAAWC,EAAG,EAAnD,CAAP;AACH;;AACD,MAAI,CAACd,QAAQ,CAACY,OAAT,CAAiBR,GAAG,CAACwB,IAAJ,CAASe,YAA1B,CAAL,EAA+C;AAC3C,WAAOtC,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBM,IAAhB,CAAsB,gBAAeX,GAAG,CAACwB,IAAJ,CAASe,YAAa,EAA3D,CAAP;AACH,GANuC,CAOvC;;;AACA,QAAM7C,IAAI,CAACwC,iBAAL,CAAuBlC,GAAG,CAACS,MAAJ,CAAWC,EAAlC,EACH;AAAE8B,IAAAA,KAAK,EAAG;AAAEJ,MAAAA,SAAS,EAAEpC,GAAG,CAACwB,IAAJ,CAASe;AAAtB;AAAV,GADG,EAEH;AAACd,IAAAA,GAAG,EAAG,IAAP;AAAaC,IAAAA,MAAM,EAAC;AAApB,GAFG,EAGFb,IAHE,CAGIC,IAAD,IAAU;AACZb,IAAAA,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBQ,IAArB;AACH,GALE,EAMFC,KANE,CAMKC,GAAD,IAAS;AACZ,WAAOf,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACsB,MAAAA,OAAO,EAACZ;AAAT,KAArB,CAAP;AACH,GARE,CAAN,CARuC,CAiBxC;;AACA,QAAMtB,IAAI,CAACwC,iBAAL,CAAuBlC,GAAG,CAACwB,IAAJ,CAASe,YAAhC,EACF;AAAEC,IAAAA,KAAK,EAAG;AAAEH,MAAAA,SAAS,EAAErC,GAAG,CAACS,MAAJ,CAAWC;AAAxB;AAAV,GADE,EAEF;AAACe,IAAAA,GAAG,EAAG,IAAP;AAAaC,IAAAA,MAAM,EAAC;AAApB,GAFE,EAGDb,IAHC,CAGKC,IAAD,IAAU,CAEf,CALC,EAMDC,KANC,CAMMC,GAAD,IAAS;AACZ,WAAOf,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACsB,MAAAA,OAAO,EAACZ;AAAT,KAArB,CAAP;AACH,GARC,CAAN;AAUH,CA5BM","sourceRoot":"/Applications/dossier/mern_project_app2/src/controllers/","sourcesContent":["const User = require('../models/user.model')\nconst ObjectID = require(\"mongoose\").Types.ObjectId;\n\n\nexport const getAllUsers = async (req, res) => {\n    //allow to receive all users without password\n    const users = await User.find().select('-password');\n    res\n        .status(200)\n        .json(users)\n}\n\nexport const getUserInfo = async (req, res) => {\n    //if id exist in databse\n    if (!ObjectID.isValid(req.params.id)) {\n        return res.status(400).send(`Id unknown : ${req.params.id}`)\n    }\n    await User.findById(req.params.id).select('-password')\n        .then((user) => {\n            res.status(200).json(user)\n        })\n        .catch((err) => {\n            console.log(err)\n        })\n}\n\nexport const updateUser = async (req, res) => {\n    if (!ObjectID.isValid(req.params.id)) {\n        return res.status(400).send(`Id unknown : ${req.params.id}`)\n    }\n    await User.findOneAndUpdate(\n        { _id: req.params.id },\n        {\n            $set: {\n                bio: req.body.bio\n            }\n        },\n        {\n            new: true,\n            upsert: true,\n            setDefaultsOnInsert: true\n        }).select('-password').then((user) => {\n            res.status(200).json(user)\n        }).catch((err) => {\n            res.status(500).json({ message: err })\n        })\n}\n\nexport const deleteUser = async (req, res) => {\n    if (!ObjectID.isValid(req.params.id)) {\n        return res.status(400).send(`Id unknown : ${req.params.id}`)\n    }\n    await User.remove({\n        _id: req.params.id\n    }).exec()\n    .then(() => {\n        res.status(200).json({message: 'Successfully deleted !'})\n    })\n    .catch((err) => {\n        res.status(500).json({message:err})\n    })\n}\nexport const follow = async (req, res) => {\n    if (!ObjectID.isValid(req.params.id) ) {\n        return res.status(400).send(`Id unknown : ${req.params.id}`)\n    }\n    if (!ObjectID.isValid(req.body.idToFollow) ) {\n        return res.status(400).send(`Id unknown : ${req.body.idToFollow}`)\n    }\n    //add to the follower list\n    await User.findByIdAndUpdate(req.params.id, \n        { $addToSet : { following: req.body.idToFollow}},\n        {new : true, upsert:true})\n        .then((user) => {\n            res.status(201).json(user)\n        })\n        .catch((err) => {\n            return res.status(500).json({message:err})\n        })\n    //add to the following list\n    await User.findByIdAndUpdate(req.body.idToFollow,\n        { $addToSet : { followers: req.params.id}},\n        {new : true, upsert:true})\n        .then((user) => {\n\n        })\n        .catch((err) => {\n            return res.status(500).json({message:err})\n        })\n\n}\nexport const unfollow = async (req, res) => {\n    if (!ObjectID.isValid(req.params.id) ) {\n        return res.status(400).send(`Id unknown : ${req.params.id}`)\n    }\n    if (!ObjectID.isValid(req.body.idToUnFollow) ) {\n        return res.status(400).send(`Id unknown : ${req.body.idToUnFollow}`)\n    }\n     //delete to the follower list\n     await User.findByIdAndUpdate(req.params.id, \n        { $pull : { following: req.body.idToUnFollow}},\n        {new : true, upsert:true})\n        .then((user) => {\n            res.status(201).json(user)\n        })\n        .catch((err) => {\n            return res.status(500).json({message:err})\n        })\n    //delete to the following list\n    await User.findByIdAndUpdate(req.body.idToUnFollow,\n        { $pull : { followers: req.params.id}},\n        {new : true, upsert:true})\n        .then((user) => {\n\n        })\n        .catch((err) => {\n            return res.status(500).json({message:err})\n        })\n\n}"]}},"mtime":1651273956019},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/mern_project_app2/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/mern_project_app2\",\"filename\":\"/Applications/dossier/mern_project_app2/src/controllers/user.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/mern_project_app2\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.updateUser = exports.unfollow = exports.getUserInfo = exports.getAllUsers = exports.follow = exports.deleteUser = void 0;\n\nconst User = require('../models/user.model');\n\nconst ObjectID = require(\"mongoose\").Types.ObjectId;\n\nconst getAllUsers = async (req, res) => {\n  //allow to receive all users without password\n  const users = await User.find().select('-password');\n  res.status(200).json(users);\n};\n\nexports.getAllUsers = getAllUsers;\n\nconst getUserInfo = async (req, res) => {\n  //if id exist in databse\n  if (!ObjectID.isValid(req.params.id)) {\n    return res.status(400).send(`Id unknown : ${req.params.id}`);\n  }\n\n  await User.findById(req.params.id).select('-password').then(user => {\n    res.status(200).json(user);\n  }).catch(err => {\n    console.log(err);\n  });\n};\n\nexports.getUserInfo = getUserInfo;\n\nconst updateUser = async (req, res) => {\n  if (!ObjectID.isValid(req.params.id)) {\n    return res.status(400).send(`Id unknown : ${req.params.id}`);\n  }\n\n  await User.findOneAndUpdate({\n    _id: req.params.id\n  }, {\n    $set: {\n      bio: req.body.bio\n    }\n  }, {\n    new: true,\n    upsert: true,\n    setDefaultsOnInsert: true\n  }).select('-password').then(user => {\n    res.status(200).json(user);\n  }).catch(err => {\n    res.status(500).json({\n      message: err\n    });\n  });\n};\n\nexports.updateUser = updateUser;\n\nconst deleteUser = async (req, res) => {\n  if (!ObjectID.isValid(req.params.id)) {\n    return res.status(400).send(`Id unknown : ${req.params.id}`);\n  }\n\n  await User.remove({\n    _id: req.params.id\n  }).exec().then(() => {\n    res.status(200).json({\n      message: 'Successfully deleted !'\n    });\n  }).catch(err => {\n    res.status(500).json({\n      message: err\n    });\n  });\n};\n\nexports.deleteUser = deleteUser;\n\nconst follow = async (req, res) => {\n  if (!ObjectID.isValid(req.params.id)) {\n    return res.status(400).send(`Id unknown : ${req.params.id}`);\n  }\n\n  if (!ObjectID.isValid(req.body.idToFollow)) {\n    return res.status(400).send(`Id unknown : ${req.body.idToFollow}`);\n  } //add to the follower list\n\n\n  await User.findByIdAndUpdate(req.params.id, {\n    $addToSet: {\n      following: req.body.idToFollow\n    }\n  }, {\n    new: true,\n    upsert: true\n  }).then(user => {\n    res.status(201).json(user);\n  }).catch(err => {\n    return res.status(500).json({\n      message: err\n    });\n  }); //add to the following list\n\n  await User.findByIdAndUpdate(req.body.idToFollow, {\n    $addToSet: {\n      followers: req.params.id\n    }\n  }, {\n    new: true,\n    upsert: true\n  }).then(user => {}).catch(err => {\n    return res.status(500).json({\n      message: err\n    });\n  });\n};\n\nexports.follow = follow;\n\nconst unfollow = async (req, res) => {\n  if (!ObjectID.isValid(req.params.id)) {\n    return res.status(400).send(`Id unknown : ${req.params.id}`);\n  }\n\n  if (!ObjectID.isValid(req.body.idToUnFollow)) {\n    return res.status(400).send(`Id unknown : ${req.body.idToUnFollow}`);\n  } //delete to the follower list\n\n\n  await User.findByIdAndUpdate(req.params.id, {\n    $pull: {\n      following: req.body.idToUnFollow\n    }\n  }, {\n    new: true,\n    upsert: true\n  }).then(user => {\n    res.status(201).json(user);\n  }).catch(err => {\n    return res.status(500).json({\n      message: err\n    });\n  }); //delete to the following list\n\n  await User.findByIdAndUpdate(req.body.idToUnFollow, {\n    $pull: {\n      followers: req.params.id\n    }\n  }, {\n    new: true,\n    upsert: true\n  }).then(user => {}).catch(err => {\n    return res.status(500).json({\n      message: err\n    });\n  });\n};\n\nexports.unfollow = unfollow;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIuY29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJVc2VyIiwicmVxdWlyZSIsIk9iamVjdElEIiwiVHlwZXMiLCJPYmplY3RJZCIsImdldEFsbFVzZXJzIiwicmVxIiwicmVzIiwidXNlcnMiLCJmaW5kIiwic2VsZWN0Iiwic3RhdHVzIiwianNvbiIsImdldFVzZXJJbmZvIiwiaXNWYWxpZCIsInBhcmFtcyIsImlkIiwic2VuZCIsImZpbmRCeUlkIiwidGhlbiIsInVzZXIiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJ1cGRhdGVVc2VyIiwiZmluZE9uZUFuZFVwZGF0ZSIsIl9pZCIsIiRzZXQiLCJiaW8iLCJib2R5IiwibmV3IiwidXBzZXJ0Iiwic2V0RGVmYXVsdHNPbkluc2VydCIsIm1lc3NhZ2UiLCJkZWxldGVVc2VyIiwicmVtb3ZlIiwiZXhlYyIsImZvbGxvdyIsImlkVG9Gb2xsb3ciLCJmaW5kQnlJZEFuZFVwZGF0ZSIsIiRhZGRUb1NldCIsImZvbGxvd2luZyIsImZvbGxvd2VycyIsInVuZm9sbG93IiwiaWRUb1VuRm9sbG93IiwiJHB1bGwiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxNQUFNQSxJQUFJLEdBQUdDLE9BQU8sQ0FBQyxzQkFBRCxDQUFwQjs7QUFDQSxNQUFNQyxRQUFRLEdBQUdELE9BQU8sQ0FBQyxVQUFELENBQVAsQ0FBb0JFLEtBQXBCLENBQTBCQyxRQUEzQzs7QUFHTyxNQUFNQyxXQUFXLEdBQUcsT0FBT0MsR0FBUCxFQUFZQyxHQUFaLEtBQW9CO0FBQzNDO0FBQ0EsUUFBTUMsS0FBSyxHQUFHLE1BQU1SLElBQUksQ0FBQ1MsSUFBTCxHQUFZQyxNQUFaLENBQW1CLFdBQW5CLENBQXBCO0FBQ0FILEVBQUFBLEdBQUcsQ0FDRUksTUFETCxDQUNZLEdBRFosRUFFS0MsSUFGTCxDQUVVSixLQUZWO0FBR0gsQ0FOTTs7OztBQVFBLE1BQU1LLFdBQVcsR0FBRyxPQUFPUCxHQUFQLEVBQVlDLEdBQVosS0FBb0I7QUFD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QyxDQUFOO0FBVUgsQ0E1Qk0iLCJzb3VyY2VSb290IjoiL0FwcGxpY2F0aW9ucy9kb3NzaWVyL21lcm5fcHJvamVjdF9hcHAyL3NyYy9jb250cm9sbGVycy8iLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBVc2VyID0gcmVxdWlyZSgnLi4vbW9kZWxzL3VzZXIubW9kZWwnKVxuY29uc3QgT2JqZWN0SUQgPSByZXF1aXJlKFwibW9uZ29vc2VcIikuVHlwZXMuT2JqZWN0SWQ7XG5cblxuZXhwb3J0IGNvbnN0IGdldEFsbFVzZXJzID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgLy9hbGxvdyB0byByZWNlaXZlIGFsbCB1c2VycyB3aXRob3V0IHBhc3N3b3JkXG4gICAgY29uc3QgdXNlcnMgPSBhd2FpdCBVc2VyLmZpbmQoKS5zZWxlY3QoJy1wYXNzd29yZCcpO1xuICAgIHJlc1xuICAgICAgICAuc3RhdHVzKDIwMClcbiAgICAgICAgLmpzb24odXNlcnMpXG59XG5cbmV4cG9ydCBjb25zdCBnZXRVc2VySW5mbyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIC8vaWYgaWQgZXhpc3QgaW4gZGF0YWJzZVxuICAgIGlmICghT2JqZWN0SUQuaXNWYWxpZChyZXEucGFyYW1zLmlkKSkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoYElkIHVua25vd24gOiAke3JlcS5wYXJhbXMuaWR9YClcbiAgICB9XG4gICAgYXdhaXQgVXNlci5maW5kQnlJZChyZXEucGFyYW1zLmlkKS5zZWxlY3QoJy1wYXNzd29yZCcpXG4gICAgICAgIC50aGVuKCh1c2VyKSA9PiB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih1c2VyKVxuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgICB9KVxufVxuXG5leHBvcnQgY29uc3QgdXBkYXRlVXNlciA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGlmICghT2JqZWN0SUQuaXNWYWxpZChyZXEucGFyYW1zLmlkKSkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoYElkIHVua25vd24gOiAke3JlcS5wYXJhbXMuaWR9YClcbiAgICB9XG4gICAgYXdhaXQgVXNlci5maW5kT25lQW5kVXBkYXRlKFxuICAgICAgICB7IF9pZDogcmVxLnBhcmFtcy5pZCB9LFxuICAgICAgICB7XG4gICAgICAgICAgICAkc2V0OiB7XG4gICAgICAgICAgICAgICAgYmlvOiByZXEuYm9keS5iaW9cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmV3OiB0cnVlLFxuICAgICAgICAgICAgdXBzZXJ0OiB0cnVlLFxuICAgICAgICAgICAgc2V0RGVmYXVsdHNPbkluc2VydDogdHJ1ZVxuICAgICAgICB9KS5zZWxlY3QoJy1wYXNzd29yZCcpLnRoZW4oKHVzZXIpID0+IHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHVzZXIpXG4gICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogZXJyIH0pXG4gICAgICAgIH0pXG59XG5cbmV4cG9ydCBjb25zdCBkZWxldGVVc2VyID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgaWYgKCFPYmplY3RJRC5pc1ZhbGlkKHJlcS5wYXJhbXMuaWQpKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZChgSWQgdW5rbm93biA6ICR7cmVxLnBhcmFtcy5pZH1gKVxuICAgIH1cbiAgICBhd2FpdCBVc2VyLnJlbW92ZSh7XG4gICAgICAgIF9pZDogcmVxLnBhcmFtcy5pZFxuICAgIH0pLmV4ZWMoKVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe21lc3NhZ2U6ICdTdWNjZXNzZnVsbHkgZGVsZXRlZCAhJ30pXG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7bWVzc2FnZTplcnJ9KVxuICAgIH0pXG59XG5leHBvcnQgY29uc3QgZm9sbG93ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgaWYgKCFPYmplY3RJRC5pc1ZhbGlkKHJlcS5wYXJhbXMuaWQpICkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoYElkIHVua25vd24gOiAke3JlcS5wYXJhbXMuaWR9YClcbiAgICB9XG4gICAgaWYgKCFPYmplY3RJRC5pc1ZhbGlkKHJlcS5ib2R5LmlkVG9Gb2xsb3cpICkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoYElkIHVua25vd24gOiAke3JlcS5ib2R5LmlkVG9Gb2xsb3d9YClcbiAgICB9XG4gICAgLy9hZGQgdG8gdGhlIGZvbGxvd2VyIGxpc3RcbiAgICBhd2FpdCBVc2VyLmZpbmRCeUlkQW5kVXBkYXRlKHJlcS5wYXJhbXMuaWQsIFxuICAgICAgICB7ICRhZGRUb1NldCA6IHsgZm9sbG93aW5nOiByZXEuYm9keS5pZFRvRm9sbG93fX0sXG4gICAgICAgIHtuZXcgOiB0cnVlLCB1cHNlcnQ6dHJ1ZX0pXG4gICAgICAgIC50aGVuKCh1c2VyKSA9PiB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih1c2VyKVxuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHttZXNzYWdlOmVycn0pXG4gICAgICAgIH0pXG4gICAgLy9hZGQgdG8gdGhlIGZvbGxvd2luZyBsaXN0XG4gICAgYXdhaXQgVXNlci5maW5kQnlJZEFuZFVwZGF0ZShyZXEuYm9keS5pZFRvRm9sbG93LFxuICAgICAgICB7ICRhZGRUb1NldCA6IHsgZm9sbG93ZXJzOiByZXEucGFyYW1zLmlkfX0sXG4gICAgICAgIHtuZXcgOiB0cnVlLCB1cHNlcnQ6dHJ1ZX0pXG4gICAgICAgIC50aGVuKCh1c2VyKSA9PiB7XG5cbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7bWVzc2FnZTplcnJ9KVxuICAgICAgICB9KVxuXG59XG5leHBvcnQgY29uc3QgdW5mb2xsb3cgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBpZiAoIU9iamVjdElELmlzVmFsaWQocmVxLnBhcmFtcy5pZCkgKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZChgSWQgdW5rbm93biA6ICR7cmVxLnBhcmFtcy5pZH1gKVxuICAgIH1cbiAgICBpZiAoIU9iamVjdElELmlzVmFsaWQocmVxLmJvZHkuaWRUb1VuRm9sbG93KSApIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKGBJZCB1bmtub3duIDogJHtyZXEuYm9keS5pZFRvVW5Gb2xsb3d9YClcbiAgICB9XG4gICAgIC8vZGVsZXRlIHRvIHRoZSBmb2xsb3dlciBsaXN0XG4gICAgIGF3YWl0IFVzZXIuZmluZEJ5SWRBbmRVcGRhdGUocmVxLnBhcmFtcy5pZCwgXG4gICAgICAgIHsgJHB1bGwgOiB7IGZvbGxvd2luZzogcmVxLmJvZHkuaWRUb1VuRm9sbG93fX0sXG4gICAgICAgIHtuZXcgOiB0cnVlLCB1cHNlcnQ6dHJ1ZX0pXG4gICAgICAgIC50aGVuKCh1c2VyKSA9PiB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih1c2VyKVxuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHttZXNzYWdlOmVycn0pXG4gICAgICAgIH0pXG4gICAgLy9kZWxldGUgdG8gdGhlIGZvbGxvd2luZyBsaXN0XG4gICAgYXdhaXQgVXNlci5maW5kQnlJZEFuZFVwZGF0ZShyZXEuYm9keS5pZFRvVW5Gb2xsb3csXG4gICAgICAgIHsgJHB1bGwgOiB7IGZvbGxvd2VyczogcmVxLnBhcmFtcy5pZH19LFxuICAgICAgICB7bmV3IDogdHJ1ZSwgdXBzZXJ0OnRydWV9KVxuICAgICAgICAudGhlbigodXNlcikgPT4ge1xuXG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe21lc3NhZ2U6ZXJyfSlcbiAgICAgICAgfSlcblxufSJdfQ==","map":{"version":3,"sources":["user.controller.js"],"names":["User","require","ObjectID","Types","ObjectId","getAllUsers","req","res","users","find","select","status","json","getUserInfo","isValid","params","id","send","findById","then","user","catch","err","console","log","updateUser","findOneAndUpdate","_id","$set","bio","body","new","upsert","setDefaultsOnInsert","message","deleteUser","remove","exec","follow","idToFollow","findByIdAndUpdate","$addToSet","following","followers","unfollow","idToUnFollow","$pull"],"mappings":"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","sourceRoot":"/Applications/dossier/mern_project_app2/src/controllers/","sourcesContent":["const User = require('../models/user.model')\nconst ObjectID = require(\"mongoose\").Types.ObjectId;\n\n\nexport const getAllUsers = async (req, res) => {\n    //allow to receive all users without password\n    const users = await User.find().select('-password');\n    res\n        .status(200)\n        .json(users)\n}\n\nexport const getUserInfo = async (req, res) => {\n    //if id exist in databse\n    if (!ObjectID.isValid(req.params.id)) {\n        return res.status(400).send(`Id unknown : ${req.params.id}`)\n    }\n    await User.findById(req.params.id).select('-password')\n        .then((user) => {\n            res.status(200).json(user)\n        })\n        .catch((err) => {\n            console.log(err)\n        })\n}\n\nexport const updateUser = async (req, res) => {\n    if (!ObjectID.isValid(req.params.id)) {\n        return res.status(400).send(`Id unknown : ${req.params.id}`)\n    }\n    await User.findOneAndUpdate(\n        { _id: req.params.id },\n        {\n            $set: {\n                bio: req.body.bio\n            }\n        },\n        {\n            new: true,\n            upsert: true,\n            setDefaultsOnInsert: true\n        }).select('-password').then((user) => {\n            res.status(200).json(user)\n        }).catch((err) => {\n            res.status(500).json({ message: err })\n        })\n}\n\nexport const deleteUser = async (req, res) => {\n    if (!ObjectID.isValid(req.params.id)) {\n        return res.status(400).send(`Id unknown : ${req.params.id}`)\n    }\n    await User.remove({\n        _id: req.params.id\n    }).exec()\n    .then(() => {\n        res.status(200).json({message: 'Successfully deleted !'})\n    })\n    .catch((err) => {\n        res.status(500).json({message:err})\n    })\n}\nexport const follow = async (req, res) => {\n    if (!ObjectID.isValid(req.params.id) ) {\n        return res.status(400).send(`Id unknown : ${req.params.id}`)\n    }\n    if (!ObjectID.isValid(req.body.idToFollow) ) {\n        return res.status(400).send(`Id unknown : ${req.body.idToFollow}`)\n    }\n    //add to the follower list\n    await User.findByIdAndUpdate(req.params.id, \n        { $addToSet : { following: req.body.idToFollow}},\n        {new : true, upsert:true})\n        .then((user) => {\n            res.status(201).json(user)\n        })\n        .catch((err) => {\n            return res.status(500).json({message:err})\n        })\n    //add to the following list\n    await User.findByIdAndUpdate(req.body.idToFollow,\n        { $addToSet : { followers: req.params.id}},\n        {new : true, upsert:true})\n        .then((user) => {\n\n        })\n        .catch((err) => {\n            return res.status(500).json({message:err})\n        })\n\n}\nexport const unfollow = async (req, res) => {\n    if (!ObjectID.isValid(req.params.id) ) {\n        return res.status(400).send(`Id unknown : ${req.params.id}`)\n    }\n    if (!ObjectID.isValid(req.body.idToUnFollow) ) {\n        return res.status(400).send(`Id unknown : ${req.body.idToUnFollow}`)\n    }\n     //delete to the follower list\n     await User.findByIdAndUpdate(req.params.id, \n        { $pull : { following: req.body.idToUnFollow}},\n        {new : true, upsert:true})\n        .then((user) => {\n            res.status(201).json(user)\n        })\n        .catch((err) => {\n            return res.status(500).json({message:err})\n        })\n    //delete to the following list\n    await User.findByIdAndUpdate(req.body.idToUnFollow,\n        { $pull : { followers: req.params.id}},\n        {new : true, upsert:true})\n        .then((user) => {\n\n        })\n        .catch((err) => {\n            return res.status(500).json({message:err})\n        })\n\n}"]}},"mtime":1651273956019},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/mern_project_app2/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/mern_project_app2\",\"filename\":\"/Applications/dossier/mern_project_app2/src/middlewares/auth.middleware.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/mern_project_app2\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.requireAuth = exports.checkUser = void 0;\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nvar _HttpException = require(\"../errors/HttpException.error\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst User = require('../models/user.model');\n\nconst checkUser = (req, res, next) => {\n  const token = req.cookies.jwt;\n\n  if (token) {\n    _jsonwebtoken.default.verify(token, process.env.TOKEN_SECRET, async (err, decodedToken) => {\n      if (err) {\n        res.locals.user = null;\n        res.cookie(\"jwt\", '', {\n          maxAge: 1\n        });\n        next();\n      } else {\n        let user = await User.findById(decodedToken.id);\n\n        if (!user) {\n          return next(new _HttpException.HttpException('Unauthorized', _HttpException.HttpStatus.UNAUTHORIZED));\n        }\n\n        res.locals.user = user;\n        next();\n      }\n    });\n  } else {\n    console.log('UNAUTORIZED');\n    res.locals.user = null;\n    next(new _HttpException.HttpException('Unauthorized', _HttpException.HttpStatus.UNAUTHORIZED));\n  }\n};\n\nexports.checkUser = checkUser;\n\nconst requireAuth = (req, res, next) => {\n  const token = req.cookies.jwt;\n\n  if (token) {\n    _jsonwebtoken.default.verify(token, process.env.TOKEN_SECRET, async (err, decodedToken) => {\n      if (err) {\n        console.log(err);\n      } else {\n        console.log(decodedToken.id);\n        next();\n      }\n    });\n  } else {\n    console.log('no token');\n  }\n};\n\nexports.requireAuth = requireAuth;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGgubWlkZGxld2FyZS5qcyJdLCJuYW1lcyI6WyJVc2VyIiwicmVxdWlyZSIsImNoZWNrVXNlciIsInJlcSIsInJlcyIsIm5leHQiLCJ0b2tlbiIsImNvb2tpZXMiLCJqd3QiLCJ2ZXJpZnkiLCJwcm9jZXNzIiwiZW52IiwiVE9LRU5fU0VDUkVUIiwiZXJyIiwiZGVjb2RlZFRva2VuIiwibG9jYWxzIiwidXNlciIsImNvb2tpZSIsIm1heEFnZSIsImZpbmRCeUlkIiwiaWQiLCJIdHRwRXhjZXB0aW9uIiwiSHR0cFN0YXR1cyIsIlVOQVVUSE9SSVpFRCIsImNvbnNvbGUiLCJsb2ciLCJyZXF1aXJlQXV0aCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUVBOzs7O0FBREEsTUFBTUEsSUFBSSxHQUFHQyxPQUFPLENBQUMsc0JBQUQsQ0FBcEI7O0FBSU8sTUFBTUMsU0FBUyxHQUFHLENBQUNDLEdBQUQsRUFBTUMsR0FBTixFQUFXQyxJQUFYLEtBQW9CO0FBQzNDLFFBQU1DLEtBQUssR0FBR0gsR0FBRyxDQUFDSSxPQUFKLENBQVlDLEdBQTFCOztBQUNBLE1BQUlGLEtBQUosRUFBVztBQUNURSwwQkFBSUMsTUFBSixDQUFXSCxLQUFYLEVBQWtCSSxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsWUFBOUIsRUFBNEMsT0FBT0MsR0FBUCxFQUFZQyxZQUFaLEtBQTZCO0FBQ3ZFLFVBQUlELEdBQUosRUFBUztBQUNQVCxRQUFBQSxHQUFHLENBQUNXLE1BQUosQ0FBV0MsSUFBWCxHQUFrQixJQUFsQjtBQUNBWixRQUFBQSxHQUFHLENBQUNhLE1BQUosQ0FBVyxLQUFYLEVBQWtCLEVBQWxCLEVBQXNCO0FBQUVDLFVBQUFBLE1BQU0sRUFBRTtBQUFWLFNBQXRCO0FBQ0FiLFFBQUFBLElBQUk7QUFDTCxPQUpELE1BSU87QUFDTCxZQUFJVyxJQUFJLEdBQUcsTUFBTWhCLElBQUksQ0FBQ21CLFFBQUwsQ0FBY0wsWUFBWSxDQUFDTSxFQUEzQixDQUFqQjs7QUFDQSxZQUFJLENBQUNKLElBQUwsRUFBVztBQUNULGlCQUFPWCxJQUFJLENBQUMsSUFBSWdCLDRCQUFKLENBQWtCLGNBQWxCLEVBQWtDQywwQkFBV0MsWUFBN0MsQ0FBRCxDQUFYO0FBQ0Q7O0FBQ0RuQixRQUFBQSxHQUFHLENBQUNXLE1BQUosQ0FBV0MsSUFBWCxHQUFrQkEsSUFBbEI7QUFDQVgsUUFBQUEsSUFBSTtBQUNMO0FBQ0YsS0FiRDtBQWNELEdBZkQsTUFnQks7QUFDSG1CLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLGFBQVo7QUFDQXJCLElBQUFBLEdBQUcsQ0FBQ1csTUFBSixDQUFXQyxJQUFYLEdBQWtCLElBQWxCO0FBQ0FYLElBQUFBLElBQUksQ0FBQyxJQUFJZ0IsNEJBQUosQ0FBa0IsY0FBbEIsRUFBa0NDLDBCQUFXQyxZQUE3QyxDQUFELENBQUo7QUFDRDtBQUNGLENBdkJNOzs7O0FBeUJBLE1BQU1HLFdBQVcsR0FBRyxDQUFDdkIsR0FBRCxFQUFNQyxHQUFOLEVBQVdDLElBQVgsS0FBb0I7QUFDN0MsUUFBTUMsS0FBSyxHQUFHSCxHQUFHLENBQUNJLE9BQUosQ0FBWUMsR0FBMUI7O0FBQ0EsTUFBSUYsS0FBSixFQUFXO0FBQ1RFLDBCQUFJQyxNQUFKLENBQVdILEtBQVgsRUFBa0JJLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxZQUE5QixFQUE0QyxPQUFPQyxHQUFQLEVBQVlDLFlBQVosS0FBNkI7QUFDdkUsVUFBR0QsR0FBSCxFQUFPO0FBQ0xXLFFBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZWixHQUFaO0FBQ0QsT0FGRCxNQUVLO0FBQ0hXLFFBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZWCxZQUFZLENBQUNNLEVBQXpCO0FBQ0FmLFFBQUFBLElBQUk7QUFDTDtBQUNGLEtBUEQ7QUFRRCxHQVRELE1BU0s7QUFDSG1CLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLFVBQVo7QUFDRDtBQUNGLENBZE0iLCJzb3VyY2VSb290IjoiL0FwcGxpY2F0aW9ucy9kb3NzaWVyL21lcm5fcHJvamVjdF9hcHAyL3NyYy9taWRkbGV3YXJlcy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbic7XG5jb25zdCBVc2VyID0gcmVxdWlyZSgnLi4vbW9kZWxzL3VzZXIubW9kZWwnKVxuaW1wb3J0IHsgSHR0cEV4Y2VwdGlvbiwgSHR0cFN0YXR1cyB9IGZyb20gJy4uL2Vycm9ycy9IdHRwRXhjZXB0aW9uLmVycm9yJztcblxuXG5leHBvcnQgY29uc3QgY2hlY2tVc2VyID0gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHRva2VuID0gcmVxLmNvb2tpZXMuand0O1xuICBpZiAodG9rZW4pIHtcbiAgICBqd3QudmVyaWZ5KHRva2VuLCBwcm9jZXNzLmVudi5UT0tFTl9TRUNSRVQsIGFzeW5jIChlcnIsIGRlY29kZWRUb2tlbikgPT4ge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXMubG9jYWxzLnVzZXIgPSBudWxsO1xuICAgICAgICByZXMuY29va2llKFwiand0XCIsICcnLCB7IG1heEFnZTogMSB9KVxuICAgICAgICBuZXh0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsZXQgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQoZGVjb2RlZFRva2VuLmlkKTtcbiAgICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgcmV0dXJuIG5leHQobmV3IEh0dHBFeGNlcHRpb24oJ1VuYXV0aG9yaXplZCcsIEh0dHBTdGF0dXMuVU5BVVRIT1JJWkVEKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmVzLmxvY2Fscy51c2VyID0gdXNlcjtcbiAgICAgICAgbmV4dCgpO1xuICAgICAgfVxuICAgIH0pXG4gIH1cbiAgZWxzZSB7XG4gICAgY29uc29sZS5sb2coJ1VOQVVUT1JJWkVEJylcbiAgICByZXMubG9jYWxzLnVzZXIgPSBudWxsO1xuICAgIG5leHQobmV3IEh0dHBFeGNlcHRpb24oJ1VuYXV0aG9yaXplZCcsIEh0dHBTdGF0dXMuVU5BVVRIT1JJWkVEKSk7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHJlcXVpcmVBdXRoID0gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHRva2VuID0gcmVxLmNvb2tpZXMuand0XG4gIGlmICh0b2tlbikge1xuICAgIGp3dC52ZXJpZnkodG9rZW4sIHByb2Nlc3MuZW52LlRPS0VOX1NFQ1JFVCwgYXN5bmMgKGVyciwgZGVjb2RlZFRva2VuKSA9PiB7XG4gICAgICBpZihlcnIpe1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfWVsc2V7XG4gICAgICAgIGNvbnNvbGUubG9nKGRlY29kZWRUb2tlbi5pZClcbiAgICAgICAgbmV4dCgpO1xuICAgICAgfVxuICAgIH0pXG4gIH1lbHNle1xuICAgIGNvbnNvbGUubG9nKCdubyB0b2tlbicpXG4gIH1cbn1cbiJdfQ==","map":{"version":3,"sources":["auth.middleware.js"],"names":["User","require","checkUser","req","res","next","token","cookies","jwt","verify","process","env","TOKEN_SECRET","err","decodedToken","locals","user","cookie","maxAge","findById","id","HttpException","HttpStatus","UNAUTHORIZED","console","log","requireAuth"],"mappings":";;;;;;;AAAA;;AAEA;;;;AADA,MAAMA,IAAI,GAAGC,OAAO,CAAC,sBAAD,CAApB;;AAIO,MAAMC,SAAS,GAAG,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AAC3C,QAAMC,KAAK,GAAGH,GAAG,CAACI,OAAJ,CAAYC,GAA1B;;AACA,MAAIF,KAAJ,EAAW;AACTE,0BAAIC,MAAJ,CAAWH,KAAX,EAAkBI,OAAO,CAACC,GAAR,CAAYC,YAA9B,EAA4C,OAAOC,GAAP,EAAYC,YAAZ,KAA6B;AACvE,UAAID,GAAJ,EAAS;AACPT,QAAAA,GAAG,CAACW,MAAJ,CAAWC,IAAX,GAAkB,IAAlB;AACAZ,QAAAA,GAAG,CAACa,MAAJ,CAAW,KAAX,EAAkB,EAAlB,EAAsB;AAAEC,UAAAA,MAAM,EAAE;AAAV,SAAtB;AACAb,QAAAA,IAAI;AACL,OAJD,MAIO;AACL,YAAIW,IAAI,GAAG,MAAMhB,IAAI,CAACmB,QAAL,CAAcL,YAAY,CAACM,EAA3B,CAAjB;;AACA,YAAI,CAACJ,IAAL,EAAW;AACT,iBAAOX,IAAI,CAAC,IAAIgB,4BAAJ,CAAkB,cAAlB,EAAkCC,0BAAWC,YAA7C,CAAD,CAAX;AACD;;AACDnB,QAAAA,GAAG,CAACW,MAAJ,CAAWC,IAAX,GAAkBA,IAAlB;AACAX,QAAAA,IAAI;AACL;AACF,KAbD;AAcD,GAfD,MAgBK;AACHmB,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AACArB,IAAAA,GAAG,CAACW,MAAJ,CAAWC,IAAX,GAAkB,IAAlB;AACAX,IAAAA,IAAI,CAAC,IAAIgB,4BAAJ,CAAkB,cAAlB,EAAkCC,0BAAWC,YAA7C,CAAD,CAAJ;AACD;AACF,CAvBM;;;;AAyBA,MAAMG,WAAW,GAAG,CAACvB,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AAC7C,QAAMC,KAAK,GAAGH,GAAG,CAACI,OAAJ,CAAYC,GAA1B;;AACA,MAAIF,KAAJ,EAAW;AACTE,0BAAIC,MAAJ,CAAWH,KAAX,EAAkBI,OAAO,CAACC,GAAR,CAAYC,YAA9B,EAA4C,OAAOC,GAAP,EAAYC,YAAZ,KAA6B;AACvE,UAAGD,GAAH,EAAO;AACLW,QAAAA,OAAO,CAACC,GAAR,CAAYZ,GAAZ;AACD,OAFD,MAEK;AACHW,QAAAA,OAAO,CAACC,GAAR,CAAYX,YAAY,CAACM,EAAzB;AACAf,QAAAA,IAAI;AACL;AACF,KAPD;AAQD,GATD,MASK;AACHmB,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACD;AACF,CAdM","sourceRoot":"/Applications/dossier/mern_project_app2/src/middlewares/","sourcesContent":["import jwt from 'jsonwebtoken';\nconst User = require('../models/user.model')\nimport { HttpException, HttpStatus } from '../errors/HttpException.error';\n\n\nexport const checkUser = (req, res, next) => {\n  const token = req.cookies.jwt;\n  if (token) {\n    jwt.verify(token, process.env.TOKEN_SECRET, async (err, decodedToken) => {\n      if (err) {\n        res.locals.user = null;\n        res.cookie(\"jwt\", '', { maxAge: 1 })\n        next();\n      } else {\n        let user = await User.findById(decodedToken.id);\n        if (!user) {\n          return next(new HttpException('Unauthorized', HttpStatus.UNAUTHORIZED));\n        }\n        res.locals.user = user;\n        next();\n      }\n    })\n  }\n  else {\n    console.log('UNAUTORIZED')\n    res.locals.user = null;\n    next(new HttpException('Unauthorized', HttpStatus.UNAUTHORIZED));\n  }\n}\n\nexport const requireAuth = (req, res, next) => {\n  const token = req.cookies.jwt\n  if (token) {\n    jwt.verify(token, process.env.TOKEN_SECRET, async (err, decodedToken) => {\n      if(err){\n        console.log(err);\n      }else{\n        console.log(decodedToken.id)\n        next();\n      }\n    })\n  }else{\n    console.log('no token')\n  }\n}\n"]}},"mtime":1651272427447},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/mern_project_app2/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/mern_project_app2\",\"filename\":\"/Applications/dossier/mern_project_app2/src/middlewares/auth.middleware.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/mern_project_app2\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.requireAuth = exports.checkUser = void 0;\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nvar _HttpException = require(\"../errors/HttpException.error\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst User = require('../models/user.model');\n\nconst checkUser = (req, res, next) => {\n  const token = req.cookies.jwt;\n\n  if (token) {\n    _jsonwebtoken.default.verify(token, process.env.TOKEN_SECRET, async (err, decodedToken) => {\n      if (err) {\n        res.locals.user = null;\n        res.cookie(\"jwt\", '', {\n          maxAge: 1\n        });\n        next();\n      } else {\n        let user = await User.findById(decodedToken.id);\n\n        if (!user) {\n          return next(new _HttpException.HttpException('Unauthorized', _HttpException.HttpStatus.UNAUTHORIZED));\n        }\n\n        res.locals.user = user;\n        next();\n      }\n    });\n  } else {\n    console.log('UNAUTORIZED');\n    res.locals.user = null;\n    next(new _HttpException.HttpException('Unauthorized', _HttpException.HttpStatus.UNAUTHORIZED));\n  }\n};\n\nexports.checkUser = checkUser;\n\nconst requireAuth = (req, res, next) => {\n  const token = req.cookies.jwt;\n\n  if (token) {\n    _jsonwebtoken.default.verify(token, process.env.TOKEN_SECRET, async (err, decodedToken) => {\n      if (err) {\n        console.log(err);\n      } else {\n        console.log(decodedToken.id);\n        next();\n      }\n    });\n  } else {\n    console.log('no token');\n  }\n};\n\nexports.requireAuth = requireAuth;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGgubWlkZGxld2FyZS5qcyJdLCJuYW1lcyI6WyJVc2VyIiwicmVxdWlyZSIsImNoZWNrVXNlciIsInJlcSIsInJlcyIsIm5leHQiLCJ0b2tlbiIsImNvb2tpZXMiLCJqd3QiLCJ2ZXJpZnkiLCJwcm9jZXNzIiwiZW52IiwiVE9LRU5fU0VDUkVUIiwiZXJyIiwiZGVjb2RlZFRva2VuIiwibG9jYWxzIiwidXNlciIsImNvb2tpZSIsIm1heEFnZSIsImZpbmRCeUlkIiwiaWQiLCJIdHRwRXhjZXB0aW9uIiwiSHR0cFN0YXR1cyIsIlVOQVVUSE9SSVpFRCIsImNvbnNvbGUiLCJsb2ciLCJyZXF1aXJlQXV0aCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUVBOzs7O0FBREEsTUFBTUEsSUFBSSxHQUFHQyxPQUFPLENBQUMsc0JBQUQsQ0FBcEI7O0FBSU8sTUFBTUMsU0FBUyxHQUFHLENBQUNDLEdBQUQsRUFBTUMsR0FBTixFQUFXQyxJQUFYLEtBQW9CO0FBQzNDLFFBQU1DLEtBQUssR0FBR0gsR0FBRyxDQUFDSSxPQUFKLENBQVlDLEdBQTFCOztBQUNBLE1BQUlGLEtBQUosRUFBVztBQUNURSwwQkFBSUMsTUFBSixDQUFXSCxLQUFYLEVBQWtCSSxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsWUFBOUIsRUFBNEMsT0FBT0MsR0FBUCxFQUFZQyxZQUFaLEtBQTZCO0FBQ3ZFLFVBQUlELEdBQUosRUFBUztBQUNQVCxRQUFBQSxHQUFHLENBQUNXLE1BQUosQ0FBV0MsSUFBWCxHQUFrQixJQUFsQjtBQUNBWixRQUFBQSxHQUFHLENBQUNhLE1BQUosQ0FBVyxLQUFYLEVBQWtCLEVBQWxCLEVBQXNCO0FBQUVDLFVBQUFBLE1BQU0sRUFBRTtBQUFWLFNBQXRCO0FBQ0FiLFFBQUFBLElBQUk7QUFDTCxPQUpELE1BSU87QUFDTCxZQUFJVyxJQUFJLEdBQUcsTUFBTWhCLElBQUksQ0FBQ21CLFFBQUwsQ0FBY0wsWUFBWSxDQUFDTSxFQUEzQixDQUFqQjs7QUFDQSxZQUFJLENBQUNKLElBQUwsRUFBVztBQUNULGlCQUFPWCxJQUFJLENBQUMsSUFBSWdCLDRCQUFKLENBQWtCLGNBQWxCLEVBQWtDQywwQkFBV0MsWUFBN0MsQ0FBRCxDQUFYO0FBQ0Q7O0FBQ0RuQixRQUFBQSxHQUFHLENBQUNXLE1BQUosQ0FBV0MsSUFBWCxHQUFrQkEsSUFBbEI7QUFDQVgsUUFBQUEsSUFBSTtBQUNMO0FBQ0YsS0FiRDtBQWNELEdBZkQsTUFnQks7QUFDSG1CLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLGFBQVo7QUFDQXJCLElBQUFBLEdBQUcsQ0FBQ1csTUFBSixDQUFXQyxJQUFYLEdBQWtCLElBQWxCO0FBQ0FYLElBQUFBLElBQUksQ0FBQyxJQUFJZ0IsNEJBQUosQ0FBa0IsY0FBbEIsRUFBa0NDLDBCQUFXQyxZQUE3QyxDQUFELENBQUo7QUFDRDtBQUNGLENBdkJNOzs7O0FBeUJBLE1BQU1HLFdBQVcsR0FBRyxDQUFDdkIsR0FBRCxFQUFNQyxHQUFOLEVBQVdDLElBQVgsS0FBb0I7QUFDN0MsUUFBTUMsS0FBSyxHQUFHSCxHQUFHLENBQUNJLE9BQUosQ0FBWUMsR0FBMUI7O0FBQ0EsTUFBSUYsS0FBSixFQUFXO0FBQ1RFLDBCQUFJQyxNQUFKLENBQVdILEtBQVgsRUFBa0JJLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxZQUE5QixFQUE0QyxPQUFPQyxHQUFQLEVBQVlDLFlBQVosS0FBNkI7QUFDdkUsVUFBR0QsR0FBSCxFQUFPO0FBQ0xXLFFBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZWixHQUFaO0FBQ0QsT0FGRCxNQUVLO0FBQ0hXLFFBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZWCxZQUFZLENBQUNNLEVBQXpCO0FBQ0FmLFFBQUFBLElBQUk7QUFDTDtBQUNGLEtBUEQ7QUFRRCxHQVRELE1BU0s7QUFDSG1CLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLFVBQVo7QUFDRDtBQUNGLENBZE0iLCJzb3VyY2VSb290IjoiL0FwcGxpY2F0aW9ucy9kb3NzaWVyL21lcm5fcHJvamVjdF9hcHAyL3NyYy9taWRkbGV3YXJlcy8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbic7XG5jb25zdCBVc2VyID0gcmVxdWlyZSgnLi4vbW9kZWxzL3VzZXIubW9kZWwnKVxuaW1wb3J0IHsgSHR0cEV4Y2VwdGlvbiwgSHR0cFN0YXR1cyB9IGZyb20gJy4uL2Vycm9ycy9IdHRwRXhjZXB0aW9uLmVycm9yJztcblxuXG5leHBvcnQgY29uc3QgY2hlY2tVc2VyID0gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHRva2VuID0gcmVxLmNvb2tpZXMuand0O1xuICBpZiAodG9rZW4pIHtcbiAgICBqd3QudmVyaWZ5KHRva2VuLCBwcm9jZXNzLmVudi5UT0tFTl9TRUNSRVQsIGFzeW5jIChlcnIsIGRlY29kZWRUb2tlbikgPT4ge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXMubG9jYWxzLnVzZXIgPSBudWxsO1xuICAgICAgICByZXMuY29va2llKFwiand0XCIsICcnLCB7IG1heEFnZTogMSB9KVxuICAgICAgICBuZXh0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsZXQgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQoZGVjb2RlZFRva2VuLmlkKTtcbiAgICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgcmV0dXJuIG5leHQobmV3IEh0dHBFeGNlcHRpb24oJ1VuYXV0aG9yaXplZCcsIEh0dHBTdGF0dXMuVU5BVVRIT1JJWkVEKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmVzLmxvY2Fscy51c2VyID0gdXNlcjtcbiAgICAgICAgbmV4dCgpO1xuICAgICAgfVxuICAgIH0pXG4gIH1cbiAgZWxzZSB7XG4gICAgY29uc29sZS5sb2coJ1VOQVVUT1JJWkVEJylcbiAgICByZXMubG9jYWxzLnVzZXIgPSBudWxsO1xuICAgIG5leHQobmV3IEh0dHBFeGNlcHRpb24oJ1VuYXV0aG9yaXplZCcsIEh0dHBTdGF0dXMuVU5BVVRIT1JJWkVEKSk7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHJlcXVpcmVBdXRoID0gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHRva2VuID0gcmVxLmNvb2tpZXMuand0XG4gIGlmICh0b2tlbikge1xuICAgIGp3dC52ZXJpZnkodG9rZW4sIHByb2Nlc3MuZW52LlRPS0VOX1NFQ1JFVCwgYXN5bmMgKGVyciwgZGVjb2RlZFRva2VuKSA9PiB7XG4gICAgICBpZihlcnIpe1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfWVsc2V7XG4gICAgICAgIGNvbnNvbGUubG9nKGRlY29kZWRUb2tlbi5pZClcbiAgICAgICAgbmV4dCgpO1xuICAgICAgfVxuICAgIH0pXG4gIH1lbHNle1xuICAgIGNvbnNvbGUubG9nKCdubyB0b2tlbicpXG4gIH1cbn1cbiJdfQ==","map":{"version":3,"sources":["auth.middleware.js"],"names":["User","require","checkUser","req","res","next","token","cookies","jwt","verify","process","env","TOKEN_SECRET","err","decodedToken","locals","user","cookie","maxAge","findById","id","HttpException","HttpStatus","UNAUTHORIZED","console","log","requireAuth"],"mappings":";;;;;;;AAAA;;AAEA;;;;AADA,MAAMA,IAAI,GAAGC,OAAO,CAAC,sBAAD,CAApB;;AAIO,MAAMC,SAAS,GAAG,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AAC3C,QAAMC,KAAK,GAAGH,GAAG,CAACI,OAAJ,CAAYC,GAA1B;;AACA,MAAIF,KAAJ,EAAW;AACTE,0BAAIC,MAAJ,CAAWH,KAAX,EAAkBI,OAAO,CAACC,GAAR,CAAYC,YAA9B,EAA4C,OAAOC,GAAP,EAAYC,YAAZ,KAA6B;AACvE,UAAID,GAAJ,EAAS;AACPT,QAAAA,GAAG,CAACW,MAAJ,CAAWC,IAAX,GAAkB,IAAlB;AACAZ,QAAAA,GAAG,CAACa,MAAJ,CAAW,KAAX,EAAkB,EAAlB,EAAsB;AAAEC,UAAAA,MAAM,EAAE;AAAV,SAAtB;AACAb,QAAAA,IAAI;AACL,OAJD,MAIO;AACL,YAAIW,IAAI,GAAG,MAAMhB,IAAI,CAACmB,QAAL,CAAcL,YAAY,CAACM,EAA3B,CAAjB;;AACA,YAAI,CAACJ,IAAL,EAAW;AACT,iBAAOX,IAAI,CAAC,IAAIgB,4BAAJ,CAAkB,cAAlB,EAAkCC,0BAAWC,YAA7C,CAAD,CAAX;AACD;;AACDnB,QAAAA,GAAG,CAACW,MAAJ,CAAWC,IAAX,GAAkBA,IAAlB;AACAX,QAAAA,IAAI;AACL;AACF,KAbD;AAcD,GAfD,MAgBK;AACHmB,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AACArB,IAAAA,GAAG,CAACW,MAAJ,CAAWC,IAAX,GAAkB,IAAlB;AACAX,IAAAA,IAAI,CAAC,IAAIgB,4BAAJ,CAAkB,cAAlB,EAAkCC,0BAAWC,YAA7C,CAAD,CAAJ;AACD;AACF,CAvBM;;;;AAyBA,MAAMG,WAAW,GAAG,CAACvB,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AAC7C,QAAMC,KAAK,GAAGH,GAAG,CAACI,OAAJ,CAAYC,GAA1B;;AACA,MAAIF,KAAJ,EAAW;AACTE,0BAAIC,MAAJ,CAAWH,KAAX,EAAkBI,OAAO,CAACC,GAAR,CAAYC,YAA9B,EAA4C,OAAOC,GAAP,EAAYC,YAAZ,KAA6B;AACvE,UAAGD,GAAH,EAAO;AACLW,QAAAA,OAAO,CAACC,GAAR,CAAYZ,GAAZ;AACD,OAFD,MAEK;AACHW,QAAAA,OAAO,CAACC,GAAR,CAAYX,YAAY,CAACM,EAAzB;AACAf,QAAAA,IAAI;AACL;AACF,KAPD;AAQD,GATD,MASK;AACHmB,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACD;AACF,CAdM","sourceRoot":"/Applications/dossier/mern_project_app2/src/middlewares/","sourcesContent":["import jwt from 'jsonwebtoken';\nconst User = require('../models/user.model')\nimport { HttpException, HttpStatus } from '../errors/HttpException.error';\n\n\nexport const checkUser = (req, res, next) => {\n  const token = req.cookies.jwt;\n  if (token) {\n    jwt.verify(token, process.env.TOKEN_SECRET, async (err, decodedToken) => {\n      if (err) {\n        res.locals.user = null;\n        res.cookie(\"jwt\", '', { maxAge: 1 })\n        next();\n      } else {\n        let user = await User.findById(decodedToken.id);\n        if (!user) {\n          return next(new HttpException('Unauthorized', HttpStatus.UNAUTHORIZED));\n        }\n        res.locals.user = user;\n        next();\n      }\n    })\n  }\n  else {\n    console.log('UNAUTORIZED')\n    res.locals.user = null;\n    next(new HttpException('Unauthorized', HttpStatus.UNAUTHORIZED));\n  }\n}\n\nexport const requireAuth = (req, res, next) => {\n  const token = req.cookies.jwt\n  if (token) {\n    jwt.verify(token, process.env.TOKEN_SECRET, async (err, decodedToken) => {\n      if(err){\n        console.log(err);\n      }else{\n        console.log(decodedToken.id)\n        next();\n      }\n    })\n  }else{\n    console.log('no token')\n  }\n}\n"]}},"mtime":1651272427447},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/mern_project_app2/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/mern_project_app2\",\"filename\":\"/Applications/dossier/mern_project_app2/src/middlewares/jwt.middleware.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/mern_project_app2\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.jwtMiddleware = void 0;\n\nvar _express = require(\"express\");\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nvar _HttpException = require(\"../errors/HttpException.error\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst User = require('../models/user.model');\n\nconst jwtMiddleware = (req, res, next) => {\n  async (req, _res, next) => {\n    console.log('jwtMiddleware');\n    const token = req.cookies.jwt;\n\n    if (token) {\n      const {\n        id\n      } = _jsonwebtoken.default.verify(token, process.env.TOKEN_SECRET);\n\n      let user = await User.findById(id);\n\n      if (!user) {\n        return next(new _HttpException.HttpException('Unauthorized', _HttpException.HttpStatus.UNAUTHORIZED));\n      }\n\n      _express.request.user = user;\n      next();\n    } else {\n      next(new _HttpException.HttpException('Unauthorized', _HttpException.HttpStatus.UNAUTHORIZED));\n    }\n  };\n};\n\nexports.jwtMiddleware = jwtMiddleware;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImp3dC5taWRkbGV3YXJlLmpzIl0sIm5hbWVzIjpbIlVzZXIiLCJyZXF1aXJlIiwiand0TWlkZGxld2FyZSIsInJlcSIsInJlcyIsIm5leHQiLCJfcmVzIiwiY29uc29sZSIsImxvZyIsInRva2VuIiwiY29va2llcyIsImp3dCIsImlkIiwidmVyaWZ5IiwicHJvY2VzcyIsImVudiIsIlRPS0VOX1NFQ1JFVCIsInVzZXIiLCJmaW5kQnlJZCIsIkh0dHBFeGNlcHRpb24iLCJIdHRwU3RhdHVzIiwiVU5BVVRIT1JJWkVEIiwicmVxdWVzdCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOzs7O0FBQ0EsTUFBTUEsSUFBSSxHQUFHQyxPQUFPLENBQUMsc0JBQUQsQ0FBcEI7O0FBRU8sTUFBTUMsYUFBYSxHQUFHLENBQUNDLEdBQUQsRUFBTUMsR0FBTixFQUFXQyxJQUFYLEtBQW9CO0FBQy9DLFNBQU9GLEdBQVAsRUFBWUcsSUFBWixFQUFrQkQsSUFBbEIsS0FBMkI7QUFDM0JFLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLGVBQVo7QUFDQSxVQUFNQyxLQUFLLEdBQUdOLEdBQUcsQ0FBQ08sT0FBSixDQUFZQyxHQUExQjs7QUFDQSxRQUFJRixLQUFKLEVBQVc7QUFDVCxZQUFNO0FBQUVHLFFBQUFBO0FBQUYsVUFBU0Qsc0JBQUlFLE1BQUosQ0FBV0osS0FBWCxFQUFrQkssT0FBTyxDQUFDQyxHQUFSLENBQVlDLFlBQTlCLENBQWY7O0FBQ0EsVUFBSUMsSUFBSSxHQUFHLE1BQU1qQixJQUFJLENBQUNrQixRQUFMLENBQWNOLEVBQWQsQ0FBakI7O0FBQ0EsVUFBSSxDQUFDSyxJQUFMLEVBQVc7QUFDVCxlQUFPWixJQUFJLENBQUMsSUFBSWMsNEJBQUosQ0FBa0IsY0FBbEIsRUFBa0NDLDBCQUFXQyxZQUE3QyxDQUFELENBQVg7QUFDRDs7QUFDREMsdUJBQVFMLElBQVIsR0FBZUEsSUFBZjtBQUNBWixNQUFBQSxJQUFJO0FBQ0wsS0FSRCxNQVFLO0FBQ0hBLE1BQUFBLElBQUksQ0FBQyxJQUFJYyw0QkFBSixDQUFrQixjQUFsQixFQUFrQ0MsMEJBQVdDLFlBQTdDLENBQUQsQ0FBSjtBQUNEO0FBQ0YsR0FkQztBQWVDLENBaEJJIiwic291cmNlUm9vdCI6Ii9BcHBsaWNhdGlvbnMvZG9zc2llci9tZXJuX3Byb2plY3RfYXBwMi9zcmMvbWlkZGxld2FyZXMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcmVxdWVzdCB9IGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xuaW1wb3J0IHsgSHR0cEV4Y2VwdGlvbiwgSHR0cFN0YXR1cyB9IGZyb20gJy4uL2Vycm9ycy9IdHRwRXhjZXB0aW9uLmVycm9yJztcbmNvbnN0IFVzZXIgPSByZXF1aXJlKCcuLi9tb2RlbHMvdXNlci5tb2RlbCcpXG5cbmV4cG9ydCBjb25zdCBqd3RNaWRkbGV3YXJlID0gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGFzeW5jIChyZXEsIF9yZXMsIG5leHQpID0+IHtcbiAgY29uc29sZS5sb2coJ2p3dE1pZGRsZXdhcmUnKVxuICBjb25zdCB0b2tlbiA9IHJlcS5jb29raWVzLmp3dDtcbiAgaWYgKHRva2VuKSB7XG4gICAgY29uc3QgeyBpZCB9ID0gand0LnZlcmlmeSh0b2tlbiwgcHJvY2Vzcy5lbnYuVE9LRU5fU0VDUkVUKVxuICAgIGxldCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZChpZCk7XG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICByZXR1cm4gbmV4dChuZXcgSHR0cEV4Y2VwdGlvbignVW5hdXRob3JpemVkJywgSHR0cFN0YXR1cy5VTkFVVEhPUklaRUQpKTtcbiAgICB9XG4gICAgcmVxdWVzdC51c2VyID0gdXNlcjtcbiAgICBuZXh0KCk7XG4gIH1lbHNle1xuICAgIG5leHQobmV3IEh0dHBFeGNlcHRpb24oJ1VuYXV0aG9yaXplZCcsIEh0dHBTdGF0dXMuVU5BVVRIT1JJWkVEKSk7XG4gIH1cbn1cbiAgfVxuXG4iXX0=","map":{"version":3,"sources":["jwt.middleware.js"],"names":["User","require","jwtMiddleware","req","res","next","_res","console","log","token","cookies","jwt","id","verify","process","env","TOKEN_SECRET","user","findById","HttpException","HttpStatus","UNAUTHORIZED","request"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AACA,MAAMA,IAAI,GAAGC,OAAO,CAAC,sBAAD,CAApB;;AAEO,MAAMC,aAAa,GAAG,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AAC/C,SAAOF,GAAP,EAAYG,IAAZ,EAAkBD,IAAlB,KAA2B;AAC3BE,IAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACA,UAAMC,KAAK,GAAGN,GAAG,CAACO,OAAJ,CAAYC,GAA1B;;AACA,QAAIF,KAAJ,EAAW;AACT,YAAM;AAAEG,QAAAA;AAAF,UAASD,sBAAIE,MAAJ,CAAWJ,KAAX,EAAkBK,OAAO,CAACC,GAAR,CAAYC,YAA9B,CAAf;;AACA,UAAIC,IAAI,GAAG,MAAMjB,IAAI,CAACkB,QAAL,CAAcN,EAAd,CAAjB;;AACA,UAAI,CAACK,IAAL,EAAW;AACT,eAAOZ,IAAI,CAAC,IAAIc,4BAAJ,CAAkB,cAAlB,EAAkCC,0BAAWC,YAA7C,CAAD,CAAX;AACD;;AACDC,uBAAQL,IAAR,GAAeA,IAAf;AACAZ,MAAAA,IAAI;AACL,KARD,MAQK;AACHA,MAAAA,IAAI,CAAC,IAAIc,4BAAJ,CAAkB,cAAlB,EAAkCC,0BAAWC,YAA7C,CAAD,CAAJ;AACD;AACF,GAdC;AAeC,CAhBI","sourceRoot":"/Applications/dossier/mern_project_app2/src/middlewares/","sourcesContent":["import { request } from 'express';\nimport jwt from 'jsonwebtoken';\nimport { HttpException, HttpStatus } from '../errors/HttpException.error';\nconst User = require('../models/user.model')\n\nexport const jwtMiddleware = (req, res, next) => {\n  async (req, _res, next) => {\n  console.log('jwtMiddleware')\n  const token = req.cookies.jwt;\n  if (token) {\n    const { id } = jwt.verify(token, process.env.TOKEN_SECRET)\n    let user = await User.findById(id);\n    if (!user) {\n      return next(new HttpException('Unauthorized', HttpStatus.UNAUTHORIZED));\n    }\n    request.user = user;\n    next();\n  }else{\n    next(new HttpException('Unauthorized', HttpStatus.UNAUTHORIZED));\n  }\n}\n  }\n\n"]}},"mtime":1651272395940},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/mern_project_app2/src/errors/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/mern_project_app2\",\"filename\":\"/Applications/dossier/mern_project_app2/src/errors/HttpException.error.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/mern_project_app2\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.HttpStatus = exports.HttpException = void 0;\nconst HttpStatus = {\n  UNAUTHORIZED: 401,\n  NOT_FOUND: 404\n};\nexports.HttpStatus = HttpStatus;\n\nclass HttpException extends Error {\n  constructor(message, statusCode) {\n    super(message);\n    this.statusCode = statusCode;\n  }\n\n}\n\nexports.HttpException = HttpException;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkh0dHBFeGNlcHRpb24uZXJyb3IuanMiXSwibmFtZXMiOlsiSHR0cFN0YXR1cyIsIlVOQVVUSE9SSVpFRCIsIk5PVF9GT1VORCIsIkh0dHBFeGNlcHRpb24iLCJFcnJvciIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsInN0YXR1c0NvZGUiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFPLE1BQU1BLFVBQVUsR0FBRztBQUN4QkMsRUFBQUEsWUFBWSxFQUFFLEdBRFU7QUFFeEJDLEVBQUFBLFNBQVMsRUFBRTtBQUZhLENBQW5COzs7QUFLQSxNQUFNQyxhQUFOLFNBQTRCQyxLQUE1QixDQUFrQztBQUN2Q0MsRUFBQUEsV0FBVyxDQUFDQyxPQUFELEVBQVVDLFVBQVYsRUFBc0I7QUFDL0IsVUFBTUQsT0FBTjtBQUVBLFNBQUtDLFVBQUwsR0FBa0JBLFVBQWxCO0FBQ0Q7O0FBTHNDIiwic291cmNlUm9vdCI6Ii9BcHBsaWNhdGlvbnMvZG9zc2llci9tZXJuX3Byb2plY3RfYXBwMi9zcmMvZXJyb3JzLyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBIdHRwU3RhdHVzID0ge1xuICBVTkFVVEhPUklaRUQ6IDQwMSxcbiAgTk9UX0ZPVU5EOiA0MDQsXG59XG5cbmV4cG9ydCBjbGFzcyBIdHRwRXhjZXB0aW9uIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBzdGF0dXNDb2RlKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG5cbiAgICB0aGlzLnN0YXR1c0NvZGUgPSBzdGF0dXNDb2RlO1xuICB9XG59XG4iXX0=","map":{"version":3,"sources":["HttpException.error.js"],"names":["HttpStatus","UNAUTHORIZED","NOT_FOUND","HttpException","Error","constructor","message","statusCode"],"mappings":";;;;;;AAAO,MAAMA,UAAU,GAAG;AACxBC,EAAAA,YAAY,EAAE,GADU;AAExBC,EAAAA,SAAS,EAAE;AAFa,CAAnB;;;AAKA,MAAMC,aAAN,SAA4BC,KAA5B,CAAkC;AACvCC,EAAAA,WAAW,CAACC,OAAD,EAAUC,UAAV,EAAsB;AAC/B,UAAMD,OAAN;AAEA,SAAKC,UAAL,GAAkBA,UAAlB;AACD;;AALsC","sourceRoot":"/Applications/dossier/mern_project_app2/src/errors/","sourcesContent":["export const HttpStatus = {\n  UNAUTHORIZED: 401,\n  NOT_FOUND: 404,\n}\n\nexport class HttpException extends Error {\n  constructor(message, statusCode) {\n    super(message);\n\n    this.statusCode = statusCode;\n  }\n}\n"]}},"mtime":1651253219660},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/mern_project_app2/src/middlewares/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/mern_project_app2\",\"filename\":\"/Applications/dossier/mern_project_app2/src/middlewares/jwt.middleware.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/mern_project_app2\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.jwtMiddleware = void 0;\n\nvar _express = require(\"express\");\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nvar _HttpException = require(\"../errors/HttpException.error\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst User = require('../models/user.model');\n\nconst jwtMiddleware = (req, res, next) => {\n  async (req, _res, next) => {\n    console.log('jwtMiddleware');\n    const token = req.cookies.jwt;\n\n    if (token) {\n      const {\n        id\n      } = _jsonwebtoken.default.verify(token, process.env.TOKEN_SECRET);\n\n      let user = await User.findById(id);\n\n      if (!user) {\n        return next(new _HttpException.HttpException('Unauthorized', _HttpException.HttpStatus.UNAUTHORIZED));\n      }\n\n      _express.request.user = user;\n      next();\n    } else {\n      next(new _HttpException.HttpException('Unauthorized', _HttpException.HttpStatus.UNAUTHORIZED));\n    }\n  };\n};\n\nexports.jwtMiddleware = jwtMiddleware;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImp3dC5taWRkbGV3YXJlLmpzIl0sIm5hbWVzIjpbIlVzZXIiLCJyZXF1aXJlIiwiand0TWlkZGxld2FyZSIsInJlcSIsInJlcyIsIm5leHQiLCJfcmVzIiwiY29uc29sZSIsImxvZyIsInRva2VuIiwiY29va2llcyIsImp3dCIsImlkIiwidmVyaWZ5IiwicHJvY2VzcyIsImVudiIsIlRPS0VOX1NFQ1JFVCIsInVzZXIiLCJmaW5kQnlJZCIsIkh0dHBFeGNlcHRpb24iLCJIdHRwU3RhdHVzIiwiVU5BVVRIT1JJWkVEIiwicmVxdWVzdCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOzs7O0FBQ0EsTUFBTUEsSUFBSSxHQUFHQyxPQUFPLENBQUMsc0JBQUQsQ0FBcEI7O0FBRU8sTUFBTUMsYUFBYSxHQUFHLENBQUNDLEdBQUQsRUFBTUMsR0FBTixFQUFXQyxJQUFYLEtBQW9CO0FBQy9DLFNBQU9GLEdBQVAsRUFBWUcsSUFBWixFQUFrQkQsSUFBbEIsS0FBMkI7QUFDM0JFLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLGVBQVo7QUFDQSxVQUFNQyxLQUFLLEdBQUdOLEdBQUcsQ0FBQ08sT0FBSixDQUFZQyxHQUExQjs7QUFDQSxRQUFJRixLQUFKLEVBQVc7QUFDVCxZQUFNO0FBQUVHLFFBQUFBO0FBQUYsVUFBU0Qsc0JBQUlFLE1BQUosQ0FBV0osS0FBWCxFQUFrQkssT0FBTyxDQUFDQyxHQUFSLENBQVlDLFlBQTlCLENBQWY7O0FBQ0EsVUFBSUMsSUFBSSxHQUFHLE1BQU1qQixJQUFJLENBQUNrQixRQUFMLENBQWNOLEVBQWQsQ0FBakI7O0FBQ0EsVUFBSSxDQUFDSyxJQUFMLEVBQVc7QUFDVCxlQUFPWixJQUFJLENBQUMsSUFBSWMsNEJBQUosQ0FBa0IsY0FBbEIsRUFBa0NDLDBCQUFXQyxZQUE3QyxDQUFELENBQVg7QUFDRDs7QUFDREMsdUJBQVFMLElBQVIsR0FBZUEsSUFBZjtBQUNBWixNQUFBQSxJQUFJO0FBQ0wsS0FSRCxNQVFLO0FBQ0hBLE1BQUFBLElBQUksQ0FBQyxJQUFJYyw0QkFBSixDQUFrQixjQUFsQixFQUFrQ0MsMEJBQVdDLFlBQTdDLENBQUQsQ0FBSjtBQUNEO0FBQ0YsR0FkQztBQWVDLENBaEJJIiwic291cmNlUm9vdCI6Ii9BcHBsaWNhdGlvbnMvZG9zc2llci9tZXJuX3Byb2plY3RfYXBwMi9zcmMvbWlkZGxld2FyZXMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcmVxdWVzdCB9IGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xuaW1wb3J0IHsgSHR0cEV4Y2VwdGlvbiwgSHR0cFN0YXR1cyB9IGZyb20gJy4uL2Vycm9ycy9IdHRwRXhjZXB0aW9uLmVycm9yJztcbmNvbnN0IFVzZXIgPSByZXF1aXJlKCcuLi9tb2RlbHMvdXNlci5tb2RlbCcpXG5cbmV4cG9ydCBjb25zdCBqd3RNaWRkbGV3YXJlID0gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGFzeW5jIChyZXEsIF9yZXMsIG5leHQpID0+IHtcbiAgY29uc29sZS5sb2coJ2p3dE1pZGRsZXdhcmUnKVxuICBjb25zdCB0b2tlbiA9IHJlcS5jb29raWVzLmp3dDtcbiAgaWYgKHRva2VuKSB7XG4gICAgY29uc3QgeyBpZCB9ID0gand0LnZlcmlmeSh0b2tlbiwgcHJvY2Vzcy5lbnYuVE9LRU5fU0VDUkVUKVxuICAgIGxldCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZChpZCk7XG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICByZXR1cm4gbmV4dChuZXcgSHR0cEV4Y2VwdGlvbignVW5hdXRob3JpemVkJywgSHR0cFN0YXR1cy5VTkFVVEhPUklaRUQpKTtcbiAgICB9XG4gICAgcmVxdWVzdC51c2VyID0gdXNlcjtcbiAgICBuZXh0KCk7XG4gIH1lbHNle1xuICAgIG5leHQobmV3IEh0dHBFeGNlcHRpb24oJ1VuYXV0aG9yaXplZCcsIEh0dHBTdGF0dXMuVU5BVVRIT1JJWkVEKSk7XG4gIH1cbn1cbiAgfVxuXG4iXX0=","map":{"version":3,"sources":["jwt.middleware.js"],"names":["User","require","jwtMiddleware","req","res","next","_res","console","log","token","cookies","jwt","id","verify","process","env","TOKEN_SECRET","user","findById","HttpException","HttpStatus","UNAUTHORIZED","request"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AACA,MAAMA,IAAI,GAAGC,OAAO,CAAC,sBAAD,CAApB;;AAEO,MAAMC,aAAa,GAAG,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AAC/C,SAAOF,GAAP,EAAYG,IAAZ,EAAkBD,IAAlB,KAA2B;AAC3BE,IAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACA,UAAMC,KAAK,GAAGN,GAAG,CAACO,OAAJ,CAAYC,GAA1B;;AACA,QAAIF,KAAJ,EAAW;AACT,YAAM;AAAEG,QAAAA;AAAF,UAASD,sBAAIE,MAAJ,CAAWJ,KAAX,EAAkBK,OAAO,CAACC,GAAR,CAAYC,YAA9B,CAAf;;AACA,UAAIC,IAAI,GAAG,MAAMjB,IAAI,CAACkB,QAAL,CAAcN,EAAd,CAAjB;;AACA,UAAI,CAACK,IAAL,EAAW;AACT,eAAOZ,IAAI,CAAC,IAAIc,4BAAJ,CAAkB,cAAlB,EAAkCC,0BAAWC,YAA7C,CAAD,CAAX;AACD;;AACDC,uBAAQL,IAAR,GAAeA,IAAf;AACAZ,MAAAA,IAAI;AACL,KARD,MAQK;AACHA,MAAAA,IAAI,CAAC,IAAIc,4BAAJ,CAAkB,cAAlB,EAAkCC,0BAAWC,YAA7C,CAAD,CAAJ;AACD;AACF,GAdC;AAeC,CAhBI","sourceRoot":"/Applications/dossier/mern_project_app2/src/middlewares/","sourcesContent":["import { request } from 'express';\nimport jwt from 'jsonwebtoken';\nimport { HttpException, HttpStatus } from '../errors/HttpException.error';\nconst User = require('../models/user.model')\n\nexport const jwtMiddleware = (req, res, next) => {\n  async (req, _res, next) => {\n  console.log('jwtMiddleware')\n  const token = req.cookies.jwt;\n  if (token) {\n    const { id } = jwt.verify(token, process.env.TOKEN_SECRET)\n    let user = await User.findById(id);\n    if (!user) {\n      return next(new HttpException('Unauthorized', HttpStatus.UNAUTHORIZED));\n    }\n    request.user = user;\n    next();\n  }else{\n    next(new HttpException('Unauthorized', HttpStatus.UNAUTHORIZED));\n  }\n}\n  }\n\n"]}},"mtime":1651272395940},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/mern_project_app2/src/errors/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/mern_project_app2\",\"filename\":\"/Applications/dossier/mern_project_app2/src/errors/HttpException.error.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/mern_project_app2\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.HttpStatus = exports.HttpException = void 0;\nconst HttpStatus = {\n  UNAUTHORIZED: 401,\n  NOT_FOUND: 404\n};\nexports.HttpStatus = HttpStatus;\n\nclass HttpException extends Error {\n  constructor(message, statusCode) {\n    super(message);\n    this.statusCode = statusCode;\n  }\n\n}\n\nexports.HttpException = HttpException;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkh0dHBFeGNlcHRpb24uZXJyb3IuanMiXSwibmFtZXMiOlsiSHR0cFN0YXR1cyIsIlVOQVVUSE9SSVpFRCIsIk5PVF9GT1VORCIsIkh0dHBFeGNlcHRpb24iLCJFcnJvciIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsInN0YXR1c0NvZGUiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFPLE1BQU1BLFVBQVUsR0FBRztBQUN4QkMsRUFBQUEsWUFBWSxFQUFFLEdBRFU7QUFFeEJDLEVBQUFBLFNBQVMsRUFBRTtBQUZhLENBQW5COzs7QUFLQSxNQUFNQyxhQUFOLFNBQTRCQyxLQUE1QixDQUFrQztBQUN2Q0MsRUFBQUEsV0FBVyxDQUFDQyxPQUFELEVBQVVDLFVBQVYsRUFBc0I7QUFDL0IsVUFBTUQsT0FBTjtBQUVBLFNBQUtDLFVBQUwsR0FBa0JBLFVBQWxCO0FBQ0Q7O0FBTHNDIiwic291cmNlUm9vdCI6Ii9BcHBsaWNhdGlvbnMvZG9zc2llci9tZXJuX3Byb2plY3RfYXBwMi9zcmMvZXJyb3JzLyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBIdHRwU3RhdHVzID0ge1xuICBVTkFVVEhPUklaRUQ6IDQwMSxcbiAgTk9UX0ZPVU5EOiA0MDQsXG59XG5cbmV4cG9ydCBjbGFzcyBIdHRwRXhjZXB0aW9uIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBzdGF0dXNDb2RlKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG5cbiAgICB0aGlzLnN0YXR1c0NvZGUgPSBzdGF0dXNDb2RlO1xuICB9XG59XG4iXX0=","map":{"version":3,"sources":["HttpException.error.js"],"names":["HttpStatus","UNAUTHORIZED","NOT_FOUND","HttpException","Error","constructor","message","statusCode"],"mappings":";;;;;;AAAO,MAAMA,UAAU,GAAG;AACxBC,EAAAA,YAAY,EAAE,GADU;AAExBC,EAAAA,SAAS,EAAE;AAFa,CAAnB;;;AAKA,MAAMC,aAAN,SAA4BC,KAA5B,CAAkC;AACvCC,EAAAA,WAAW,CAACC,OAAD,EAAUC,UAAV,EAAsB;AAC/B,UAAMD,OAAN;AAEA,SAAKC,UAAL,GAAkBA,UAAlB;AACD;;AALsC","sourceRoot":"/Applications/dossier/mern_project_app2/src/errors/","sourcesContent":["export const HttpStatus = {\n  UNAUTHORIZED: 401,\n  NOT_FOUND: 404,\n}\n\nexport class HttpException extends Error {\n  constructor(message, statusCode) {\n    super(message);\n\n    this.statusCode = statusCode;\n  }\n}\n"]}},"mtime":1651253219660},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/mern_project_app2/src/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/mern_project_app2\",\"filename\":\"/Applications/dossier/mern_project_app2/src/utils/errors.utils.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/mern_project_app2\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.uploadErrors = exports.signUpErrors = exports.signInErrors = void 0;\n\nconst signUpErrors = err => {\n  let errors = {\n    pseudo: '',\n    email: '',\n    password: ''\n  };\n\n  if (err.message.includes('pseudo')) {\n    errors.pseudo = \"Pseudo incorrect\";\n  }\n\n  if (err.message.includes('email')) {\n    errors.email = \"Email incorrect\";\n  }\n\n  if (err.message.includes('password')) {\n    errors.password = \"Password incorrect ! Password must be at least 6 characters\";\n  }\n\n  if (err.code === 11000 && Object.keys(err.keyValue)[0].includes('pseudo')) {\n    errors.pseudo = \"Pseudo already use\";\n  }\n\n  if (err.code === 11000 && Object.keys(err.keyValue)[0].includes('email')) {\n    errors.email = \"Email already use\";\n  }\n\n  return errors;\n};\n\nexports.signUpErrors = signUpErrors;\n\nconst signInErrors = err => {\n  let errors = {\n    email: '',\n    password: '',\n    err\n  };\n\n  if (err.message.includes('email')) {\n    errors.email = \"Email inconnu\";\n  }\n\n  if (err.message.includes('password')) {\n    errors.password = \"Password incorrect ! Mot de passe ne correspond pas.\";\n  }\n\n  return errors;\n};\n\nexports.signInErrors = signInErrors;\n\nconst uploadErrors = err => {\n  let errors = {\n    format: '',\n    maxSize: '',\n    err: err.message\n  };\n\n  if (err.message.includes('invalid file')) {\n    errors.format = \"format incompatible\";\n  }\n\n  if (err.message.includes('max size')) {\n    errors.maxSize = \"Le fichier dépasse 500ko\";\n  }\n\n  return errors;\n};\n\nexports.uploadErrors = uploadErrors;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVycm9ycy51dGlscy5qcyJdLCJuYW1lcyI6WyJzaWduVXBFcnJvcnMiLCJlcnIiLCJlcnJvcnMiLCJwc2V1ZG8iLCJlbWFpbCIsInBhc3N3b3JkIiwibWVzc2FnZSIsImluY2x1ZGVzIiwiY29kZSIsIk9iamVjdCIsImtleXMiLCJrZXlWYWx1ZSIsInNpZ25JbkVycm9ycyIsInVwbG9hZEVycm9ycyIsImZvcm1hdCIsIm1heFNpemUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBTyxNQUFNQSxZQUFZLEdBQUlDLEdBQUQsSUFBUztBQUNqQyxNQUFJQyxNQUFNLEdBQUc7QUFBQ0MsSUFBQUEsTUFBTSxFQUFFLEVBQVQ7QUFBYUMsSUFBQUEsS0FBSyxFQUFFLEVBQXBCO0FBQXdCQyxJQUFBQSxRQUFRLEVBQUU7QUFBbEMsR0FBYjs7QUFFQSxNQUFHSixHQUFHLENBQUNLLE9BQUosQ0FBWUMsUUFBWixDQUFxQixRQUFyQixDQUFILEVBQWtDO0FBQzlCTCxJQUFBQSxNQUFNLENBQUNDLE1BQVAsR0FBZ0Isa0JBQWhCO0FBQ0g7O0FBQ0QsTUFBR0YsR0FBRyxDQUFDSyxPQUFKLENBQVlDLFFBQVosQ0FBcUIsT0FBckIsQ0FBSCxFQUFpQztBQUM3QkwsSUFBQUEsTUFBTSxDQUFDRSxLQUFQLEdBQWUsaUJBQWY7QUFDSDs7QUFDRCxNQUFHSCxHQUFHLENBQUNLLE9BQUosQ0FBWUMsUUFBWixDQUFxQixVQUFyQixDQUFILEVBQW9DO0FBQ2hDTCxJQUFBQSxNQUFNLENBQUNHLFFBQVAsR0FBa0IsNkRBQWxCO0FBQ0g7O0FBQ0QsTUFBR0osR0FBRyxDQUFDTyxJQUFKLEtBQWEsS0FBYixJQUFzQkMsTUFBTSxDQUFDQyxJQUFQLENBQVlULEdBQUcsQ0FBQ1UsUUFBaEIsRUFBMEIsQ0FBMUIsRUFBNkJKLFFBQTdCLENBQXNDLFFBQXRDLENBQXpCLEVBQXlFO0FBQ3JFTCxJQUFBQSxNQUFNLENBQUNDLE1BQVAsR0FBZ0Isb0JBQWhCO0FBQ0g7O0FBQ0QsTUFBR0YsR0FBRyxDQUFDTyxJQUFKLEtBQWEsS0FBYixJQUFzQkMsTUFBTSxDQUFDQyxJQUFQLENBQVlULEdBQUcsQ0FBQ1UsUUFBaEIsRUFBMEIsQ0FBMUIsRUFBNkJKLFFBQTdCLENBQXNDLE9BQXRDLENBQXpCLEVBQXdFO0FBQ3BFTCxJQUFBQSxNQUFNLENBQUNFLEtBQVAsR0FBZSxtQkFBZjtBQUNIOztBQUVELFNBQU9GLE1BQVA7QUFDSCxDQXBCTTs7OztBQXNCQSxNQUFNVSxZQUFZLEdBQUlYLEdBQUQsSUFBUztBQUNqQyxNQUFJQyxNQUFNLEdBQUc7QUFBRUUsSUFBQUEsS0FBSyxFQUFFLEVBQVQ7QUFBYUMsSUFBQUEsUUFBUSxFQUFFLEVBQXZCO0FBQTJCSixJQUFBQTtBQUEzQixHQUFiOztBQUNBLE1BQUdBLEdBQUcsQ0FBQ0ssT0FBSixDQUFZQyxRQUFaLENBQXFCLE9BQXJCLENBQUgsRUFBaUM7QUFDN0JMLElBQUFBLE1BQU0sQ0FBQ0UsS0FBUCxHQUFlLGVBQWY7QUFDSDs7QUFDRCxNQUFHSCxHQUFHLENBQUNLLE9BQUosQ0FBWUMsUUFBWixDQUFxQixVQUFyQixDQUFILEVBQW9DO0FBQ2hDTCxJQUFBQSxNQUFNLENBQUNHLFFBQVAsR0FBa0Isc0RBQWxCO0FBQ0g7O0FBQ0QsU0FBT0gsTUFBUDtBQUNILENBVE07Ozs7QUFXQSxNQUFNVyxZQUFZLEdBQUlaLEdBQUQsSUFBUztBQUNqQyxNQUFJQyxNQUFNLEdBQUc7QUFBQ1ksSUFBQUEsTUFBTSxFQUFFLEVBQVQ7QUFBYUMsSUFBQUEsT0FBTyxFQUFDLEVBQXJCO0FBQXlCZCxJQUFBQSxHQUFHLEVBQUVBLEdBQUcsQ0FBQ0s7QUFBbEMsR0FBYjs7QUFFQSxNQUFHTCxHQUFHLENBQUNLLE9BQUosQ0FBWUMsUUFBWixDQUFxQixjQUFyQixDQUFILEVBQXdDO0FBQ3BDTCxJQUFBQSxNQUFNLENBQUNZLE1BQVAsR0FBZ0IscUJBQWhCO0FBQ0g7O0FBRUQsTUFBR2IsR0FBRyxDQUFDSyxPQUFKLENBQVlDLFFBQVosQ0FBcUIsVUFBckIsQ0FBSCxFQUFvQztBQUNoQ0wsSUFBQUEsTUFBTSxDQUFDYSxPQUFQLEdBQWlCLDBCQUFqQjtBQUNIOztBQUNELFNBQU9iLE1BQVA7QUFDSCxDQVhNIiwic291cmNlUm9vdCI6Ii9BcHBsaWNhdGlvbnMvZG9zc2llci9tZXJuX3Byb2plY3RfYXBwMi9zcmMvdXRpbHMvIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHNpZ25VcEVycm9ycyA9IChlcnIpID0+IHtcbiAgICBsZXQgZXJyb3JzID0ge3BzZXVkbzogJycsIGVtYWlsOiAnJywgcGFzc3dvcmQ6ICcnfVxuICAgIFxuICAgIGlmKGVyci5tZXNzYWdlLmluY2x1ZGVzKCdwc2V1ZG8nKSl7XG4gICAgICAgIGVycm9ycy5wc2V1ZG8gPSBcIlBzZXVkbyBpbmNvcnJlY3RcIlxuICAgIH1cbiAgICBpZihlcnIubWVzc2FnZS5pbmNsdWRlcygnZW1haWwnKSl7XG4gICAgICAgIGVycm9ycy5lbWFpbCA9IFwiRW1haWwgaW5jb3JyZWN0XCJcbiAgICB9XG4gICAgaWYoZXJyLm1lc3NhZ2UuaW5jbHVkZXMoJ3Bhc3N3b3JkJykpe1xuICAgICAgICBlcnJvcnMucGFzc3dvcmQgPSBcIlBhc3N3b3JkIGluY29ycmVjdCAhIFBhc3N3b3JkIG11c3QgYmUgYXQgbGVhc3QgNiBjaGFyYWN0ZXJzXCJcbiAgICB9XG4gICAgaWYoZXJyLmNvZGUgPT09IDExMDAwICYmIE9iamVjdC5rZXlzKGVyci5rZXlWYWx1ZSlbMF0uaW5jbHVkZXMoJ3BzZXVkbycpKXtcbiAgICAgICAgZXJyb3JzLnBzZXVkbyA9IFwiUHNldWRvIGFscmVhZHkgdXNlXCJcbiAgICB9XG4gICAgaWYoZXJyLmNvZGUgPT09IDExMDAwICYmIE9iamVjdC5rZXlzKGVyci5rZXlWYWx1ZSlbMF0uaW5jbHVkZXMoJ2VtYWlsJykpe1xuICAgICAgICBlcnJvcnMuZW1haWwgPSBcIkVtYWlsIGFscmVhZHkgdXNlXCJcbiAgICB9XG5cbiAgICByZXR1cm4gZXJyb3JzXG59XG5cbmV4cG9ydCBjb25zdCBzaWduSW5FcnJvcnMgPSAoZXJyKSA9PiB7XG4gICAgbGV0IGVycm9ycyA9IHsgZW1haWw6ICcnLCBwYXNzd29yZDogJycsIGVycn1cbiAgICBpZihlcnIubWVzc2FnZS5pbmNsdWRlcygnZW1haWwnKSl7XG4gICAgICAgIGVycm9ycy5lbWFpbCA9IFwiRW1haWwgaW5jb25udVwiXG4gICAgfVxuICAgIGlmKGVyci5tZXNzYWdlLmluY2x1ZGVzKCdwYXNzd29yZCcpKXtcbiAgICAgICAgZXJyb3JzLnBhc3N3b3JkID0gXCJQYXNzd29yZCBpbmNvcnJlY3QgISBNb3QgZGUgcGFzc2UgbmUgY29ycmVzcG9uZCBwYXMuXCJcbiAgICB9XG4gICAgcmV0dXJuIGVycm9yc1xufVxuXG5leHBvcnQgY29uc3QgdXBsb2FkRXJyb3JzID0gKGVycikgPT4ge1xuICAgIGxldCBlcnJvcnMgPSB7Zm9ybWF0OiAnJywgbWF4U2l6ZTonJywgZXJyOiBlcnIubWVzc2FnZSB9XG5cbiAgICBpZihlcnIubWVzc2FnZS5pbmNsdWRlcygnaW52YWxpZCBmaWxlJykpe1xuICAgICAgICBlcnJvcnMuZm9ybWF0ID0gXCJmb3JtYXQgaW5jb21wYXRpYmxlXCJcbiAgICB9XG5cbiAgICBpZihlcnIubWVzc2FnZS5pbmNsdWRlcygnbWF4IHNpemUnKSl7XG4gICAgICAgIGVycm9ycy5tYXhTaXplID0gXCJMZSBmaWNoaWVyIGTDqXBhc3NlIDUwMGtvXCJcbiAgICB9XG4gICAgcmV0dXJuIGVycm9ycztcbn0iXX0=","map":{"version":3,"sources":["errors.utils.js"],"names":["signUpErrors","err","errors","pseudo","email","password","message","includes","code","Object","keys","keyValue","signInErrors","uploadErrors","format","maxSize"],"mappings":";;;;;;;AAAO,MAAMA,YAAY,GAAIC,GAAD,IAAS;AACjC,MAAIC,MAAM,GAAG;AAACC,IAAAA,MAAM,EAAE,EAAT;AAAaC,IAAAA,KAAK,EAAE,EAApB;AAAwBC,IAAAA,QAAQ,EAAE;AAAlC,GAAb;;AAEA,MAAGJ,GAAG,CAACK,OAAJ,CAAYC,QAAZ,CAAqB,QAArB,CAAH,EAAkC;AAC9BL,IAAAA,MAAM,CAACC,MAAP,GAAgB,kBAAhB;AACH;;AACD,MAAGF,GAAG,CAACK,OAAJ,CAAYC,QAAZ,CAAqB,OAArB,CAAH,EAAiC;AAC7BL,IAAAA,MAAM,CAACE,KAAP,GAAe,iBAAf;AACH;;AACD,MAAGH,GAAG,CAACK,OAAJ,CAAYC,QAAZ,CAAqB,UAArB,CAAH,EAAoC;AAChCL,IAAAA,MAAM,CAACG,QAAP,GAAkB,6DAAlB;AACH;;AACD,MAAGJ,GAAG,CAACO,IAAJ,KAAa,KAAb,IAAsBC,MAAM,CAACC,IAAP,CAAYT,GAAG,CAACU,QAAhB,EAA0B,CAA1B,EAA6BJ,QAA7B,CAAsC,QAAtC,CAAzB,EAAyE;AACrEL,IAAAA,MAAM,CAACC,MAAP,GAAgB,oBAAhB;AACH;;AACD,MAAGF,GAAG,CAACO,IAAJ,KAAa,KAAb,IAAsBC,MAAM,CAACC,IAAP,CAAYT,GAAG,CAACU,QAAhB,EAA0B,CAA1B,EAA6BJ,QAA7B,CAAsC,OAAtC,CAAzB,EAAwE;AACpEL,IAAAA,MAAM,CAACE,KAAP,GAAe,mBAAf;AACH;;AAED,SAAOF,MAAP;AACH,CApBM;;;;AAsBA,MAAMU,YAAY,GAAIX,GAAD,IAAS;AACjC,MAAIC,MAAM,GAAG;AAAEE,IAAAA,KAAK,EAAE,EAAT;AAAaC,IAAAA,QAAQ,EAAE,EAAvB;AAA2BJ,IAAAA;AAA3B,GAAb;;AACA,MAAGA,GAAG,CAACK,OAAJ,CAAYC,QAAZ,CAAqB,OAArB,CAAH,EAAiC;AAC7BL,IAAAA,MAAM,CAACE,KAAP,GAAe,eAAf;AACH;;AACD,MAAGH,GAAG,CAACK,OAAJ,CAAYC,QAAZ,CAAqB,UAArB,CAAH,EAAoC;AAChCL,IAAAA,MAAM,CAACG,QAAP,GAAkB,sDAAlB;AACH;;AACD,SAAOH,MAAP;AACH,CATM;;;;AAWA,MAAMW,YAAY,GAAIZ,GAAD,IAAS;AACjC,MAAIC,MAAM,GAAG;AAACY,IAAAA,MAAM,EAAE,EAAT;AAAaC,IAAAA,OAAO,EAAC,EAArB;AAAyBd,IAAAA,GAAG,EAAEA,GAAG,CAACK;AAAlC,GAAb;;AAEA,MAAGL,GAAG,CAACK,OAAJ,CAAYC,QAAZ,CAAqB,cAArB,CAAH,EAAwC;AACpCL,IAAAA,MAAM,CAACY,MAAP,GAAgB,qBAAhB;AACH;;AAED,MAAGb,GAAG,CAACK,OAAJ,CAAYC,QAAZ,CAAqB,UAArB,CAAH,EAAoC;AAChCL,IAAAA,MAAM,CAACa,OAAP,GAAiB,0BAAjB;AACH;;AACD,SAAOb,MAAP;AACH,CAXM","sourceRoot":"/Applications/dossier/mern_project_app2/src/utils/","sourcesContent":["export const signUpErrors = (err) => {\n    let errors = {pseudo: '', email: '', password: ''}\n    \n    if(err.message.includes('pseudo')){\n        errors.pseudo = \"Pseudo incorrect\"\n    }\n    if(err.message.includes('email')){\n        errors.email = \"Email incorrect\"\n    }\n    if(err.message.includes('password')){\n        errors.password = \"Password incorrect ! Password must be at least 6 characters\"\n    }\n    if(err.code === 11000 && Object.keys(err.keyValue)[0].includes('pseudo')){\n        errors.pseudo = \"Pseudo already use\"\n    }\n    if(err.code === 11000 && Object.keys(err.keyValue)[0].includes('email')){\n        errors.email = \"Email already use\"\n    }\n\n    return errors\n}\n\nexport const signInErrors = (err) => {\n    let errors = { email: '', password: '', err}\n    if(err.message.includes('email')){\n        errors.email = \"Email inconnu\"\n    }\n    if(err.message.includes('password')){\n        errors.password = \"Password incorrect ! Mot de passe ne correspond pas.\"\n    }\n    return errors\n}\n\nexport const uploadErrors = (err) => {\n    let errors = {format: '', maxSize:'', err: err.message }\n\n    if(err.message.includes('invalid file')){\n        errors.format = \"format incompatible\"\n    }\n\n    if(err.message.includes('max size')){\n        errors.maxSize = \"Le fichier dépasse 500ko\"\n    }\n    return errors;\n}"]}},"mtime":1651285939131},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/mern_project_app2/src/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/mern_project_app2\",\"filename\":\"/Applications/dossier/mern_project_app2/src/utils/errors.utils.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/mern_project_app2\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.uploadErrors = exports.signUpErrors = exports.signInErrors = void 0;\n\nconst signUpErrors = err => {\n  let errors = {\n    pseudo: '',\n    email: '',\n    password: ''\n  };\n\n  if (err.message.includes('pseudo')) {\n    errors.pseudo = \"Pseudo incorrect\";\n  }\n\n  if (err.message.includes('email')) {\n    errors.email = \"Email incorrect\";\n  }\n\n  if (err.message.includes('password')) {\n    errors.password = \"Password incorrect ! Password must be at least 6 characters\";\n  }\n\n  if (err.code === 11000 && Object.keys(err.keyValue)[0].includes('pseudo')) {\n    errors.pseudo = \"Pseudo already use\";\n  }\n\n  if (err.code === 11000 && Object.keys(err.keyValue)[0].includes('email')) {\n    errors.email = \"Email already use\";\n  }\n\n  return errors;\n};\n\nexports.signUpErrors = signUpErrors;\n\nconst signInErrors = err => {\n  let errors = {\n    email: '',\n    password: '',\n    err\n  };\n\n  if (err.message.includes('email')) {\n    errors.email = \"Email inconnu\";\n  }\n\n  if (err.message.includes('password')) {\n    errors.password = \"Password incorrect ! Mot de passe ne correspond pas.\";\n  }\n\n  return errors;\n};\n\nexports.signInErrors = signInErrors;\n\nconst uploadErrors = err => {\n  let errors = {\n    format: '',\n    maxSize: ''\n  };\n\n  if (err.message.includes('invalid file')) {\n    errors.format = \"format incompatible\";\n  }\n\n  if (err.message.includes('max size')) {\n    errors.maxSize = \"Le fichier dépasse 500ko\";\n  }\n\n  return errors;\n};\n\nexports.uploadErrors = uploadErrors;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVycm9ycy51dGlscy5qcyJdLCJuYW1lcyI6WyJzaWduVXBFcnJvcnMiLCJlcnIiLCJlcnJvcnMiLCJwc2V1ZG8iLCJlbWFpbCIsInBhc3N3b3JkIiwibWVzc2FnZSIsImluY2x1ZGVzIiwiY29kZSIsIk9iamVjdCIsImtleXMiLCJrZXlWYWx1ZSIsInNpZ25JbkVycm9ycyIsInVwbG9hZEVycm9ycyIsImZvcm1hdCIsIm1heFNpemUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBTyxNQUFNQSxZQUFZLEdBQUlDLEdBQUQsSUFBUztBQUNqQyxNQUFJQyxNQUFNLEdBQUc7QUFBQ0MsSUFBQUEsTUFBTSxFQUFFLEVBQVQ7QUFBYUMsSUFBQUEsS0FBSyxFQUFFLEVBQXBCO0FBQXdCQyxJQUFBQSxRQUFRLEVBQUU7QUFBbEMsR0FBYjs7QUFFQSxNQUFHSixHQUFHLENBQUNLLE9BQUosQ0FBWUMsUUFBWixDQUFxQixRQUFyQixDQUFILEVBQWtDO0FBQzlCTCxJQUFBQSxNQUFNLENBQUNDLE1BQVAsR0FBZ0Isa0JBQWhCO0FBQ0g7O0FBQ0QsTUFBR0YsR0FBRyxDQUFDSyxPQUFKLENBQVlDLFFBQVosQ0FBcUIsT0FBckIsQ0FBSCxFQUFpQztBQUM3QkwsSUFBQUEsTUFBTSxDQUFDRSxLQUFQLEdBQWUsaUJBQWY7QUFDSDs7QUFDRCxNQUFHSCxHQUFHLENBQUNLLE9BQUosQ0FBWUMsUUFBWixDQUFxQixVQUFyQixDQUFILEVBQW9DO0FBQ2hDTCxJQUFBQSxNQUFNLENBQUNHLFFBQVAsR0FBa0IsNkRBQWxCO0FBQ0g7O0FBQ0QsTUFBR0osR0FBRyxDQUFDTyxJQUFKLEtBQWEsS0FBYixJQUFzQkMsTUFBTSxDQUFDQyxJQUFQLENBQVlULEdBQUcsQ0FBQ1UsUUFBaEIsRUFBMEIsQ0FBMUIsRUFBNkJKLFFBQTdCLENBQXNDLFFBQXRDLENBQXpCLEVBQXlFO0FBQ3JFTCxJQUFBQSxNQUFNLENBQUNDLE1BQVAsR0FBZ0Isb0JBQWhCO0FBQ0g7O0FBQ0QsTUFBR0YsR0FBRyxDQUFDTyxJQUFKLEtBQWEsS0FBYixJQUFzQkMsTUFBTSxDQUFDQyxJQUFQLENBQVlULEdBQUcsQ0FBQ1UsUUFBaEIsRUFBMEIsQ0FBMUIsRUFBNkJKLFFBQTdCLENBQXNDLE9BQXRDLENBQXpCLEVBQXdFO0FBQ3BFTCxJQUFBQSxNQUFNLENBQUNFLEtBQVAsR0FBZSxtQkFBZjtBQUNIOztBQUVELFNBQU9GLE1BQVA7QUFDSCxDQXBCTTs7OztBQXNCQSxNQUFNVSxZQUFZLEdBQUlYLEdBQUQsSUFBUztBQUNqQyxNQUFJQyxNQUFNLEdBQUc7QUFBRUUsSUFBQUEsS0FBSyxFQUFFLEVBQVQ7QUFBYUMsSUFBQUEsUUFBUSxFQUFFLEVBQXZCO0FBQTJCSixJQUFBQTtBQUEzQixHQUFiOztBQUNBLE1BQUdBLEdBQUcsQ0FBQ0ssT0FBSixDQUFZQyxRQUFaLENBQXFCLE9BQXJCLENBQUgsRUFBaUM7QUFDN0JMLElBQUFBLE1BQU0sQ0FBQ0UsS0FBUCxHQUFlLGVBQWY7QUFDSDs7QUFDRCxNQUFHSCxHQUFHLENBQUNLLE9BQUosQ0FBWUMsUUFBWixDQUFxQixVQUFyQixDQUFILEVBQW9DO0FBQ2hDTCxJQUFBQSxNQUFNLENBQUNHLFFBQVAsR0FBa0Isc0RBQWxCO0FBQ0g7O0FBQ0QsU0FBT0gsTUFBUDtBQUNILENBVE07Ozs7QUFXQSxNQUFNVyxZQUFZLEdBQUlaLEdBQUQsSUFBUztBQUNqQyxNQUFJQyxNQUFNLEdBQUc7QUFBQ1ksSUFBQUEsTUFBTSxFQUFFLEVBQVQ7QUFBYUMsSUFBQUEsT0FBTyxFQUFDO0FBQXJCLEdBQWI7O0FBRUEsTUFBR2QsR0FBRyxDQUFDSyxPQUFKLENBQVlDLFFBQVosQ0FBcUIsY0FBckIsQ0FBSCxFQUF3QztBQUNwQ0wsSUFBQUEsTUFBTSxDQUFDWSxNQUFQLEdBQWdCLHFCQUFoQjtBQUNIOztBQUVELE1BQUdiLEdBQUcsQ0FBQ0ssT0FBSixDQUFZQyxRQUFaLENBQXFCLFVBQXJCLENBQUgsRUFBb0M7QUFDaENMLElBQUFBLE1BQU0sQ0FBQ2EsT0FBUCxHQUFpQiwwQkFBakI7QUFDSDs7QUFDRCxTQUFPYixNQUFQO0FBQ0gsQ0FYTSIsInNvdXJjZVJvb3QiOiIvQXBwbGljYXRpb25zL2Rvc3NpZXIvbWVybl9wcm9qZWN0X2FwcDIvc3JjL3V0aWxzLyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBzaWduVXBFcnJvcnMgPSAoZXJyKSA9PiB7XG4gICAgbGV0IGVycm9ycyA9IHtwc2V1ZG86ICcnLCBlbWFpbDogJycsIHBhc3N3b3JkOiAnJ31cbiAgICBcbiAgICBpZihlcnIubWVzc2FnZS5pbmNsdWRlcygncHNldWRvJykpe1xuICAgICAgICBlcnJvcnMucHNldWRvID0gXCJQc2V1ZG8gaW5jb3JyZWN0XCJcbiAgICB9XG4gICAgaWYoZXJyLm1lc3NhZ2UuaW5jbHVkZXMoJ2VtYWlsJykpe1xuICAgICAgICBlcnJvcnMuZW1haWwgPSBcIkVtYWlsIGluY29ycmVjdFwiXG4gICAgfVxuICAgIGlmKGVyci5tZXNzYWdlLmluY2x1ZGVzKCdwYXNzd29yZCcpKXtcbiAgICAgICAgZXJyb3JzLnBhc3N3b3JkID0gXCJQYXNzd29yZCBpbmNvcnJlY3QgISBQYXNzd29yZCBtdXN0IGJlIGF0IGxlYXN0IDYgY2hhcmFjdGVyc1wiXG4gICAgfVxuICAgIGlmKGVyci5jb2RlID09PSAxMTAwMCAmJiBPYmplY3Qua2V5cyhlcnIua2V5VmFsdWUpWzBdLmluY2x1ZGVzKCdwc2V1ZG8nKSl7XG4gICAgICAgIGVycm9ycy5wc2V1ZG8gPSBcIlBzZXVkbyBhbHJlYWR5IHVzZVwiXG4gICAgfVxuICAgIGlmKGVyci5jb2RlID09PSAxMTAwMCAmJiBPYmplY3Qua2V5cyhlcnIua2V5VmFsdWUpWzBdLmluY2x1ZGVzKCdlbWFpbCcpKXtcbiAgICAgICAgZXJyb3JzLmVtYWlsID0gXCJFbWFpbCBhbHJlYWR5IHVzZVwiXG4gICAgfVxuXG4gICAgcmV0dXJuIGVycm9yc1xufVxuXG5leHBvcnQgY29uc3Qgc2lnbkluRXJyb3JzID0gKGVycikgPT4ge1xuICAgIGxldCBlcnJvcnMgPSB7IGVtYWlsOiAnJywgcGFzc3dvcmQ6ICcnLCBlcnJ9XG4gICAgaWYoZXJyLm1lc3NhZ2UuaW5jbHVkZXMoJ2VtYWlsJykpe1xuICAgICAgICBlcnJvcnMuZW1haWwgPSBcIkVtYWlsIGluY29ubnVcIlxuICAgIH1cbiAgICBpZihlcnIubWVzc2FnZS5pbmNsdWRlcygncGFzc3dvcmQnKSl7XG4gICAgICAgIGVycm9ycy5wYXNzd29yZCA9IFwiUGFzc3dvcmQgaW5jb3JyZWN0ICEgTW90IGRlIHBhc3NlIG5lIGNvcnJlc3BvbmQgcGFzLlwiXG4gICAgfVxuICAgIHJldHVybiBlcnJvcnNcbn1cblxuZXhwb3J0IGNvbnN0IHVwbG9hZEVycm9ycyA9IChlcnIpID0+IHtcbiAgICBsZXQgZXJyb3JzID0ge2Zvcm1hdDogJycsIG1heFNpemU6Jyd9XG5cbiAgICBpZihlcnIubWVzc2FnZS5pbmNsdWRlcygnaW52YWxpZCBmaWxlJykpe1xuICAgICAgICBlcnJvcnMuZm9ybWF0ID0gXCJmb3JtYXQgaW5jb21wYXRpYmxlXCJcbiAgICB9XG5cbiAgICBpZihlcnIubWVzc2FnZS5pbmNsdWRlcygnbWF4IHNpemUnKSl7XG4gICAgICAgIGVycm9ycy5tYXhTaXplID0gXCJMZSBmaWNoaWVyIGTDqXBhc3NlIDUwMGtvXCJcbiAgICB9XG4gICAgcmV0dXJuIGVycm9ycztcbn0iXX0=","map":{"version":3,"sources":["errors.utils.js"],"names":["signUpErrors","err","errors","pseudo","email","password","message","includes","code","Object","keys","keyValue","signInErrors","uploadErrors","format","maxSize"],"mappings":";;;;;;;AAAO,MAAMA,YAAY,GAAIC,GAAD,IAAS;AACjC,MAAIC,MAAM,GAAG;AAACC,IAAAA,MAAM,EAAE,EAAT;AAAaC,IAAAA,KAAK,EAAE,EAApB;AAAwBC,IAAAA,QAAQ,EAAE;AAAlC,GAAb;;AAEA,MAAGJ,GAAG,CAACK,OAAJ,CAAYC,QAAZ,CAAqB,QAArB,CAAH,EAAkC;AAC9BL,IAAAA,MAAM,CAACC,MAAP,GAAgB,kBAAhB;AACH;;AACD,MAAGF,GAAG,CAACK,OAAJ,CAAYC,QAAZ,CAAqB,OAArB,CAAH,EAAiC;AAC7BL,IAAAA,MAAM,CAACE,KAAP,GAAe,iBAAf;AACH;;AACD,MAAGH,GAAG,CAACK,OAAJ,CAAYC,QAAZ,CAAqB,UAArB,CAAH,EAAoC;AAChCL,IAAAA,MAAM,CAACG,QAAP,GAAkB,6DAAlB;AACH;;AACD,MAAGJ,GAAG,CAACO,IAAJ,KAAa,KAAb,IAAsBC,MAAM,CAACC,IAAP,CAAYT,GAAG,CAACU,QAAhB,EAA0B,CAA1B,EAA6BJ,QAA7B,CAAsC,QAAtC,CAAzB,EAAyE;AACrEL,IAAAA,MAAM,CAACC,MAAP,GAAgB,oBAAhB;AACH;;AACD,MAAGF,GAAG,CAACO,IAAJ,KAAa,KAAb,IAAsBC,MAAM,CAACC,IAAP,CAAYT,GAAG,CAACU,QAAhB,EAA0B,CAA1B,EAA6BJ,QAA7B,CAAsC,OAAtC,CAAzB,EAAwE;AACpEL,IAAAA,MAAM,CAACE,KAAP,GAAe,mBAAf;AACH;;AAED,SAAOF,MAAP;AACH,CApBM;;;;AAsBA,MAAMU,YAAY,GAAIX,GAAD,IAAS;AACjC,MAAIC,MAAM,GAAG;AAAEE,IAAAA,KAAK,EAAE,EAAT;AAAaC,IAAAA,QAAQ,EAAE,EAAvB;AAA2BJ,IAAAA;AAA3B,GAAb;;AACA,MAAGA,GAAG,CAACK,OAAJ,CAAYC,QAAZ,CAAqB,OAArB,CAAH,EAAiC;AAC7BL,IAAAA,MAAM,CAACE,KAAP,GAAe,eAAf;AACH;;AACD,MAAGH,GAAG,CAACK,OAAJ,CAAYC,QAAZ,CAAqB,UAArB,CAAH,EAAoC;AAChCL,IAAAA,MAAM,CAACG,QAAP,GAAkB,sDAAlB;AACH;;AACD,SAAOH,MAAP;AACH,CATM;;;;AAWA,MAAMW,YAAY,GAAIZ,GAAD,IAAS;AACjC,MAAIC,MAAM,GAAG;AAACY,IAAAA,MAAM,EAAE,EAAT;AAAaC,IAAAA,OAAO,EAAC;AAArB,GAAb;;AAEA,MAAGd,GAAG,CAACK,OAAJ,CAAYC,QAAZ,CAAqB,cAArB,CAAH,EAAwC;AACpCL,IAAAA,MAAM,CAACY,MAAP,GAAgB,qBAAhB;AACH;;AAED,MAAGb,GAAG,CAACK,OAAJ,CAAYC,QAAZ,CAAqB,UAArB,CAAH,EAAoC;AAChCL,IAAAA,MAAM,CAACa,OAAP,GAAiB,0BAAjB;AACH;;AACD,SAAOb,MAAP;AACH,CAXM","sourceRoot":"/Applications/dossier/mern_project_app2/src/utils/","sourcesContent":["export const signUpErrors = (err) => {\n    let errors = {pseudo: '', email: '', password: ''}\n    \n    if(err.message.includes('pseudo')){\n        errors.pseudo = \"Pseudo incorrect\"\n    }\n    if(err.message.includes('email')){\n        errors.email = \"Email incorrect\"\n    }\n    if(err.message.includes('password')){\n        errors.password = \"Password incorrect ! Password must be at least 6 characters\"\n    }\n    if(err.code === 11000 && Object.keys(err.keyValue)[0].includes('pseudo')){\n        errors.pseudo = \"Pseudo already use\"\n    }\n    if(err.code === 11000 && Object.keys(err.keyValue)[0].includes('email')){\n        errors.email = \"Email already use\"\n    }\n\n    return errors\n}\n\nexport const signInErrors = (err) => {\n    let errors = { email: '', password: '', err}\n    if(err.message.includes('email')){\n        errors.email = \"Email inconnu\"\n    }\n    if(err.message.includes('password')){\n        errors.password = \"Password incorrect ! Mot de passe ne correspond pas.\"\n    }\n    return errors\n}\n\nexport const uploadErrors = (err) => {\n    let errors = {format: '', maxSize:''}\n\n    if(err.message.includes('invalid file')){\n        errors.format = \"format incompatible\"\n    }\n\n    if(err.message.includes('max size')){\n        errors.maxSize = \"Le fichier dépasse 500ko\"\n    }\n    return errors;\n}"]}},"mtime":1651289937729},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/mern_project_app2/src/routes/api/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/mern_project_app2\",\"filename\":\"/Applications/dossier/mern_project_app2/src/routes/api/post.route.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/mern_project_app2\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar PostController = _interopRequireWildcard(require(\"../../controllers/post.controller\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst multer = require('multer');\n\nconst fileStorageEngine = multer.diskStorage({\n  destination: (req, file, cb) => {\n    cb(null, `${__dirname}/../../../client/public/uploads/profil`);\n  },\n  filename: function (req, file, cb) {\n    const uniqueSuffix = Date.now() + '-' + Math.round(Math.random() * 1E9);\n    let originalNameFile = file.originalname;\n    let extension = originalNameFile.substring(originalNameFile.lastIndexOf('.') + 1);\n    cb(null, file.fieldname + '-' + uniqueSuffix + \".\" + extension);\n  }\n});\nconst upload = multer({\n  storage: fileStorageEngine\n});\nconst api = (0, _express.Router)();\napi.get('/', PostController.readPost);\napi.post('/', upload.single('file'), PostController.createPost);\napi.put('/:id', PostController.updatePost);\napi.delete('/:id', PostController.deletePost);\napi.patch('/like-post/:id', PostController.likePost);\napi.patch('/unlike-post/:id', PostController.unlikePost); //comments\n\napi.patch('/comment-post/:id', PostController.commentPost);\napi.patch('/edit-comment-post/:id', PostController.editCommentPost);\napi.patch('/delete-comment-post/:id', PostController.deleteCommentPost);\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvc3Qucm91dGUuanMiXSwibmFtZXMiOlsibXVsdGVyIiwicmVxdWlyZSIsImZpbGVTdG9yYWdlRW5naW5lIiwiZGlza1N0b3JhZ2UiLCJkZXN0aW5hdGlvbiIsInJlcSIsImZpbGUiLCJjYiIsIl9fZGlybmFtZSIsImZpbGVuYW1lIiwidW5pcXVlU3VmZml4IiwiRGF0ZSIsIm5vdyIsIk1hdGgiLCJyb3VuZCIsInJhbmRvbSIsIm9yaWdpbmFsTmFtZUZpbGUiLCJvcmlnaW5hbG5hbWUiLCJleHRlbnNpb24iLCJzdWJzdHJpbmciLCJsYXN0SW5kZXhPZiIsImZpZWxkbmFtZSIsInVwbG9hZCIsInN0b3JhZ2UiLCJhcGkiLCJnZXQiLCJQb3N0Q29udHJvbGxlciIsInJlYWRQb3N0IiwicG9zdCIsInNpbmdsZSIsImNyZWF0ZVBvc3QiLCJwdXQiLCJ1cGRhdGVQb3N0IiwiZGVsZXRlIiwiZGVsZXRlUG9zdCIsInBhdGNoIiwibGlrZVBvc3QiLCJ1bmxpa2VQb3N0IiwiY29tbWVudFBvc3QiLCJlZGl0Q29tbWVudFBvc3QiLCJkZWxldGVDb21tZW50UG9zdCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7Ozs7QUFDQSxNQUFNQSxNQUFNLEdBQUlDLE9BQU8sQ0FBQyxRQUFELENBQXZCOztBQUVBLE1BQU1DLGlCQUFpQixHQUFHRixNQUFNLENBQUNHLFdBQVAsQ0FBbUI7QUFDekNDLEVBQUFBLFdBQVcsRUFBQyxDQUFDQyxHQUFELEVBQU1DLElBQU4sRUFBWUMsRUFBWixLQUFtQjtBQUMzQkEsSUFBQUEsRUFBRSxDQUFDLElBQUQsRUFBUSxHQUFFQyxTQUFVLHdDQUFwQixDQUFGO0FBQ0gsR0FId0M7QUFJekNDLEVBQUFBLFFBQVEsRUFBRSxVQUFVSixHQUFWLEVBQWVDLElBQWYsRUFBcUJDLEVBQXJCLEVBQXlCO0FBQy9CLFVBQU1HLFlBQVksR0FBR0MsSUFBSSxDQUFDQyxHQUFMLEtBQWEsR0FBYixHQUFtQkMsSUFBSSxDQUFDQyxLQUFMLENBQVdELElBQUksQ0FBQ0UsTUFBTCxLQUFnQixHQUEzQixDQUF4QztBQUNBLFFBQUlDLGdCQUFnQixHQUFHVixJQUFJLENBQUNXLFlBQTVCO0FBQ0EsUUFBSUMsU0FBUyxHQUFHRixnQkFBZ0IsQ0FBQ0csU0FBakIsQ0FBMkJILGdCQUFnQixDQUFDSSxXQUFqQixDQUE2QixHQUE3QixJQUFvQyxDQUEvRCxDQUFoQjtBQUNBYixJQUFBQSxFQUFFLENBQUMsSUFBRCxFQUFPRCxJQUFJLENBQUNlLFNBQUwsR0FBaUIsR0FBakIsR0FBdUJYLFlBQXZCLEdBQXNDLEdBQXRDLEdBQTJDUSxTQUFsRCxDQUFGO0FBQ0Q7QUFUc0MsQ0FBbkIsQ0FBMUI7QUFZQSxNQUFNSSxNQUFNLEdBQUd0QixNQUFNLENBQUM7QUFBQ3VCLEVBQUFBLE9BQU8sRUFBQ3JCO0FBQVQsQ0FBRCxDQUFyQjtBQUVBLE1BQU1zQixHQUFHLEdBQUcsc0JBQVo7QUFHQUEsR0FBRyxDQUFDQyxHQUFKLENBQVEsR0FBUixFQUFhQyxjQUFjLENBQUNDLFFBQTVCO0FBQ0FILEdBQUcsQ0FBQ0ksSUFBSixDQUFTLEdBQVQsRUFBYU4sTUFBTSxDQUFDTyxNQUFQLENBQWMsTUFBZCxDQUFiLEVBQXFDSCxjQUFjLENBQUNJLFVBQXBEO0FBQ0FOLEdBQUcsQ0FBQ08sR0FBSixDQUFRLE1BQVIsRUFBZ0JMLGNBQWMsQ0FBQ00sVUFBL0I7QUFDQVIsR0FBRyxDQUFDUyxNQUFKLENBQVcsTUFBWCxFQUFtQlAsY0FBYyxDQUFDUSxVQUFsQztBQUNBVixHQUFHLENBQUNXLEtBQUosQ0FBVSxnQkFBVixFQUE0QlQsY0FBYyxDQUFDVSxRQUEzQztBQUNBWixHQUFHLENBQUNXLEtBQUosQ0FBVSxrQkFBVixFQUE4QlQsY0FBYyxDQUFDVyxVQUE3QyxFLENBRUE7O0FBQ0FiLEdBQUcsQ0FBQ1csS0FBSixDQUFVLG1CQUFWLEVBQStCVCxjQUFjLENBQUNZLFdBQTlDO0FBQ0FkLEdBQUcsQ0FBQ1csS0FBSixDQUFVLHdCQUFWLEVBQW9DVCxjQUFjLENBQUNhLGVBQW5EO0FBQ0FmLEdBQUcsQ0FBQ1csS0FBSixDQUFVLDBCQUFWLEVBQXNDVCxjQUFjLENBQUNjLGlCQUFyRDtlQUllaEIsRyIsInNvdXJjZVJvb3QiOiIvQXBwbGljYXRpb25zL2Rvc3NpZXIvbWVybl9wcm9qZWN0X2FwcDIvc3JjL3JvdXRlcy9hcGkvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUm91dGVyIH0gZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgKiBhcyBQb3N0Q29udHJvbGxlciBmcm9tICcuLi8uLi9jb250cm9sbGVycy9wb3N0LmNvbnRyb2xsZXInO1xuY29uc3QgbXVsdGVyICA9IHJlcXVpcmUoJ211bHRlcicpXG5cbmNvbnN0IGZpbGVTdG9yYWdlRW5naW5lID0gbXVsdGVyLmRpc2tTdG9yYWdlKHtcbiAgICBkZXN0aW5hdGlvbjoocmVxLCBmaWxlLCBjYikgPT4ge1xuICAgICAgICBjYihudWxsLCBgJHtfX2Rpcm5hbWV9Ly4uLy4uLy4uL2NsaWVudC9wdWJsaWMvdXBsb2Fkcy9wcm9maWxgKVxuICAgIH0sXG4gICAgZmlsZW5hbWU6IGZ1bmN0aW9uIChyZXEsIGZpbGUsIGNiKSB7XG4gICAgICAgIGNvbnN0IHVuaXF1ZVN1ZmZpeCA9IERhdGUubm93KCkgKyAnLScgKyBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAxRTkpXG4gICAgICAgIGxldCBvcmlnaW5hbE5hbWVGaWxlID0gZmlsZS5vcmlnaW5hbG5hbWU7XG4gICAgICAgIGxldCBleHRlbnNpb24gPSBvcmlnaW5hbE5hbWVGaWxlLnN1YnN0cmluZyhvcmlnaW5hbE5hbWVGaWxlLmxhc3RJbmRleE9mKCcuJykgKyAxKTsgXG4gICAgICAgIGNiKG51bGwsIGZpbGUuZmllbGRuYW1lICsgJy0nICsgdW5pcXVlU3VmZml4ICsgXCIuXCIrIGV4dGVuc2lvbiApXG4gICAgICB9XG59KTtcblxuY29uc3QgdXBsb2FkID0gbXVsdGVyKHtzdG9yYWdlOmZpbGVTdG9yYWdlRW5naW5lfSlcblxuY29uc3QgYXBpID0gUm91dGVyKCk7XG5cblxuYXBpLmdldCgnLycsIFBvc3RDb250cm9sbGVyLnJlYWRQb3N0KTtcbmFwaS5wb3N0KCcvJyx1cGxvYWQuc2luZ2xlKCdmaWxlJyksICBQb3N0Q29udHJvbGxlci5jcmVhdGVQb3N0KTtcbmFwaS5wdXQoJy86aWQnLCBQb3N0Q29udHJvbGxlci51cGRhdGVQb3N0KTtcbmFwaS5kZWxldGUoJy86aWQnLCBQb3N0Q29udHJvbGxlci5kZWxldGVQb3N0KTtcbmFwaS5wYXRjaCgnL2xpa2UtcG9zdC86aWQnLCBQb3N0Q29udHJvbGxlci5saWtlUG9zdCk7XG5hcGkucGF0Y2goJy91bmxpa2UtcG9zdC86aWQnLCBQb3N0Q29udHJvbGxlci51bmxpa2VQb3N0KTtcblxuLy9jb21tZW50c1xuYXBpLnBhdGNoKCcvY29tbWVudC1wb3N0LzppZCcsIFBvc3RDb250cm9sbGVyLmNvbW1lbnRQb3N0KVxuYXBpLnBhdGNoKCcvZWRpdC1jb21tZW50LXBvc3QvOmlkJywgUG9zdENvbnRyb2xsZXIuZWRpdENvbW1lbnRQb3N0KVxuYXBpLnBhdGNoKCcvZGVsZXRlLWNvbW1lbnQtcG9zdC86aWQnLCBQb3N0Q29udHJvbGxlci5kZWxldGVDb21tZW50UG9zdClcblxuXG5cbmV4cG9ydCBkZWZhdWx0IGFwaTsiXX0=","map":{"version":3,"sources":["post.route.js"],"names":["multer","require","fileStorageEngine","diskStorage","destination","req","file","cb","__dirname","filename","uniqueSuffix","Date","now","Math","round","random","originalNameFile","originalname","extension","substring","lastIndexOf","fieldname","upload","storage","api","get","PostController","readPost","post","single","createPost","put","updatePost","delete","deletePost","patch","likePost","unlikePost","commentPost","editCommentPost","deleteCommentPost"],"mappings":";;;;;;;AAAA;;AACA;;;;;;AACA,MAAMA,MAAM,GAAIC,OAAO,CAAC,QAAD,CAAvB;;AAEA,MAAMC,iBAAiB,GAAGF,MAAM,CAACG,WAAP,CAAmB;AACzCC,EAAAA,WAAW,EAAC,CAACC,GAAD,EAAMC,IAAN,EAAYC,EAAZ,KAAmB;AAC3BA,IAAAA,EAAE,CAAC,IAAD,EAAQ,GAAEC,SAAU,wCAApB,CAAF;AACH,GAHwC;AAIzCC,EAAAA,QAAQ,EAAE,UAAUJ,GAAV,EAAeC,IAAf,EAAqBC,EAArB,EAAyB;AAC/B,UAAMG,YAAY,GAAGC,IAAI,CAACC,GAAL,KAAa,GAAb,GAAmBC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,GAA3B,CAAxC;AACA,QAAIC,gBAAgB,GAAGV,IAAI,CAACW,YAA5B;AACA,QAAIC,SAAS,GAAGF,gBAAgB,CAACG,SAAjB,CAA2BH,gBAAgB,CAACI,WAAjB,CAA6B,GAA7B,IAAoC,CAA/D,CAAhB;AACAb,IAAAA,EAAE,CAAC,IAAD,EAAOD,IAAI,CAACe,SAAL,GAAiB,GAAjB,GAAuBX,YAAvB,GAAsC,GAAtC,GAA2CQ,SAAlD,CAAF;AACD;AATsC,CAAnB,CAA1B;AAYA,MAAMI,MAAM,GAAGtB,MAAM,CAAC;AAACuB,EAAAA,OAAO,EAACrB;AAAT,CAAD,CAArB;AAEA,MAAMsB,GAAG,GAAG,sBAAZ;AAGAA,GAAG,CAACC,GAAJ,CAAQ,GAAR,EAAaC,cAAc,CAACC,QAA5B;AACAH,GAAG,CAACI,IAAJ,CAAS,GAAT,EAAaN,MAAM,CAACO,MAAP,CAAc,MAAd,CAAb,EAAqCH,cAAc,CAACI,UAApD;AACAN,GAAG,CAACO,GAAJ,CAAQ,MAAR,EAAgBL,cAAc,CAACM,UAA/B;AACAR,GAAG,CAACS,MAAJ,CAAW,MAAX,EAAmBP,cAAc,CAACQ,UAAlC;AACAV,GAAG,CAACW,KAAJ,CAAU,gBAAV,EAA4BT,cAAc,CAACU,QAA3C;AACAZ,GAAG,CAACW,KAAJ,CAAU,kBAAV,EAA8BT,cAAc,CAACW,UAA7C,E,CAEA;;AACAb,GAAG,CAACW,KAAJ,CAAU,mBAAV,EAA+BT,cAAc,CAACY,WAA9C;AACAd,GAAG,CAACW,KAAJ,CAAU,wBAAV,EAAoCT,cAAc,CAACa,eAAnD;AACAf,GAAG,CAACW,KAAJ,CAAU,0BAAV,EAAsCT,cAAc,CAACc,iBAArD;eAIehB,G","sourceRoot":"/Applications/dossier/mern_project_app2/src/routes/api/","sourcesContent":["import { Router } from 'express';\nimport * as PostController from '../../controllers/post.controller';\nconst multer  = require('multer')\n\nconst fileStorageEngine = multer.diskStorage({\n    destination:(req, file, cb) => {\n        cb(null, `${__dirname}/../../../client/public/uploads/profil`)\n    },\n    filename: function (req, file, cb) {\n        const uniqueSuffix = Date.now() + '-' + Math.round(Math.random() * 1E9)\n        let originalNameFile = file.originalname;\n        let extension = originalNameFile.substring(originalNameFile.lastIndexOf('.') + 1); \n        cb(null, file.fieldname + '-' + uniqueSuffix + \".\"+ extension )\n      }\n});\n\nconst upload = multer({storage:fileStorageEngine})\n\nconst api = Router();\n\n\napi.get('/', PostController.readPost);\napi.post('/',upload.single('file'),  PostController.createPost);\napi.put('/:id', PostController.updatePost);\napi.delete('/:id', PostController.deletePost);\napi.patch('/like-post/:id', PostController.likePost);\napi.patch('/unlike-post/:id', PostController.unlikePost);\n\n//comments\napi.patch('/comment-post/:id', PostController.commentPost)\napi.patch('/edit-comment-post/:id', PostController.editCommentPost)\napi.patch('/delete-comment-post/:id', PostController.deleteCommentPost)\n\n\n\nexport default api;"]}},"mtime":1651290027953},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/mern_project_app2/src/routes/api/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/mern_project_app2\",\"filename\":\"/Applications/dossier/mern_project_app2/src/routes/api/post.route.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/mern_project_app2\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar PostController = _interopRequireWildcard(require(\"../../controllers/post.controller\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst multer = require('multer');\n\nconst fileStorageEngine = multer.diskStorage({\n  destination: (req, file, cb) => {\n    cb(null, `${__dirname}/../../../client/public/uploads/post`);\n  },\n  filename: function (req, file, cb) {\n    const uniqueSuffix = Date.now() + '-' + Math.round(Math.random() * 1E9);\n    let originalNameFile = file.originalname;\n    let extension = originalNameFile.substring(originalNameFile.lastIndexOf('.') + 1);\n    cb(null, file.fieldname + '-' + uniqueSuffix + \".\" + extension);\n  }\n});\nconst upload = multer({\n  storage: fileStorageEngine\n});\nconst api = (0, _express.Router)();\napi.get('/', PostController.readPost);\napi.post('/', upload.single('file'), PostController.createPost);\napi.put('/:id', PostController.updatePost);\napi.delete('/:id', PostController.deletePost);\napi.patch('/like-post/:id', PostController.likePost);\napi.patch('/unlike-post/:id', PostController.unlikePost); //comments\n\napi.patch('/comment-post/:id', PostController.commentPost);\napi.patch('/edit-comment-post/:id', PostController.editCommentPost);\napi.patch('/delete-comment-post/:id', PostController.deleteCommentPost);\nvar _default = api;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvc3Qucm91dGUuanMiXSwibmFtZXMiOlsibXVsdGVyIiwicmVxdWlyZSIsImZpbGVTdG9yYWdlRW5naW5lIiwiZGlza1N0b3JhZ2UiLCJkZXN0aW5hdGlvbiIsInJlcSIsImZpbGUiLCJjYiIsIl9fZGlybmFtZSIsImZpbGVuYW1lIiwidW5pcXVlU3VmZml4IiwiRGF0ZSIsIm5vdyIsIk1hdGgiLCJyb3VuZCIsInJhbmRvbSIsIm9yaWdpbmFsTmFtZUZpbGUiLCJvcmlnaW5hbG5hbWUiLCJleHRlbnNpb24iLCJzdWJzdHJpbmciLCJsYXN0SW5kZXhPZiIsImZpZWxkbmFtZSIsInVwbG9hZCIsInN0b3JhZ2UiLCJhcGkiLCJnZXQiLCJQb3N0Q29udHJvbGxlciIsInJlYWRQb3N0IiwicG9zdCIsInNpbmdsZSIsImNyZWF0ZVBvc3QiLCJwdXQiLCJ1cGRhdGVQb3N0IiwiZGVsZXRlIiwiZGVsZXRlUG9zdCIsInBhdGNoIiwibGlrZVBvc3QiLCJ1bmxpa2VQb3N0IiwiY29tbWVudFBvc3QiLCJlZGl0Q29tbWVudFBvc3QiLCJkZWxldGVDb21tZW50UG9zdCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7Ozs7QUFDQSxNQUFNQSxNQUFNLEdBQUlDLE9BQU8sQ0FBQyxRQUFELENBQXZCOztBQUVBLE1BQU1DLGlCQUFpQixHQUFHRixNQUFNLENBQUNHLFdBQVAsQ0FBbUI7QUFDekNDLEVBQUFBLFdBQVcsRUFBQyxDQUFDQyxHQUFELEVBQU1DLElBQU4sRUFBWUMsRUFBWixLQUFtQjtBQUMzQkEsSUFBQUEsRUFBRSxDQUFDLElBQUQsRUFBUSxHQUFFQyxTQUFVLHNDQUFwQixDQUFGO0FBQ0gsR0FId0M7QUFJekNDLEVBQUFBLFFBQVEsRUFBRSxVQUFVSixHQUFWLEVBQWVDLElBQWYsRUFBcUJDLEVBQXJCLEVBQXlCO0FBQy9CLFVBQU1HLFlBQVksR0FBR0MsSUFBSSxDQUFDQyxHQUFMLEtBQWEsR0FBYixHQUFtQkMsSUFBSSxDQUFDQyxLQUFMLENBQVdELElBQUksQ0FBQ0UsTUFBTCxLQUFnQixHQUEzQixDQUF4QztBQUNBLFFBQUlDLGdCQUFnQixHQUFHVixJQUFJLENBQUNXLFlBQTVCO0FBQ0EsUUFBSUMsU0FBUyxHQUFHRixnQkFBZ0IsQ0FBQ0csU0FBakIsQ0FBMkJILGdCQUFnQixDQUFDSSxXQUFqQixDQUE2QixHQUE3QixJQUFvQyxDQUEvRCxDQUFoQjtBQUNBYixJQUFBQSxFQUFFLENBQUMsSUFBRCxFQUFPRCxJQUFJLENBQUNlLFNBQUwsR0FBaUIsR0FBakIsR0FBdUJYLFlBQXZCLEdBQXNDLEdBQXRDLEdBQTJDUSxTQUFsRCxDQUFGO0FBQ0Q7QUFUc0MsQ0FBbkIsQ0FBMUI7QUFZQSxNQUFNSSxNQUFNLEdBQUd0QixNQUFNLENBQUM7QUFBQ3VCLEVBQUFBLE9BQU8sRUFBQ3JCO0FBQVQsQ0FBRCxDQUFyQjtBQUVBLE1BQU1zQixHQUFHLEdBQUcsc0JBQVo7QUFHQUEsR0FBRyxDQUFDQyxHQUFKLENBQVEsR0FBUixFQUFhQyxjQUFjLENBQUNDLFFBQTVCO0FBQ0FILEdBQUcsQ0FBQ0ksSUFBSixDQUFTLEdBQVQsRUFBYU4sTUFBTSxDQUFDTyxNQUFQLENBQWMsTUFBZCxDQUFiLEVBQXFDSCxjQUFjLENBQUNJLFVBQXBEO0FBQ0FOLEdBQUcsQ0FBQ08sR0FBSixDQUFRLE1BQVIsRUFBZ0JMLGNBQWMsQ0FBQ00sVUFBL0I7QUFDQVIsR0FBRyxDQUFDUyxNQUFKLENBQVcsTUFBWCxFQUFtQlAsY0FBYyxDQUFDUSxVQUFsQztBQUNBVixHQUFHLENBQUNXLEtBQUosQ0FBVSxnQkFBVixFQUE0QlQsY0FBYyxDQUFDVSxRQUEzQztBQUNBWixHQUFHLENBQUNXLEtBQUosQ0FBVSxrQkFBVixFQUE4QlQsY0FBYyxDQUFDVyxVQUE3QyxFLENBRUE7O0FBQ0FiLEdBQUcsQ0FBQ1csS0FBSixDQUFVLG1CQUFWLEVBQStCVCxjQUFjLENBQUNZLFdBQTlDO0FBQ0FkLEdBQUcsQ0FBQ1csS0FBSixDQUFVLHdCQUFWLEVBQW9DVCxjQUFjLENBQUNhLGVBQW5EO0FBQ0FmLEdBQUcsQ0FBQ1csS0FBSixDQUFVLDBCQUFWLEVBQXNDVCxjQUFjLENBQUNjLGlCQUFyRDtlQUllaEIsRyIsInNvdXJjZVJvb3QiOiIvQXBwbGljYXRpb25zL2Rvc3NpZXIvbWVybl9wcm9qZWN0X2FwcDIvc3JjL3JvdXRlcy9hcGkvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUm91dGVyIH0gZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgKiBhcyBQb3N0Q29udHJvbGxlciBmcm9tICcuLi8uLi9jb250cm9sbGVycy9wb3N0LmNvbnRyb2xsZXInO1xuY29uc3QgbXVsdGVyICA9IHJlcXVpcmUoJ211bHRlcicpXG5cbmNvbnN0IGZpbGVTdG9yYWdlRW5naW5lID0gbXVsdGVyLmRpc2tTdG9yYWdlKHtcbiAgICBkZXN0aW5hdGlvbjoocmVxLCBmaWxlLCBjYikgPT4ge1xuICAgICAgICBjYihudWxsLCBgJHtfX2Rpcm5hbWV9Ly4uLy4uLy4uL2NsaWVudC9wdWJsaWMvdXBsb2Fkcy9wb3N0YClcbiAgICB9LFxuICAgIGZpbGVuYW1lOiBmdW5jdGlvbiAocmVxLCBmaWxlLCBjYikge1xuICAgICAgICBjb25zdCB1bmlxdWVTdWZmaXggPSBEYXRlLm5vdygpICsgJy0nICsgTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMUU5KVxuICAgICAgICBsZXQgb3JpZ2luYWxOYW1lRmlsZSA9IGZpbGUub3JpZ2luYWxuYW1lO1xuICAgICAgICBsZXQgZXh0ZW5zaW9uID0gb3JpZ2luYWxOYW1lRmlsZS5zdWJzdHJpbmcob3JpZ2luYWxOYW1lRmlsZS5sYXN0SW5kZXhPZignLicpICsgMSk7IFxuICAgICAgICBjYihudWxsLCBmaWxlLmZpZWxkbmFtZSArICctJyArIHVuaXF1ZVN1ZmZpeCArIFwiLlwiKyBleHRlbnNpb24gKVxuICAgICAgfVxufSk7XG5cbmNvbnN0IHVwbG9hZCA9IG11bHRlcih7c3RvcmFnZTpmaWxlU3RvcmFnZUVuZ2luZX0pXG5cbmNvbnN0IGFwaSA9IFJvdXRlcigpO1xuXG5cbmFwaS5nZXQoJy8nLCBQb3N0Q29udHJvbGxlci5yZWFkUG9zdCk7XG5hcGkucG9zdCgnLycsdXBsb2FkLnNpbmdsZSgnZmlsZScpLCAgUG9zdENvbnRyb2xsZXIuY3JlYXRlUG9zdCk7XG5hcGkucHV0KCcvOmlkJywgUG9zdENvbnRyb2xsZXIudXBkYXRlUG9zdCk7XG5hcGkuZGVsZXRlKCcvOmlkJywgUG9zdENvbnRyb2xsZXIuZGVsZXRlUG9zdCk7XG5hcGkucGF0Y2goJy9saWtlLXBvc3QvOmlkJywgUG9zdENvbnRyb2xsZXIubGlrZVBvc3QpO1xuYXBpLnBhdGNoKCcvdW5saWtlLXBvc3QvOmlkJywgUG9zdENvbnRyb2xsZXIudW5saWtlUG9zdCk7XG5cbi8vY29tbWVudHNcbmFwaS5wYXRjaCgnL2NvbW1lbnQtcG9zdC86aWQnLCBQb3N0Q29udHJvbGxlci5jb21tZW50UG9zdClcbmFwaS5wYXRjaCgnL2VkaXQtY29tbWVudC1wb3N0LzppZCcsIFBvc3RDb250cm9sbGVyLmVkaXRDb21tZW50UG9zdClcbmFwaS5wYXRjaCgnL2RlbGV0ZS1jb21tZW50LXBvc3QvOmlkJywgUG9zdENvbnRyb2xsZXIuZGVsZXRlQ29tbWVudFBvc3QpXG5cblxuXG5leHBvcnQgZGVmYXVsdCBhcGk7Il19","map":{"version":3,"sources":["post.route.js"],"names":["multer","require","fileStorageEngine","diskStorage","destination","req","file","cb","__dirname","filename","uniqueSuffix","Date","now","Math","round","random","originalNameFile","originalname","extension","substring","lastIndexOf","fieldname","upload","storage","api","get","PostController","readPost","post","single","createPost","put","updatePost","delete","deletePost","patch","likePost","unlikePost","commentPost","editCommentPost","deleteCommentPost"],"mappings":";;;;;;;AAAA;;AACA;;;;;;AACA,MAAMA,MAAM,GAAIC,OAAO,CAAC,QAAD,CAAvB;;AAEA,MAAMC,iBAAiB,GAAGF,MAAM,CAACG,WAAP,CAAmB;AACzCC,EAAAA,WAAW,EAAC,CAACC,GAAD,EAAMC,IAAN,EAAYC,EAAZ,KAAmB;AAC3BA,IAAAA,EAAE,CAAC,IAAD,EAAQ,GAAEC,SAAU,sCAApB,CAAF;AACH,GAHwC;AAIzCC,EAAAA,QAAQ,EAAE,UAAUJ,GAAV,EAAeC,IAAf,EAAqBC,EAArB,EAAyB;AAC/B,UAAMG,YAAY,GAAGC,IAAI,CAACC,GAAL,KAAa,GAAb,GAAmBC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,GAA3B,CAAxC;AACA,QAAIC,gBAAgB,GAAGV,IAAI,CAACW,YAA5B;AACA,QAAIC,SAAS,GAAGF,gBAAgB,CAACG,SAAjB,CAA2BH,gBAAgB,CAACI,WAAjB,CAA6B,GAA7B,IAAoC,CAA/D,CAAhB;AACAb,IAAAA,EAAE,CAAC,IAAD,EAAOD,IAAI,CAACe,SAAL,GAAiB,GAAjB,GAAuBX,YAAvB,GAAsC,GAAtC,GAA2CQ,SAAlD,CAAF;AACD;AATsC,CAAnB,CAA1B;AAYA,MAAMI,MAAM,GAAGtB,MAAM,CAAC;AAACuB,EAAAA,OAAO,EAACrB;AAAT,CAAD,CAArB;AAEA,MAAMsB,GAAG,GAAG,sBAAZ;AAGAA,GAAG,CAACC,GAAJ,CAAQ,GAAR,EAAaC,cAAc,CAACC,QAA5B;AACAH,GAAG,CAACI,IAAJ,CAAS,GAAT,EAAaN,MAAM,CAACO,MAAP,CAAc,MAAd,CAAb,EAAqCH,cAAc,CAACI,UAApD;AACAN,GAAG,CAACO,GAAJ,CAAQ,MAAR,EAAgBL,cAAc,CAACM,UAA/B;AACAR,GAAG,CAACS,MAAJ,CAAW,MAAX,EAAmBP,cAAc,CAACQ,UAAlC;AACAV,GAAG,CAACW,KAAJ,CAAU,gBAAV,EAA4BT,cAAc,CAACU,QAA3C;AACAZ,GAAG,CAACW,KAAJ,CAAU,kBAAV,EAA8BT,cAAc,CAACW,UAA7C,E,CAEA;;AACAb,GAAG,CAACW,KAAJ,CAAU,mBAAV,EAA+BT,cAAc,CAACY,WAA9C;AACAd,GAAG,CAACW,KAAJ,CAAU,wBAAV,EAAoCT,cAAc,CAACa,eAAnD;AACAf,GAAG,CAACW,KAAJ,CAAU,0BAAV,EAAsCT,cAAc,CAACc,iBAArD;eAIehB,G","sourceRoot":"/Applications/dossier/mern_project_app2/src/routes/api/","sourcesContent":["import { Router } from 'express';\nimport * as PostController from '../../controllers/post.controller';\nconst multer  = require('multer')\n\nconst fileStorageEngine = multer.diskStorage({\n    destination:(req, file, cb) => {\n        cb(null, `${__dirname}/../../../client/public/uploads/post`)\n    },\n    filename: function (req, file, cb) {\n        const uniqueSuffix = Date.now() + '-' + Math.round(Math.random() * 1E9)\n        let originalNameFile = file.originalname;\n        let extension = originalNameFile.substring(originalNameFile.lastIndexOf('.') + 1); \n        cb(null, file.fieldname + '-' + uniqueSuffix + \".\"+ extension )\n      }\n});\n\nconst upload = multer({storage:fileStorageEngine})\n\nconst api = Router();\n\n\napi.get('/', PostController.readPost);\napi.post('/',upload.single('file'),  PostController.createPost);\napi.put('/:id', PostController.updatePost);\napi.delete('/:id', PostController.deletePost);\napi.patch('/like-post/:id', PostController.likePost);\napi.patch('/unlike-post/:id', PostController.unlikePost);\n\n//comments\napi.patch('/comment-post/:id', PostController.commentPost)\napi.patch('/edit-comment-post/:id', PostController.editCommentPost)\napi.patch('/delete-comment-post/:id', PostController.deleteCommentPost)\n\n\n\nexport default api;"]}},"mtime":1651290330188},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/mern_project_app2/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/mern_project_app2\",\"filename\":\"/Applications/dossier/mern_project_app2/src/controllers/post.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/mern_project_app2\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.updatePost = exports.unlikePost = exports.readPost = exports.likePost = exports.editCommentPost = exports.deletePost = exports.deleteCommentPost = exports.createPost = exports.commentPost = void 0;\n\nvar _errors = require(\"../utils/errors.utils\");\n\nconst Post = require('../models/post.model');\n\nconst User = require('../models/user.model');\n\nconst ObjectID = require(\"mongoose\").Types.ObjectId;\n\nconst readPost = async (req, res, next) => {\n  try {\n    const posts = await Post.find().sort({\n      createdAt: -1\n    });\n    res.status(200).json(posts);\n  } catch (err) {\n    res.status(200).json(err);\n  }\n};\n\nexports.readPost = readPost;\n\nconst createPost = async (req, res, next) => {\n  if (req.file != null) {\n    console.log(req.file);\n\n    try {\n      if (req.file.mimetype != \"image/jpg\" && req.file.mimetype != \"image/png\" && req.file.mimetype != \"image/jpeg\") {\n        throw new Error('invalid file');\n      }\n\n      if (req.file.size > 500000) {\n        throw new Error('max size');\n      }\n    } catch (err) {\n      const errors = (0, _errors.uploadErrors)(err);\n      return res.status(201).json(errors);\n    }\n  }\n\n  const newPost = new Post({\n    posterId: req.body.posterId,\n    message: req.body.message,\n    picture: req.file != null ? `./uploads/post/${req.file.filename}` : \"\",\n    video: req.body.video,\n    likers: [],\n    comments: []\n  });\n\n  try {\n    const post = await newPost.save();\n    return res.status(201).json(post);\n  } catch (err) {\n    return res.status(400).json(err);\n  }\n};\n\nexports.createPost = createPost;\n\nconst updatePost = async (req, res, next) => {\n  if (!ObjectID.isValid(req.params.id)) {\n    return res.status(400).send(`Id unknown : ${req.params.id}`);\n  }\n\n  try {\n    const updatedRecord = {\n      message: req.body.message\n    };\n    const newPost = await Post.findByIdAndUpdate(req.params.id, {\n      $set: updatedRecord\n    }, {\n      new: true\n    });\n    res.status(200).send(newPost);\n  } catch (err) {\n    res.status(400).json(err);\n  }\n};\n\nexports.updatePost = updatePost;\n\nconst deletePost = async (req, res, next) => {\n  if (!ObjectID.isValid(req.params.id)) {\n    return res.status(400).send(`Id unknown : ${req.params.id}`);\n  }\n\n  try {\n    await Post.remove({\n      _id: req.params.id\n    }).exec();\n    res.status(200).json({\n      message: 'Successfully deleted !'\n    });\n  } catch (err) {\n    res.status(500).json({\n      message: err\n    });\n  }\n};\n\nexports.deletePost = deletePost;\n\nconst likePost = async (req, res, next) => {\n  if (!ObjectID.isValid(req.params.id)) {\n    return res.status(400).send(`Id unknown : ${req.params.id}`);\n  }\n\n  try {\n    const post = await Post.findByIdAndUpdate(req.params.id, {\n      $addToSet: {\n        likers: req.body.id\n      }\n    }, {\n      new: true\n    });\n    const user = await User.findByIdAndUpdate(req.body.id, {\n      $addToSet: {\n        likes: req.params.id\n      }\n    }, {\n      new: true\n    });\n    res.status(200).send(user);\n  } catch (err) {\n    res.status(400).send({\n      err\n    });\n  }\n};\n\nexports.likePost = likePost;\n\nconst unlikePost = async (req, res, next) => {\n  if (!ObjectID.isValid(req.params.id)) {\n    return res.status(400).send(`Id unknown : ${req.params.id}`);\n  }\n\n  try {\n    const post = await Post.findByIdAndUpdate(req.params.id, {\n      $pull: {\n        likers: req.body.id\n      }\n    }, {\n      new: true\n    });\n    const user = await User.findByIdAndUpdate(req.body.id, {\n      $pull: {\n        likes: req.params.id\n      }\n    }, {\n      new: true\n    });\n    res.status(200).send(user);\n  } catch (err) {\n    res.status(400).send({\n      err\n    });\n  }\n};\n\nexports.unlikePost = unlikePost;\n\nconst commentPost = async (req, res, next) => {\n  if (!ObjectID.isValid(req.params.id)) {\n    return res.status(400).send(`Id unknown : ${req.params.id}`);\n  }\n\n  try {\n    const post = await Post.findByIdAndUpdate(req.params.id, {\n      $push: {\n        comments: {\n          commenterId: req.body.id,\n          commenterPseudo: req.body.commenterPseudo,\n          text: req.body.text,\n          timestamp: new Date().getTime()\n        }\n      }\n    }, {\n      new: true\n    });\n    res.send(post);\n  } catch (err) {\n    res.status(400).send({\n      err\n    });\n  }\n};\n\nexports.commentPost = commentPost;\n\nconst editCommentPost = async (req, res, next) => {\n  if (!ObjectID.isValid(req.params.id)) {\n    return res.status(400).send(`Id unknown : ${req.params.id}`);\n  }\n\n  try {\n    //on récupère le post concerné\n    const post = await Post.findById(req.params.id); //on récupère le commentaire concerné\n\n    const theComment = await post.comments.find(comment => {\n      return comment._id.equals(req.body.commentId);\n    }); //on change le text\n\n    theComment.text = req.body.text; // on save les changements\n\n    await post.save(); //on send le post concerné\n\n    return res.send(post);\n  } catch (err) {\n    return res.status(400).send(err);\n  }\n};\n\nexports.editCommentPost = editCommentPost;\n\nconst deleteCommentPost = async (req, res, next) => {\n  if (!ObjectID.isValid(req.params.id)) {\n    return res.status(400).send(`Id unknown : ${req.params.id}`);\n  }\n\n  try {\n    const post = await Post.findByIdAndUpdate(req.params.id, {\n      $pull: {\n        comments: {\n          _id: req.body.commentId\n        }\n      }\n    }, {\n      new: true\n    }).then(newPost => {\n      res.send(newPost);\n    }).catch(err => {\n      return res.status(400).send(err);\n    });\n  } catch (err) {\n    return res.status(400).send(err);\n  }\n};\n\nexports.deleteCommentPost = deleteCommentPost;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvc3QuY29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJQb3N0IiwicmVxdWlyZSIsIlVzZXIiLCJPYmplY3RJRCIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWFkUG9zdCIsInJlcSIsInJlcyIsIm5leHQiLCJwb3N0cyIsImZpbmQiLCJzb3J0IiwiY3JlYXRlZEF0Iiwic3RhdHVzIiwianNvbiIsImVyciIsImNyZWF0ZVBvc3QiLCJmaWxlIiwiY29uc29sZSIsImxvZyIsIm1pbWV0eXBlIiwiRXJyb3IiLCJzaXplIiwiZXJyb3JzIiwibmV3UG9zdCIsInBvc3RlcklkIiwiYm9keSIsIm1lc3NhZ2UiLCJwaWN0dXJlIiwiZmlsZW5hbWUiLCJ2aWRlbyIsImxpa2VycyIsImNvbW1lbnRzIiwicG9zdCIsInNhdmUiLCJ1cGRhdGVQb3N0IiwiaXNWYWxpZCIsInBhcmFtcyIsImlkIiwic2VuZCIsInVwZGF0ZWRSZWNvcmQiLCJmaW5kQnlJZEFuZFVwZGF0ZSIsIiRzZXQiLCJuZXciLCJkZWxldGVQb3N0IiwicmVtb3ZlIiwiX2lkIiwiZXhlYyIsImxpa2VQb3N0IiwiJGFkZFRvU2V0IiwidXNlciIsImxpa2VzIiwidW5saWtlUG9zdCIsIiRwdWxsIiwiY29tbWVudFBvc3QiLCIkcHVzaCIsImNvbW1lbnRlcklkIiwiY29tbWVudGVyUHNldWRvIiwidGV4dCIsInRpbWVzdGFtcCIsIkRhdGUiLCJnZXRUaW1lIiwiZWRpdENvbW1lbnRQb3N0IiwiZmluZEJ5SWQiLCJ0aGVDb21tZW50IiwiY29tbWVudCIsImVxdWFscyIsImNvbW1lbnRJZCIsImRlbGV0ZUNvbW1lbnRQb3N0IiwidGhlbiIsImNhdGNoIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBR0E7O0FBSEEsTUFBTUEsSUFBSSxHQUFHQyxPQUFPLENBQUMsc0JBQUQsQ0FBcEI7O0FBQ0EsTUFBTUMsSUFBSSxHQUFHRCxPQUFPLENBQUMsc0JBQUQsQ0FBcEI7O0FBQ0EsTUFBTUUsUUFBUSxHQUFHRixPQUFPLENBQUMs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QixJQUFoQixDQUFxQnhCLEdBQXJCLENBQVA7QUFDSDtBQUNKLENBeEJNIiwic291cmNlUm9vdCI6Ii9BcHBsaWNhdGlvbnMvZG9zc2llci9tZXJuX3Byb2plY3RfYXBwMi9zcmMvY29udHJvbGxlcnMvIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgUG9zdCA9IHJlcXVpcmUoJy4uL21vZGVscy9wb3N0Lm1vZGVsJylcbmNvbnN0IFVzZXIgPSByZXF1aXJlKCcuLi9tb2RlbHMvdXNlci5tb2RlbCcpXG5jb25zdCBPYmplY3RJRCA9IHJlcXVpcmUoXCJtb25nb29zZVwiKS5UeXBlcy5PYmplY3RJZDtcbmltcG9ydCB7IHVwbG9hZEVycm9yc30gZnJvbSAnLi4vdXRpbHMvZXJyb3JzLnV0aWxzJ1xuXG5cbmV4cG9ydCBjb25zdCByZWFkUG9zdCA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHBvc3RzID0gYXdhaXQgUG9zdC5maW5kKCkuc29ydCh7IGNyZWF0ZWRBdDogLTEgfSlcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24ocG9zdHMpXG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oZXJyKVxuICAgIH1cbn1cbmV4cG9ydCBjb25zdCBjcmVhdGVQb3N0ID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgaWYocmVxLmZpbGUgIT0gbnVsbCl7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcS5maWxlIClcbiAgICAgICAgdHJ5e1xuICAgICAgICAgICAgaWYocmVxLmZpbGUubWltZXR5cGUgIT0gXCJpbWFnZS9qcGdcIiAmJiByZXEuZmlsZS5taW1ldHlwZSAhPSBcImltYWdlL3BuZ1wiICYmIHJlcS5maWxlLm1pbWV0eXBlICE9IFwiaW1hZ2UvanBlZ1wiKXtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgZmlsZScpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihyZXEuZmlsZS5zaXplID4gNTAwMDAwKXtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ21heCBzaXplJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaChlcnIpe1xuICAgICAgICAgICAgY29uc3QgZXJyb3JzID0gdXBsb2FkRXJyb3JzKGVycik7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDEpLmpzb24oZXJyb3JzKVxuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IG5ld1Bvc3QgPSBuZXcgUG9zdCh7XG4gICAgICAgIHBvc3RlcklkOiByZXEuYm9keS5wb3N0ZXJJZCxcbiAgICAgICAgbWVzc2FnZTogcmVxLmJvZHkubWVzc2FnZSxcbiAgICAgICAgcGljdHVyZTogcmVxLmZpbGUgIT0gbnVsbCA/IGAuL3VwbG9hZHMvcG9zdC8ke3JlcS5maWxlLmZpbGVuYW1lfWAgOiBcIlwiLFxuICAgICAgICB2aWRlbzogcmVxLmJvZHkudmlkZW8sXG4gICAgICAgIGxpa2VyczogW10sXG4gICAgICAgIGNvbW1lbnRzOiBbXSxcbiAgICB9KTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBwb3N0ID0gYXdhaXQgbmV3UG9zdC5zYXZlKCk7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMSkuanNvbihwb3N0KVxuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbihlcnIpXG4gICAgfVxufVxuZXhwb3J0IGNvbnN0IHVwZGF0ZVBvc3QgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICBpZiAoIU9iamVjdElELmlzVmFsaWQocmVxLnBhcmFtcy5pZCkpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKGBJZCB1bmtub3duIDogJHtyZXEucGFyYW1zLmlkfWApXG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZWRSZWNvcmQgPSB7XG4gICAgICAgICAgICBtZXNzYWdlOiByZXEuYm9keS5tZXNzYWdlXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmV3UG9zdCA9IGF3YWl0IFBvc3QuZmluZEJ5SWRBbmRVcGRhdGUoXG4gICAgICAgICAgICByZXEucGFyYW1zLmlkLFxuICAgICAgICAgICAgeyAkc2V0OiB1cGRhdGVkUmVjb3JkIH0sXG4gICAgICAgICAgICB7IG5ldzogdHJ1ZSB9XG4gICAgICAgIClcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQobmV3UG9zdClcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbihlcnIpXG4gICAgfVxuXG5cblxufVxuZXhwb3J0IGNvbnN0IGRlbGV0ZVBvc3QgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICBpZiAoIU9iamVjdElELmlzVmFsaWQocmVxLnBhcmFtcy5pZCkpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKGBJZCB1bmtub3duIDogJHtyZXEucGFyYW1zLmlkfWApXG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IFBvc3QucmVtb3ZlKHtcbiAgICAgICAgICAgIF9pZDogcmVxLnBhcmFtcy5pZFxuICAgICAgICB9KS5leGVjKClcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnU3VjY2Vzc2Z1bGx5IGRlbGV0ZWQgIScgfSlcblxuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogZXJyIH0pXG4gICAgfVxufVxuZXhwb3J0IGNvbnN0IGxpa2VQb3N0ID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgaWYgKCFPYmplY3RJRC5pc1ZhbGlkKHJlcS5wYXJhbXMuaWQpKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZChgSWQgdW5rbm93biA6ICR7cmVxLnBhcmFtcy5pZH1gKVxuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBjb25zdCBwb3N0ID0gYXdhaXQgUG9zdC5maW5kQnlJZEFuZFVwZGF0ZShcbiAgICAgICAgICAgIHJlcS5wYXJhbXMuaWQsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgJGFkZFRvU2V0OiB7IGxpa2VyczogcmVxLmJvZHkuaWQgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuZXc6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZEFuZFVwZGF0ZShcbiAgICAgICAgICAgIHJlcS5ib2R5LmlkLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICRhZGRUb1NldDogeyBsaWtlczogcmVxLnBhcmFtcy5pZCB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5ldzogdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgICByZXMuc3RhdHVzKDIwMCkuc2VuZCh1c2VyKVxuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNDAwKS5zZW5kKHsgZXJyIH0pXG4gICAgfVxufVxuZXhwb3J0IGNvbnN0IHVubGlrZVBvc3QgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICBpZiAoIU9iamVjdElELmlzVmFsaWQocmVxLnBhcmFtcy5pZCkpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKGBJZCB1bmtub3duIDogJHtyZXEucGFyYW1zLmlkfWApXG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHBvc3QgPSBhd2FpdCBQb3N0LmZpbmRCeUlkQW5kVXBkYXRlKFxuICAgICAgICAgICAgcmVxLnBhcmFtcy5pZCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAkcHVsbDogeyBsaWtlcnM6IHJlcS5ib2R5LmlkIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmV3OiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWRBbmRVcGRhdGUoXG4gICAgICAgICAgICByZXEuYm9keS5pZCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAkcHVsbDogeyBsaWtlczogcmVxLnBhcmFtcy5pZCB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5ldzogdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgICByZXMuc3RhdHVzKDIwMCkuc2VuZCh1c2VyKVxuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNDAwKS5zZW5kKHsgZXJyIH0pXG4gICAgfVxufVxuXG5leHBvcnQgY29uc3QgY29tbWVudFBvc3QgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICBpZiAoIU9iamVjdElELmlzVmFsaWQocmVxLnBhcmFtcy5pZCkpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKGBJZCB1bmtub3duIDogJHtyZXEucGFyYW1zLmlkfWApXG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHBvc3QgPSBhd2FpdCBQb3N0LmZpbmRCeUlkQW5kVXBkYXRlKFxuICAgICAgICAgICAgcmVxLnBhcmFtcy5pZCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAkcHVzaDoge1xuICAgICAgICAgICAgICAgICAgICBjb21tZW50czoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudGVySWQ6IHJlcS5ib2R5LmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudGVyUHNldWRvOiByZXEuYm9keS5jb21tZW50ZXJQc2V1ZG8sXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiByZXEuYm9keS50ZXh0LFxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLmdldFRpbWUoKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHsgbmV3OiB0cnVlIH1cbiAgICAgICAgKVxuICAgICAgICByZXMuc2VuZChwb3N0KVxuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNDAwKS5zZW5kKHsgZXJyIH0pXG4gICAgfVxufVxuXG5leHBvcnQgY29uc3QgZWRpdENvbW1lbnRQb3N0ID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgaWYgKCFPYmplY3RJRC5pc1ZhbGlkKHJlcS5wYXJhbXMuaWQpKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZChgSWQgdW5rbm93biA6ICR7cmVxLnBhcmFtcy5pZH1gKVxuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvL29uIHLDqWN1cMOocmUgbGUgcG9zdCBjb25jZXJuw6lcbiAgICAgICAgY29uc3QgcG9zdCA9IGF3YWl0IFBvc3QuZmluZEJ5SWQocmVxLnBhcmFtcy5pZClcbiAgICAgICAgLy9vbiByw6ljdXDDqHJlIGxlIGNvbW1lbnRhaXJlIGNvbmNlcm7DqVxuICAgICAgICBjb25zdCB0aGVDb21tZW50ID0gYXdhaXQgcG9zdC5jb21tZW50cy5maW5kKChjb21tZW50KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gY29tbWVudC5faWQuZXF1YWxzKHJlcS5ib2R5LmNvbW1lbnRJZClcbiAgICAgICAgfSlcbiAgICAgICAgLy9vbiBjaGFuZ2UgbGUgdGV4dFxuICAgICAgICB0aGVDb21tZW50LnRleHQgPSByZXEuYm9keS50ZXh0XG4gICAgICAgIC8vIG9uIHNhdmUgbGVzIGNoYW5nZW1lbnRzXG4gICAgICAgIGF3YWl0IHBvc3Quc2F2ZSgpO1xuICAgICAgICAvL29uIHNlbmQgbGUgcG9zdCBjb25jZXJuw6lcbiAgICAgICAgcmV0dXJuIHJlcy5zZW5kKHBvc3QpXG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKGVycilcbiAgICB9XG59XG5cblxuZXhwb3J0IGNvbnN0IGRlbGV0ZUNvbW1lbnRQb3N0ID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgaWYgKCFPYmplY3RJRC5pc1ZhbGlkKHJlcS5wYXJhbXMuaWQpKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZChgSWQgdW5rbm93biA6ICR7cmVxLnBhcmFtcy5pZH1gKVxuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBjb25zdCBwb3N0ID0gYXdhaXQgUG9zdC5maW5kQnlJZEFuZFVwZGF0ZShcbiAgICAgICAgICAgIHJlcS5wYXJhbXMuaWQsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgJHB1bGw6IHtcbiAgICAgICAgICAgICAgICAgICAgY29tbWVudHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pZDogcmVxLmJvZHkuY29tbWVudElkXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgeyBuZXc6IHRydWUgfVxuICAgICAgICApLnRoZW4oKG5ld1Bvc3QpID0+IHtcbiAgICAgICAgICAgIHJlcy5zZW5kKG5ld1Bvc3QpXG4gICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZChlcnIpXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZChlcnIpXG4gICAgfVxufSJdfQ==","map":{"version":3,"sources":["post.controller.js"],"names":["Post","require","User","ObjectID","Types","ObjectId","readPost","req","res","next","posts","find","sort","createdAt","status","json","err","createPost","file","console","log","mimetype","Error","size","errors","newPost","posterId","body","message","picture","filename","video","likers","comments","post","save","updatePost","isValid","params","id","send","updatedRecord","findByIdAndUpdate","$set","new","deletePost","remove","_id","exec","likePost","$addToSet","user","likes","unlikePost","$pull","commentPost","$push","commenterId","commenterPseudo","text","timestamp","Date","getTime","editCommentPost","findById","theComment","comment","equals","commentId","deleteCommentPost","then","catch"],"mappings":"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","sourceRoot":"/Applications/dossier/mern_project_app2/src/controllers/","sourcesContent":["const Post = require('../models/post.model')\nconst User = require('../models/user.model')\nconst ObjectID = require(\"mongoose\").Types.ObjectId;\nimport { uploadErrors} from '../utils/errors.utils'\n\n\nexport const readPost = async (req, res, next) => {\n    try {\n        const posts = await Post.find().sort({ createdAt: -1 })\n        res.status(200).json(posts)\n    }\n    catch (err) {\n        res.status(200).json(err)\n    }\n}\nexport const createPost = async (req, res, next) => {\n    if(req.file != null){\n        console.log(req.file )\n        try{\n            if(req.file.mimetype != \"image/jpg\" && req.file.mimetype != \"image/png\" && req.file.mimetype != \"image/jpeg\"){\n                throw new Error('invalid file')\n            }\n            if(req.file.size > 500000){\n                throw new Error('max size')\n            }\n        }\n        catch(err){\n            const errors = uploadErrors(err);\n            return res.status(201).json(errors)\n        }\n    }\n    const newPost = new Post({\n        posterId: req.body.posterId,\n        message: req.body.message,\n        picture: req.file != null ? `./uploads/post/${req.file.filename}` : \"\",\n        video: req.body.video,\n        likers: [],\n        comments: [],\n    });\n    try {\n        const post = await newPost.save();\n        return res.status(201).json(post)\n    }\n    catch (err) {\n        return res.status(400).json(err)\n    }\n}\nexport const updatePost = async (req, res, next) => {\n    if (!ObjectID.isValid(req.params.id)) {\n        return res.status(400).send(`Id unknown : ${req.params.id}`)\n    }\n    try {\n        const updatedRecord = {\n            message: req.body.message\n        }\n        const newPost = await Post.findByIdAndUpdate(\n            req.params.id,\n            { $set: updatedRecord },\n            { new: true }\n        )\n        res.status(200).send(newPost)\n    }\n    catch (err) {\n        res.status(400).json(err)\n    }\n\n\n\n}\nexport const deletePost = async (req, res, next) => {\n    if (!ObjectID.isValid(req.params.id)) {\n        return res.status(400).send(`Id unknown : ${req.params.id}`)\n    }\n    try {\n        await Post.remove({\n            _id: req.params.id\n        }).exec()\n        res.status(200).json({ message: 'Successfully deleted !' })\n\n    }\n    catch (err) {\n        res.status(500).json({ message: err })\n    }\n}\nexport const likePost = async (req, res, next) => {\n    if (!ObjectID.isValid(req.params.id)) {\n        return res.status(400).send(`Id unknown : ${req.params.id}`)\n    }\n    try {\n        const post = await Post.findByIdAndUpdate(\n            req.params.id,\n            {\n                $addToSet: { likers: req.body.id }\n            },\n            {\n                new: true\n            }\n        )\n        const user = await User.findByIdAndUpdate(\n            req.body.id,\n            {\n                $addToSet: { likes: req.params.id }\n            },\n            {\n                new: true\n            }\n        );\n        res.status(200).send(user)\n    }\n    catch (err) {\n        res.status(400).send({ err })\n    }\n}\nexport const unlikePost = async (req, res, next) => {\n    if (!ObjectID.isValid(req.params.id)) {\n        return res.status(400).send(`Id unknown : ${req.params.id}`)\n    }\n    try {\n        const post = await Post.findByIdAndUpdate(\n            req.params.id,\n            {\n                $pull: { likers: req.body.id }\n            },\n            {\n                new: true\n            }\n        )\n        const user = await User.findByIdAndUpdate(\n            req.body.id,\n            {\n                $pull: { likes: req.params.id }\n            },\n            {\n                new: true\n            }\n        );\n        res.status(200).send(user)\n    }\n    catch (err) {\n        res.status(400).send({ err })\n    }\n}\n\nexport const commentPost = async (req, res, next) => {\n    if (!ObjectID.isValid(req.params.id)) {\n        return res.status(400).send(`Id unknown : ${req.params.id}`)\n    }\n    try {\n        const post = await Post.findByIdAndUpdate(\n            req.params.id,\n            {\n                $push: {\n                    comments: {\n                        commenterId: req.body.id,\n                        commenterPseudo: req.body.commenterPseudo,\n                        text: req.body.text,\n                        timestamp: new Date().getTime()\n                    }\n                }\n            },\n            { new: true }\n        )\n        res.send(post)\n    }\n    catch (err) {\n        res.status(400).send({ err })\n    }\n}\n\nexport const editCommentPost = async (req, res, next) => {\n    if (!ObjectID.isValid(req.params.id)) {\n        return res.status(400).send(`Id unknown : ${req.params.id}`)\n    }\n    try {\n        //on récupère le post concerné\n        const post = await Post.findById(req.params.id)\n        //on récupère le commentaire concerné\n        const theComment = await post.comments.find((comment) => {\n            return comment._id.equals(req.body.commentId)\n        })\n        //on change le text\n        theComment.text = req.body.text\n        // on save les changements\n        await post.save();\n        //on send le post concerné\n        return res.send(post)\n    }\n    catch (err) {\n        return res.status(400).send(err)\n    }\n}\n\n\nexport const deleteCommentPost = async (req, res, next) => {\n    if (!ObjectID.isValid(req.params.id)) {\n        return res.status(400).send(`Id unknown : ${req.params.id}`)\n    }\n    try {\n        const post = await Post.findByIdAndUpdate(\n            req.params.id,\n            {\n                $pull: {\n                    comments: {\n                        _id: req.body.commentId\n                    }\n                }\n            },\n            { new: true }\n        ).then((newPost) => {\n            res.send(newPost)\n        }).catch((err) => {\n            return res.status(400).send(err)\n        });\n    }\n    catch (err) {\n        return res.status(400).send(err)\n    }\n}"]}},"mtime":1651290691641},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/mern_project_app2/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/mern_project_app2\",\"filename\":\"/Applications/dossier/mern_project_app2/src/models/post.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/mern_project_app2\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nconst mongoose = require('mongoose');\n\nconst PostSchema = new mongoose.Schema({\n  posterId: {\n    type: String,\n    required: true\n  },\n  message: {\n    type: String,\n    trim: true,\n    maxlength: 500\n  },\n  picture: {\n    type: String\n  },\n  video: {\n    type: String\n  },\n  likers: {\n    type: [String],\n    required: true\n  },\n  //la partie commentaire est une sous base de données\n  comments: {\n    type: [{\n      commenterId: String,\n      commenterPseudo: String,\n      text: String,\n      timestamp: Number\n    }],\n    required: true\n  }\n}, {\n  timestamps: true\n});\nlet Post = mongoose.model('post', PostSchema);\nmodule.exports = Post;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvc3QubW9kZWwuanMiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJyZXF1aXJlIiwiUG9zdFNjaGVtYSIsIlNjaGVtYSIsInBvc3RlcklkIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwibWVzc2FnZSIsInRyaW0iLCJtYXhsZW5ndGgiLCJwaWN0dXJlIiwidmlkZW8iLCJsaWtlcnMiLCJjb21tZW50cyIsImNvbW1lbnRlcklkIiwiY29tbWVudGVyUHNldWRvIiwidGV4dCIsInRpbWVzdGFtcCIsIk51bWJlciIsInRpbWVzdGFtcHMiLCJQb3N0IiwibW9kZWwiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU1BLFFBQVEsR0FBR0MsT0FBTyxDQUFDLFVBQUQsQ0FBeEI7O0FBRUEsTUFBTUMsVUFBVSxHQUFHLElBQUlGLFFBQVEsQ0FBQ0csTUFBYixDQUNmO0FBQ0lDLEVBQUFBLFFBQVEsRUFBRTtBQUNOQyxJQUFBQSxJQUFJLEVBQUVDLE1BREE7QUFFTkMsSUFBQUEsUUFBUSxFQUFFO0FBRkosR0FEZDtBQUtJQyxFQUFBQSxPQUFPLEVBQUU7QUFDTEgsSUFBQUEsSUFBSSxFQUFFQyxNQUREO0FBRUxHLElBQUFBLElBQUksRUFBRSxJQUZEO0FBR0xDLElBQUFBLFNBQVMsRUFBRTtBQUhOLEdBTGI7QUFVSUMsRUFBQUEsT0FBTyxFQUFFO0FBQ0xOLElBQUFBLElBQUksRUFBRUM7QUFERCxHQVZiO0FBYUlNLEVBQUFBLEtBQUssRUFBRTtBQUNIUCxJQUFBQSxJQUFJLEVBQUVDO0FBREgsR0FiWDtBQWdCSU8sRUFBQUEsTUFBTSxFQUFFO0FBQ0pSLElBQUFBLElBQUksRUFBRSxDQUFDQyxNQUFELENBREY7QUFFSkMsSUFBQUEsUUFBUSxFQUFFO0FBRk4sR0FoQlo7QUFvQkk7QUFDQU8sRUFBQUEsUUFBUSxFQUFFO0FBQ05ULElBQUFBLElBQUksRUFBRSxDQUNGO0FBQ0lVLE1BQUFBLFdBQVcsRUFBRVQsTUFEakI7QUFFSVUsTUFBQUEsZUFBZSxFQUFFVixNQUZyQjtBQUdJVyxNQUFBQSxJQUFJLEVBQUVYLE1BSFY7QUFJSVksTUFBQUEsU0FBUyxFQUFFQztBQUpmLEtBREUsQ0FEQTtBQVNOWixJQUFBQSxRQUFRLEVBQUU7QUFUSjtBQXJCZCxDQURlLEVBa0NmO0FBQ0lhLEVBQUFBLFVBQVUsRUFBRTtBQURoQixDQWxDZSxDQUFuQjtBQXVDQSxJQUFJQyxJQUFJLEdBQUdyQixRQUFRLENBQUNzQixLQUFULENBQWUsTUFBZixFQUF1QnBCLFVBQXZCLENBQVg7QUFDQXFCLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQkgsSUFBakIiLCJzb3VyY2VSb290IjoiL0FwcGxpY2F0aW9ucy9kb3NzaWVyL21lcm5fcHJvamVjdF9hcHAyL3NyYy9tb2RlbHMvIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xuXG5jb25zdCBQb3N0U2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYShcbiAgICB7XG4gICAgICAgIHBvc3RlcklkOiB7XG4gICAgICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgbWVzc2FnZToge1xuICAgICAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICAgICAgdHJpbTogdHJ1ZSxcbiAgICAgICAgICAgIG1heGxlbmd0aDogNTAwXG4gICAgICAgIH0sXG4gICAgICAgIHBpY3R1cmU6IHtcbiAgICAgICAgICAgIHR5cGU6IFN0cmluZ1xuICAgICAgICB9LFxuICAgICAgICB2aWRlbzoge1xuICAgICAgICAgICAgdHlwZTogU3RyaW5nXG4gICAgICAgIH0sXG4gICAgICAgIGxpa2Vyczoge1xuICAgICAgICAgICAgdHlwZTogW1N0cmluZ10sXG4gICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgLy9sYSBwYXJ0aWUgY29tbWVudGFpcmUgZXN0IHVuZSBzb3VzIGJhc2UgZGUgZG9ubsOpZXNcbiAgICAgICAgY29tbWVudHM6IHtcbiAgICAgICAgICAgIHR5cGU6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbW1lbnRlcklkOiBTdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgIGNvbW1lbnRlclBzZXVkbzogU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBTdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogTnVtYmVyXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICAgIHRpbWVzdGFtcHM6IHRydWVcbiAgICB9XG4pO1xuXG5sZXQgUG9zdCA9IG1vbmdvb3NlLm1vZGVsKCdwb3N0JywgUG9zdFNjaGVtYSlcbm1vZHVsZS5leHBvcnRzID0gUG9zdDsiXX0=","map":{"version":3,"sources":["post.model.js"],"names":["mongoose","require","PostSchema","Schema","posterId","type","String","required","message","trim","maxlength","picture","video","likers","comments","commenterId","commenterPseudo","text","timestamp","Number","timestamps","Post","model","module","exports"],"mappings":";;AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AAEA,MAAMC,UAAU,GAAG,IAAIF,QAAQ,CAACG,MAAb,CACf;AACIC,EAAAA,QAAQ,EAAE;AACNC,IAAAA,IAAI,EAAEC,MADA;AAENC,IAAAA,QAAQ,EAAE;AAFJ,GADd;AAKIC,EAAAA,OAAO,EAAE;AACLH,IAAAA,IAAI,EAAEC,MADD;AAELG,IAAAA,IAAI,EAAE,IAFD;AAGLC,IAAAA,SAAS,EAAE;AAHN,GALb;AAUIC,EAAAA,OAAO,EAAE;AACLN,IAAAA,IAAI,EAAEC;AADD,GAVb;AAaIM,EAAAA,KAAK,EAAE;AACHP,IAAAA,IAAI,EAAEC;AADH,GAbX;AAgBIO,EAAAA,MAAM,EAAE;AACJR,IAAAA,IAAI,EAAE,CAACC,MAAD,CADF;AAEJC,IAAAA,QAAQ,EAAE;AAFN,GAhBZ;AAoBI;AACAO,EAAAA,QAAQ,EAAE;AACNT,IAAAA,IAAI,EAAE,CACF;AACIU,MAAAA,WAAW,EAAET,MADjB;AAEIU,MAAAA,eAAe,EAAEV,MAFrB;AAGIW,MAAAA,IAAI,EAAEX,MAHV;AAIIY,MAAAA,SAAS,EAAEC;AAJf,KADE,CADA;AASNZ,IAAAA,QAAQ,EAAE;AATJ;AArBd,CADe,EAkCf;AACIa,EAAAA,UAAU,EAAE;AADhB,CAlCe,CAAnB;AAuCA,IAAIC,IAAI,GAAGrB,QAAQ,CAACsB,KAAT,CAAe,MAAf,EAAuBpB,UAAvB,CAAX;AACAqB,MAAM,CAACC,OAAP,GAAiBH,IAAjB","sourceRoot":"/Applications/dossier/mern_project_app2/src/models/","sourcesContent":["const mongoose = require('mongoose');\n\nconst PostSchema = new mongoose.Schema(\n    {\n        posterId: {\n            type: String,\n            required: true,\n        },\n        message: {\n            type: String,\n            trim: true,\n            maxlength: 500\n        },\n        picture: {\n            type: String\n        },\n        video: {\n            type: String\n        },\n        likers: {\n            type: [String],\n            required: true,\n        },\n        //la partie commentaire est une sous base de données\n        comments: {\n            type: [\n                {\n                    commenterId: String,\n                    commenterPseudo: String,\n                    text: String,\n                    timestamp: Number\n                }\n            ],\n            required: true,\n        }\n    },\n    {\n        timestamps: true\n    }\n);\n\nlet Post = mongoose.model('post', PostSchema)\nmodule.exports = Post;"]}},"mtime":1651276586978},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/mern_project_app2/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/mern_project_app2\",\"filename\":\"/Applications/dossier/mern_project_app2/src/models/user.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/mern_project_app2\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nconst mongoose = require('mongoose');\n\nconst {\n  isEmail\n} = require('validator');\n\nconst bcrypt = require('bcrypt');\n\nconst Schema = mongoose.Schema;\nconst UserSchema = new Schema({\n  pseudo: {\n    type: String,\n    required: true,\n    minlength: 3,\n    maxlength: 55,\n    unique: true,\n    trim: true\n  },\n  email: {\n    type: String,\n    required: true,\n    validate: [isEmail],\n    lowercase: true,\n    unique: true,\n    trim: true\n  },\n  password: {\n    type: String,\n    required: true,\n    max: 1024,\n    minlength: 6\n  },\n  picture: {\n    type: String,\n    default: \"./uploads/profile/random-user.png\"\n  },\n  bio: {\n    type: String,\n    max: 1024\n  },\n  followers: {\n    type: [String]\n  },\n  following: {\n    type: [String]\n  },\n  likes: {\n    type: [String]\n  }\n}, {\n  timestamps: true\n}); //play function before save into db to allow crypt password\n// le next veut dire quand t'a fini passe à la suite\n\nUserSchema.pre('save', async function (next) {\n  const salt = await bcrypt.genSalt();\n  this.password = await bcrypt.hash(this.password, salt);\n  next();\n}); //c'est ce qui va nous permettre de comparer le password crypté de notre user en base de données avec celui utilise pdt le login d'un user\n\nUserSchema.statics.login = async function (email, password) {\n  const user = await this.findOne({\n    email: email\n  });\n\n  if (user) {\n    const auth = await bcrypt.compare(password, user.password);\n\n    if (auth) {\n      return user;\n    } else {\n      throw Error('Incorrect password');\n    }\n  }\n\n  throw Error('Incorrect password');\n};\n\nlet User = mongoose.model('User', UserSchema);\nmodule.exports = User;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIubW9kZWwuanMiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJyZXF1aXJlIiwiaXNFbWFpbCIsImJjcnlwdCIsIlNjaGVtYSIsIlVzZXJTY2hlbWEiLCJwc2V1ZG8iLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJtaW5sZW5ndGgiLCJtYXhsZW5ndGgiLCJ1bmlxdWUiLCJ0cmltIiwiZW1haWwiLCJ2YWxpZGF0ZSIsImxvd2VyY2FzZSIsInBhc3N3b3JkIiwibWF4IiwicGljdHVyZSIsImRlZmF1bHQiLCJiaW8iLCJmb2xsb3dlcnMiLCJmb2xsb3dpbmciLCJsaWtlcyIsInRpbWVzdGFtcHMiLCJwcmUiLCJuZXh0Iiwic2FsdCIsImdlblNhbHQiLCJoYXNoIiwic3RhdGljcyIsImxvZ2luIiwidXNlciIsImZpbmRPbmUiLCJhdXRoIiwiY29tcGFyZSIsIkVycm9yIiwiVXNlciIsIm1vZGVsIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxVQUFELENBQXhCOztBQUNBLE1BQU07QUFBQ0MsRUFBQUE7QUFBRCxJQUFZRCxPQUFPLENBQUMsV0FBRCxDQUF6Qjs7QUFDQSxNQUFNRSxNQUFNLEdBQUdGLE9BQU8sQ0FBQyxRQUFELENBQXRCOztBQUVBLE1BQU1HLE1BQU0sR0FBR0osUUFBUSxDQUFDSSxNQUF4QjtBQUNBLE1BQU1DLFVBQVUsR0FBRyxJQUFJRCxNQUFKLENBQVc7QUFDMUJFLEVBQUFBLE1BQU0sRUFBRTtBQUNKQyxJQUFBQSxJQUFJLEVBQUVDLE1BREY7QUFFSkMsSUFBQUEsUUFBUSxFQUFDLElBRkw7QUFHSkMsSUFBQUEsU0FBUyxFQUFFLENBSFA7QUFJSkMsSUFBQUEsU0FBUyxFQUFDLEVBSk47QUFLSkMsSUFBQUEsTUFBTSxFQUFDLElBTEg7QUFNSkMsSUFBQUEsSUFBSSxFQUFDO0FBTkQsR0FEa0I7QUFTMUJDLEVBQUFBLEtBQUssRUFBQztBQUNGUCxJQUFBQSxJQUFJLEVBQUNDLE1BREg7QUFFRkMsSUFBQUEsUUFBUSxFQUFDLElBRlA7QUFHRk0sSUFBQUEsUUFBUSxFQUFDLENBQUNiLE9BQUQsQ0FIUDtBQUlGYyxJQUFBQSxTQUFTLEVBQUMsSUFKUjtBQUtGSixJQUFBQSxNQUFNLEVBQUMsSUFMTDtBQU1GQyxJQUFBQSxJQUFJLEVBQUM7QUFOSCxHQVRvQjtBQWlCMUJJLEVBQUFBLFFBQVEsRUFBQztBQUNMVixJQUFBQSxJQUFJLEVBQUNDLE1BREE7QUFFTEMsSUFBQUEsUUFBUSxFQUFDLElBRko7QUFHTFMsSUFBQUEsR0FBRyxFQUFDLElBSEM7QUFJTFIsSUFBQUEsU0FBUyxFQUFDO0FBSkwsR0FqQmlCO0FBdUIxQlMsRUFBQUEsT0FBTyxFQUFDO0FBQ0paLElBQUFBLElBQUksRUFBQ0MsTUFERDtBQUVKWSxJQUFBQSxPQUFPLEVBQUM7QUFGSixHQXZCa0I7QUEyQjFCQyxFQUFBQSxHQUFHLEVBQUM7QUFDQWQsSUFBQUEsSUFBSSxFQUFDQyxNQURMO0FBRUFVLElBQUFBLEdBQUcsRUFBQztBQUZKLEdBM0JzQjtBQStCMUJJLEVBQUFBLFNBQVMsRUFBRTtBQUNQZixJQUFBQSxJQUFJLEVBQUMsQ0FBQ0MsTUFBRDtBQURFLEdBL0JlO0FBa0MxQmUsRUFBQUEsU0FBUyxFQUFDO0FBQ05oQixJQUFBQSxJQUFJLEVBQUMsQ0FBQ0MsTUFBRDtBQURDLEdBbENnQjtBQXFDMUJnQixFQUFBQSxLQUFLLEVBQUU7QUFDSGpCLElBQUFBLElBQUksRUFBQyxDQUFDQyxNQUFEO0FBREY7QUFyQ21CLENBQVgsRUF3Q2hCO0FBQ0NpQixFQUFBQSxVQUFVLEVBQUM7QUFEWixDQXhDZ0IsQ0FBbkIsQyxDQTZDQTtBQUNBOztBQUNBcEIsVUFBVSxDQUFDcUIsR0FBWCxDQUFlLE1BQWYsRUFBdUIsZ0JBQWdCQyxJQUFoQixFQUFxQjtBQUN4QyxRQUFNQyxJQUFJLEdBQUcsTUFBTXpCLE1BQU0sQ0FBQzBCLE9BQVAsRUFBbkI7QUFDQSxPQUFLWixRQUFMLEdBQWdCLE1BQU1kLE1BQU0sQ0FBQzJCLElBQVAsQ0FBWSxLQUFLYixRQUFqQixFQUEyQlcsSUFBM0IsQ0FBdEI7QUFDQUQsRUFBQUEsSUFBSTtBQUNQLENBSkQsRSxDQU1BOztBQUNBdEIsVUFBVSxDQUFDMEIsT0FBWCxDQUFtQkMsS0FBbkIsR0FBMkIsZ0JBQWVsQixLQUFmLEVBQXNCRyxRQUF0QixFQUErQjtBQUN0RCxRQUFNZ0IsSUFBSSxHQUFHLE1BQU0sS0FBS0MsT0FBTCxDQUFhO0FBQUNwQixJQUFBQSxLQUFLLEVBQUVBO0FBQVIsR0FBYixDQUFuQjs7QUFDQSxNQUFHbUIsSUFBSCxFQUFRO0FBQ0osVUFBTUUsSUFBSSxHQUFHLE1BQU1oQyxNQUFNLENBQUNpQyxPQUFQLENBQWVuQixRQUFmLEVBQXlCZ0IsSUFBSSxDQUFDaEIsUUFBOUIsQ0FBbkI7O0FBQ0EsUUFBR2tCLElBQUgsRUFBUTtBQUNKLGFBQU9GLElBQVA7QUFDSCxLQUZELE1BR0k7QUFDQSxZQUFNSSxLQUFLLENBQUMsb0JBQUQsQ0FBWDtBQUNIO0FBQ0o7O0FBQ0QsUUFBTUEsS0FBSyxDQUFDLG9CQUFELENBQVg7QUFDSCxDQVpEOztBQWFBLElBQUlDLElBQUksR0FBR3RDLFFBQVEsQ0FBQ3VDLEtBQVQsQ0FBZSxNQUFmLEVBQXVCbEMsVUFBdkIsQ0FBWDtBQUNBbUMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCSCxJQUFqQiIsInNvdXJjZVJvb3QiOiIvQXBwbGljYXRpb25zL2Rvc3NpZXIvbWVybl9wcm9qZWN0X2FwcDIvc3JjL21vZGVscy8iLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtb25nb29zZSA9IHJlcXVpcmUoJ21vbmdvb3NlJyk7XG5jb25zdCB7aXNFbWFpbH0gPSByZXF1aXJlKCd2YWxpZGF0b3InKTtcbmNvbnN0IGJjcnlwdCA9IHJlcXVpcmUoJ2JjcnlwdCcpO1xuXG5jb25zdCBTY2hlbWEgPSBtb25nb29zZS5TY2hlbWE7XG5jb25zdCBVc2VyU2NoZW1hID0gbmV3IFNjaGVtYSh7XG4gICAgcHNldWRvOiB7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgcmVxdWlyZWQ6dHJ1ZSxcbiAgICAgICAgbWlubGVuZ3RoOiAzLCBcbiAgICAgICAgbWF4bGVuZ3RoOjU1LCBcbiAgICAgICAgdW5pcXVlOnRydWUsXG4gICAgICAgIHRyaW06dHJ1ZVxuICAgIH0sXG4gICAgZW1haWw6e1xuICAgICAgICB0eXBlOlN0cmluZyxcbiAgICAgICAgcmVxdWlyZWQ6dHJ1ZSxcbiAgICAgICAgdmFsaWRhdGU6W2lzRW1haWxdLFxuICAgICAgICBsb3dlcmNhc2U6dHJ1ZSwgICAgICAgIFxuICAgICAgICB1bmlxdWU6dHJ1ZSxcbiAgICAgICAgdHJpbTp0cnVlLFxuICAgIH0sXG4gICAgcGFzc3dvcmQ6e1xuICAgICAgICB0eXBlOlN0cmluZyxcbiAgICAgICAgcmVxdWlyZWQ6dHJ1ZSxcbiAgICAgICAgbWF4OjEwMjQsXG4gICAgICAgIG1pbmxlbmd0aDo2XG4gICAgfSxcbiAgICBwaWN0dXJlOntcbiAgICAgICAgdHlwZTpTdHJpbmcsXG4gICAgICAgIGRlZmF1bHQ6XCIuL3VwbG9hZHMvcHJvZmlsZS9yYW5kb20tdXNlci5wbmdcIlxuICAgIH0sXG4gICAgYmlvOntcbiAgICAgICAgdHlwZTpTdHJpbmcsXG4gICAgICAgIG1heDoxMDI0XG4gICAgfSxcbiAgICBmb2xsb3dlcnM6IHtcbiAgICAgICAgdHlwZTpbU3RyaW5nXSxcbiAgICB9LFxuICAgIGZvbGxvd2luZzp7XG4gICAgICAgIHR5cGU6W1N0cmluZ10sXG4gICAgfSxcbiAgICBsaWtlczoge1xuICAgICAgICB0eXBlOltTdHJpbmddLFxuICAgIH1cbn0sIHtcbiAgICB0aW1lc3RhbXBzOnRydWVcbn1cbik7XG5cbi8vcGxheSBmdW5jdGlvbiBiZWZvcmUgc2F2ZSBpbnRvIGRiIHRvIGFsbG93IGNyeXB0IHBhc3N3b3JkXG4vLyBsZSBuZXh0IHZldXQgZGlyZSBxdWFuZCB0J2EgZmluaSBwYXNzZSDDoCBsYSBzdWl0ZVxuVXNlclNjaGVtYS5wcmUoJ3NhdmUnLCBhc3luYyBmdW5jdGlvbiAobmV4dCl7XG4gICAgY29uc3Qgc2FsdCA9IGF3YWl0IGJjcnlwdC5nZW5TYWx0KCk7XG4gICAgdGhpcy5wYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKHRoaXMucGFzc3dvcmQsIHNhbHQpO1xuICAgIG5leHQoKTtcbn0pXG5cbi8vYydlc3QgY2UgcXVpIHZhIG5vdXMgcGVybWV0dHJlIGRlIGNvbXBhcmVyIGxlIHBhc3N3b3JkIGNyeXB0w6kgZGUgbm90cmUgdXNlciBlbiBiYXNlIGRlIGRvbm7DqWVzIGF2ZWMgY2VsdWkgdXRpbGlzZSBwZHQgbGUgbG9naW4gZCd1biB1c2VyXG5Vc2VyU2NoZW1hLnN0YXRpY3MubG9naW4gPSBhc3luYyBmdW5jdGlvbihlbWFpbCwgcGFzc3dvcmQpe1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB0aGlzLmZpbmRPbmUoe2VtYWlsOiBlbWFpbH0pO1xuICAgIGlmKHVzZXIpe1xuICAgICAgICBjb25zdCBhdXRoID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIHVzZXIucGFzc3dvcmQpXG4gICAgICAgIGlmKGF1dGgpe1xuICAgICAgICAgICAgcmV0dXJuIHVzZXJcbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ0luY29ycmVjdCBwYXNzd29yZCcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRocm93IEVycm9yKCdJbmNvcnJlY3QgcGFzc3dvcmQnKTtcbn1cbmxldCBVc2VyID0gbW9uZ29vc2UubW9kZWwoJ1VzZXInLCBVc2VyU2NoZW1hKTtcbm1vZHVsZS5leHBvcnRzID0gVXNlcjsiXX0=","map":{"version":3,"sources":["user.model.js"],"names":["mongoose","require","isEmail","bcrypt","Schema","UserSchema","pseudo","type","String","required","minlength","maxlength","unique","trim","email","validate","lowercase","password","max","picture","default","bio","followers","following","likes","timestamps","pre","next","salt","genSalt","hash","statics","login","user","findOne","auth","compare","Error","User","model","module","exports"],"mappings":";;AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AACA,MAAM;AAACC,EAAAA;AAAD,IAAYD,OAAO,CAAC,WAAD,CAAzB;;AACA,MAAME,MAAM,GAAGF,OAAO,CAAC,QAAD,CAAtB;;AAEA,MAAMG,MAAM,GAAGJ,QAAQ,CAACI,MAAxB;AACA,MAAMC,UAAU,GAAG,IAAID,MAAJ,CAAW;AAC1BE,EAAAA,MAAM,EAAE;AACJC,IAAAA,IAAI,EAAEC,MADF;AAEJC,IAAAA,QAAQ,EAAC,IAFL;AAGJC,IAAAA,SAAS,EAAE,CAHP;AAIJC,IAAAA,SAAS,EAAC,EAJN;AAKJC,IAAAA,MAAM,EAAC,IALH;AAMJC,IAAAA,IAAI,EAAC;AAND,GADkB;AAS1BC,EAAAA,KAAK,EAAC;AACFP,IAAAA,IAAI,EAACC,MADH;AAEFC,IAAAA,QAAQ,EAAC,IAFP;AAGFM,IAAAA,QAAQ,EAAC,CAACb,OAAD,CAHP;AAIFc,IAAAA,SAAS,EAAC,IAJR;AAKFJ,IAAAA,MAAM,EAAC,IALL;AAMFC,IAAAA,IAAI,EAAC;AANH,GAToB;AAiB1BI,EAAAA,QAAQ,EAAC;AACLV,IAAAA,IAAI,EAACC,MADA;AAELC,IAAAA,QAAQ,EAAC,IAFJ;AAGLS,IAAAA,GAAG,EAAC,IAHC;AAILR,IAAAA,SAAS,EAAC;AAJL,GAjBiB;AAuB1BS,EAAAA,OAAO,EAAC;AACJZ,IAAAA,IAAI,EAACC,MADD;AAEJY,IAAAA,OAAO,EAAC;AAFJ,GAvBkB;AA2B1BC,EAAAA,GAAG,EAAC;AACAd,IAAAA,IAAI,EAACC,MADL;AAEAU,IAAAA,GAAG,EAAC;AAFJ,GA3BsB;AA+B1BI,EAAAA,SAAS,EAAE;AACPf,IAAAA,IAAI,EAAC,CAACC,MAAD;AADE,GA/Be;AAkC1Be,EAAAA,SAAS,EAAC;AACNhB,IAAAA,IAAI,EAAC,CAACC,MAAD;AADC,GAlCgB;AAqC1BgB,EAAAA,KAAK,EAAE;AACHjB,IAAAA,IAAI,EAAC,CAACC,MAAD;AADF;AArCmB,CAAX,EAwChB;AACCiB,EAAAA,UAAU,EAAC;AADZ,CAxCgB,CAAnB,C,CA6CA;AACA;;AACApB,UAAU,CAACqB,GAAX,CAAe,MAAf,EAAuB,gBAAgBC,IAAhB,EAAqB;AACxC,QAAMC,IAAI,GAAG,MAAMzB,MAAM,CAAC0B,OAAP,EAAnB;AACA,OAAKZ,QAAL,GAAgB,MAAMd,MAAM,CAAC2B,IAAP,CAAY,KAAKb,QAAjB,EAA2BW,IAA3B,CAAtB;AACAD,EAAAA,IAAI;AACP,CAJD,E,CAMA;;AACAtB,UAAU,CAAC0B,OAAX,CAAmBC,KAAnB,GAA2B,gBAAelB,KAAf,EAAsBG,QAAtB,EAA+B;AACtD,QAAMgB,IAAI,GAAG,MAAM,KAAKC,OAAL,CAAa;AAACpB,IAAAA,KAAK,EAAEA;AAAR,GAAb,CAAnB;;AACA,MAAGmB,IAAH,EAAQ;AACJ,UAAME,IAAI,GAAG,MAAMhC,MAAM,CAACiC,OAAP,CAAenB,QAAf,EAAyBgB,IAAI,CAAChB,QAA9B,CAAnB;;AACA,QAAGkB,IAAH,EAAQ;AACJ,aAAOF,IAAP;AACH,KAFD,MAGI;AACA,YAAMI,KAAK,CAAC,oBAAD,CAAX;AACH;AACJ;;AACD,QAAMA,KAAK,CAAC,oBAAD,CAAX;AACH,CAZD;;AAaA,IAAIC,IAAI,GAAGtC,QAAQ,CAACuC,KAAT,CAAe,MAAf,EAAuBlC,UAAvB,CAAX;AACAmC,MAAM,CAACC,OAAP,GAAiBH,IAAjB","sourceRoot":"/Applications/dossier/mern_project_app2/src/models/","sourcesContent":["const mongoose = require('mongoose');\nconst {isEmail} = require('validator');\nconst bcrypt = require('bcrypt');\n\nconst Schema = mongoose.Schema;\nconst UserSchema = new Schema({\n    pseudo: {\n        type: String,\n        required:true,\n        minlength: 3, \n        maxlength:55, \n        unique:true,\n        trim:true\n    },\n    email:{\n        type:String,\n        required:true,\n        validate:[isEmail],\n        lowercase:true,        \n        unique:true,\n        trim:true,\n    },\n    password:{\n        type:String,\n        required:true,\n        max:1024,\n        minlength:6\n    },\n    picture:{\n        type:String,\n        default:\"./uploads/profile/random-user.png\"\n    },\n    bio:{\n        type:String,\n        max:1024\n    },\n    followers: {\n        type:[String],\n    },\n    following:{\n        type:[String],\n    },\n    likes: {\n        type:[String],\n    }\n}, {\n    timestamps:true\n}\n);\n\n//play function before save into db to allow crypt password\n// le next veut dire quand t'a fini passe à la suite\nUserSchema.pre('save', async function (next){\n    const salt = await bcrypt.genSalt();\n    this.password = await bcrypt.hash(this.password, salt);\n    next();\n})\n\n//c'est ce qui va nous permettre de comparer le password crypté de notre user en base de données avec celui utilise pdt le login d'un user\nUserSchema.statics.login = async function(email, password){\n    const user = await this.findOne({email: email});\n    if(user){\n        const auth = await bcrypt.compare(password, user.password)\n        if(auth){\n            return user\n        }\n        else{\n            throw Error('Incorrect password');\n        }\n    }\n    throw Error('Incorrect password');\n}\nlet User = mongoose.model('User', UserSchema);\nmodule.exports = User;"]}},"mtime":1651271257003},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/mern_project_app2/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/mern_project_app2\",\"filename\":\"/Applications/dossier/mern_project_app2/src/models/user.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/mern_project_app2\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nconst mongoose = require('mongoose');\n\nconst {\n  isEmail\n} = require('validator');\n\nconst bcrypt = require('bcrypt');\n\nconst Schema = mongoose.Schema;\nconst UserSchema = new Schema({\n  pseudo: {\n    type: String,\n    required: true,\n    minlength: 3,\n    maxlength: 55,\n    unique: true,\n    trim: true\n  },\n  email: {\n    type: String,\n    required: true,\n    validate: [isEmail],\n    lowercase: true,\n    unique: true,\n    trim: true\n  },\n  password: {\n    type: String,\n    required: true,\n    max: 1024,\n    minlength: 6\n  },\n  picture: {\n    type: String,\n    default: \"./uploads/profile/random-user.png\"\n  },\n  bio: {\n    type: String,\n    max: 1024\n  },\n  followers: {\n    type: [String]\n  },\n  following: {\n    type: [String]\n  },\n  likes: {\n    type: [String]\n  }\n}, {\n  timestamps: true\n}); //play function before save into db to allow crypt password\n// le next veut dire quand t'a fini passe à la suite\n\nUserSchema.pre('save', async function (next) {\n  const salt = await bcrypt.genSalt();\n  this.password = await bcrypt.hash(this.password, salt);\n  next();\n}); //c'est ce qui va nous permettre de comparer le password crypté de notre user en base de données avec celui utilise pdt le login d'un user\n\nUserSchema.statics.login = async function (email, password) {\n  const user = await this.findOne({\n    email: email\n  });\n\n  if (user) {\n    const auth = await bcrypt.compare(password, user.password);\n\n    if (auth) {\n      return user;\n    } else {\n      throw Error('Incorrect password');\n    }\n  }\n\n  throw Error('Incorrect password');\n};\n\nlet User = mongoose.model('User', UserSchema);\nmodule.exports = User;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIubW9kZWwuanMiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJyZXF1aXJlIiwiaXNFbWFpbCIsImJjcnlwdCIsIlNjaGVtYSIsIlVzZXJTY2hlbWEiLCJwc2V1ZG8iLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJtaW5sZW5ndGgiLCJtYXhsZW5ndGgiLCJ1bmlxdWUiLCJ0cmltIiwiZW1haWwiLCJ2YWxpZGF0ZSIsImxvd2VyY2FzZSIsInBhc3N3b3JkIiwibWF4IiwicGljdHVyZSIsImRlZmF1bHQiLCJiaW8iLCJmb2xsb3dlcnMiLCJmb2xsb3dpbmciLCJsaWtlcyIsInRpbWVzdGFtcHMiLCJwcmUiLCJuZXh0Iiwic2FsdCIsImdlblNhbHQiLCJoYXNoIiwic3RhdGljcyIsImxvZ2luIiwidXNlciIsImZpbmRPbmUiLCJhdXRoIiwiY29tcGFyZSIsIkVycm9yIiwiVXNlciIsIm1vZGVsIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxVQUFELENBQXhCOztBQUNBLE1BQU07QUFBQ0MsRUFBQUE7QUFBRCxJQUFZRCxPQUFPLENBQUMsV0FBRCxDQUF6Qjs7QUFDQSxNQUFNRSxNQUFNLEdBQUdGLE9BQU8sQ0FBQyxRQUFELENBQXRCOztBQUVBLE1BQU1HLE1BQU0sR0FBR0osUUFBUSxDQUFDSSxNQUF4QjtBQUNBLE1BQU1DLFVBQVUsR0FBRyxJQUFJRCxNQUFKLENBQVc7QUFDMUJFLEVBQUFBLE1BQU0sRUFBRTtBQUNKQyxJQUFBQSxJQUFJLEVBQUVDLE1BREY7QUFFSkMsSUFBQUEsUUFBUSxFQUFDLElBRkw7QUFHSkMsSUFBQUEsU0FBUyxFQUFFLENBSFA7QUFJSkMsSUFBQUEsU0FBUyxFQUFDLEVBSk47QUFLSkMsSUFBQUEsTUFBTSxFQUFDLElBTEg7QUFNSkMsSUFBQUEsSUFBSSxFQUFDO0FBTkQsR0FEa0I7QUFTMUJDLEVBQUFBLEtBQUssRUFBQztBQUNGUCxJQUFBQSxJQUFJLEVBQUNDLE1BREg7QUFFRkMsSUFBQUEsUUFBUSxFQUFDLElBRlA7QUFHRk0sSUFBQUEsUUFBUSxFQUFDLENBQUNiLE9BQUQsQ0FIUDtBQUlGYyxJQUFBQSxTQUFTLEVBQUMsSUFKUjtBQUtGSixJQUFBQSxNQUFNLEVBQUMsSUFMTDtBQU1GQyxJQUFBQSxJQUFJLEVBQUM7QUFOSCxHQVRvQjtBQWlCMUJJLEVBQUFBLFFBQVEsRUFBQztBQUNMVixJQUFBQSxJQUFJLEVBQUNDLE1BREE7QUFFTEMsSUFBQUEsUUFBUSxFQUFDLElBRko7QUFHTFMsSUFBQUEsR0FBRyxFQUFDLElBSEM7QUFJTFIsSUFBQUEsU0FBUyxFQUFDO0FBSkwsR0FqQmlCO0FBdUIxQlMsRUFBQUEsT0FBTyxFQUFDO0FBQ0paLElBQUFBLElBQUksRUFBQ0MsTUFERDtBQUVKWSxJQUFBQSxPQUFPLEVBQUM7QUFGSixHQXZCa0I7QUEyQjFCQyxFQUFBQSxHQUFHLEVBQUM7QUFDQWQsSUFBQUEsSUFBSSxFQUFDQyxNQURMO0FBRUFVLElBQUFBLEdBQUcsRUFBQztBQUZKLEdBM0JzQjtBQStCMUJJLEVBQUFBLFNBQVMsRUFBRTtBQUNQZixJQUFBQSxJQUFJLEVBQUMsQ0FBQ0MsTUFBRDtBQURFLEdBL0JlO0FBa0MxQmUsRUFBQUEsU0FBUyxFQUFDO0FBQ05oQixJQUFBQSxJQUFJLEVBQUMsQ0FBQ0MsTUFBRDtBQURDLEdBbENnQjtBQXFDMUJnQixFQUFBQSxLQUFLLEVBQUU7QUFDSGpCLElBQUFBLElBQUksRUFBQyxDQUFDQyxNQUFEO0FBREY7QUFyQ21CLENBQVgsRUF3Q2hCO0FBQ0NpQixFQUFBQSxVQUFVLEVBQUM7QUFEWixDQXhDZ0IsQ0FBbkIsQyxDQTZDQTtBQUNBOztBQUNBcEIsVUFBVSxDQUFDcUIsR0FBWCxDQUFlLE1BQWYsRUFBdUIsZ0JBQWdCQyxJQUFoQixFQUFxQjtBQUN4QyxRQUFNQyxJQUFJLEdBQUcsTUFBTXpCLE1BQU0sQ0FBQzBCLE9BQVAsRUFBbkI7QUFDQSxPQUFLWixRQUFMLEdBQWdCLE1BQU1kLE1BQU0sQ0FBQzJCLElBQVAsQ0FBWSxLQUFLYixRQUFqQixFQUEyQlcsSUFBM0IsQ0FBdEI7QUFDQUQsRUFBQUEsSUFBSTtBQUNQLENBSkQsRSxDQU1BOztBQUNBdEIsVUFBVSxDQUFDMEIsT0FBWCxDQUFtQkMsS0FBbkIsR0FBMkIsZ0JBQWVsQixLQUFmLEVBQXNCRyxRQUF0QixFQUErQjtBQUN0RCxRQUFNZ0IsSUFBSSxHQUFHLE1BQU0sS0FBS0MsT0FBTCxDQUFhO0FBQUNwQixJQUFBQSxLQUFLLEVBQUVBO0FBQVIsR0FBYixDQUFuQjs7QUFDQSxNQUFHbUIsSUFBSCxFQUFRO0FBQ0osVUFBTUUsSUFBSSxHQUFHLE1BQU1oQyxNQUFNLENBQUNpQyxPQUFQLENBQWVuQixRQUFmLEVBQXlCZ0IsSUFBSSxDQUFDaEIsUUFBOUIsQ0FBbkI7O0FBQ0EsUUFBR2tCLElBQUgsRUFBUTtBQUNKLGFBQU9GLElBQVA7QUFDSCxLQUZELE1BR0k7QUFDQSxZQUFNSSxLQUFLLENBQUMsb0JBQUQsQ0FBWDtBQUNIO0FBQ0o7O0FBQ0QsUUFBTUEsS0FBSyxDQUFDLG9CQUFELENBQVg7QUFDSCxDQVpEOztBQWFBLElBQUlDLElBQUksR0FBR3RDLFFBQVEsQ0FBQ3VDLEtBQVQsQ0FBZSxNQUFmLEVBQXVCbEMsVUFBdkIsQ0FBWDtBQUNBbUMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCSCxJQUFqQiIsInNvdXJjZVJvb3QiOiIvQXBwbGljYXRpb25zL2Rvc3NpZXIvbWVybl9wcm9qZWN0X2FwcDIvc3JjL21vZGVscy8iLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtb25nb29zZSA9IHJlcXVpcmUoJ21vbmdvb3NlJyk7XG5jb25zdCB7aXNFbWFpbH0gPSByZXF1aXJlKCd2YWxpZGF0b3InKTtcbmNvbnN0IGJjcnlwdCA9IHJlcXVpcmUoJ2JjcnlwdCcpO1xuXG5jb25zdCBTY2hlbWEgPSBtb25nb29zZS5TY2hlbWE7XG5jb25zdCBVc2VyU2NoZW1hID0gbmV3IFNjaGVtYSh7XG4gICAgcHNldWRvOiB7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgcmVxdWlyZWQ6dHJ1ZSxcbiAgICAgICAgbWlubGVuZ3RoOiAzLCBcbiAgICAgICAgbWF4bGVuZ3RoOjU1LCBcbiAgICAgICAgdW5pcXVlOnRydWUsXG4gICAgICAgIHRyaW06dHJ1ZVxuICAgIH0sXG4gICAgZW1haWw6e1xuICAgICAgICB0eXBlOlN0cmluZyxcbiAgICAgICAgcmVxdWlyZWQ6dHJ1ZSxcbiAgICAgICAgdmFsaWRhdGU6W2lzRW1haWxdLFxuICAgICAgICBsb3dlcmNhc2U6dHJ1ZSwgICAgICAgIFxuICAgICAgICB1bmlxdWU6dHJ1ZSxcbiAgICAgICAgdHJpbTp0cnVlLFxuICAgIH0sXG4gICAgcGFzc3dvcmQ6e1xuICAgICAgICB0eXBlOlN0cmluZyxcbiAgICAgICAgcmVxdWlyZWQ6dHJ1ZSxcbiAgICAgICAgbWF4OjEwMjQsXG4gICAgICAgIG1pbmxlbmd0aDo2XG4gICAgfSxcbiAgICBwaWN0dXJlOntcbiAgICAgICAgdHlwZTpTdHJpbmcsXG4gICAgICAgIGRlZmF1bHQ6XCIuL3VwbG9hZHMvcHJvZmlsZS9yYW5kb20tdXNlci5wbmdcIlxuICAgIH0sXG4gICAgYmlvOntcbiAgICAgICAgdHlwZTpTdHJpbmcsXG4gICAgICAgIG1heDoxMDI0XG4gICAgfSxcbiAgICBmb2xsb3dlcnM6IHtcbiAgICAgICAgdHlwZTpbU3RyaW5nXSxcbiAgICB9LFxuICAgIGZvbGxvd2luZzp7XG4gICAgICAgIHR5cGU6W1N0cmluZ10sXG4gICAgfSxcbiAgICBsaWtlczoge1xuICAgICAgICB0eXBlOltTdHJpbmddLFxuICAgIH1cbn0sIHtcbiAgICB0aW1lc3RhbXBzOnRydWVcbn1cbik7XG5cbi8vcGxheSBmdW5jdGlvbiBiZWZvcmUgc2F2ZSBpbnRvIGRiIHRvIGFsbG93IGNyeXB0IHBhc3N3b3JkXG4vLyBsZSBuZXh0IHZldXQgZGlyZSBxdWFuZCB0J2EgZmluaSBwYXNzZSDDoCBsYSBzdWl0ZVxuVXNlclNjaGVtYS5wcmUoJ3NhdmUnLCBhc3luYyBmdW5jdGlvbiAobmV4dCl7XG4gICAgY29uc3Qgc2FsdCA9IGF3YWl0IGJjcnlwdC5nZW5TYWx0KCk7XG4gICAgdGhpcy5wYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKHRoaXMucGFzc3dvcmQsIHNhbHQpO1xuICAgIG5leHQoKTtcbn0pXG5cbi8vYydlc3QgY2UgcXVpIHZhIG5vdXMgcGVybWV0dHJlIGRlIGNvbXBhcmVyIGxlIHBhc3N3b3JkIGNyeXB0w6kgZGUgbm90cmUgdXNlciBlbiBiYXNlIGRlIGRvbm7DqWVzIGF2ZWMgY2VsdWkgdXRpbGlzZSBwZHQgbGUgbG9naW4gZCd1biB1c2VyXG5Vc2VyU2NoZW1hLnN0YXRpY3MubG9naW4gPSBhc3luYyBmdW5jdGlvbihlbWFpbCwgcGFzc3dvcmQpe1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB0aGlzLmZpbmRPbmUoe2VtYWlsOiBlbWFpbH0pO1xuICAgIGlmKHVzZXIpe1xuICAgICAgICBjb25zdCBhdXRoID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIHVzZXIucGFzc3dvcmQpXG4gICAgICAgIGlmKGF1dGgpe1xuICAgICAgICAgICAgcmV0dXJuIHVzZXJcbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ0luY29ycmVjdCBwYXNzd29yZCcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRocm93IEVycm9yKCdJbmNvcnJlY3QgcGFzc3dvcmQnKTtcbn1cbmxldCBVc2VyID0gbW9uZ29vc2UubW9kZWwoJ1VzZXInLCBVc2VyU2NoZW1hKTtcbm1vZHVsZS5leHBvcnRzID0gVXNlcjsiXX0=","map":{"version":3,"sources":["user.model.js"],"names":["mongoose","require","isEmail","bcrypt","Schema","UserSchema","pseudo","type","String","required","minlength","maxlength","unique","trim","email","validate","lowercase","password","max","picture","default","bio","followers","following","likes","timestamps","pre","next","salt","genSalt","hash","statics","login","user","findOne","auth","compare","Error","User","model","module","exports"],"mappings":";;AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AACA,MAAM;AAACC,EAAAA;AAAD,IAAYD,OAAO,CAAC,WAAD,CAAzB;;AACA,MAAME,MAAM,GAAGF,OAAO,CAAC,QAAD,CAAtB;;AAEA,MAAMG,MAAM,GAAGJ,QAAQ,CAACI,MAAxB;AACA,MAAMC,UAAU,GAAG,IAAID,MAAJ,CAAW;AAC1BE,EAAAA,MAAM,EAAE;AACJC,IAAAA,IAAI,EAAEC,MADF;AAEJC,IAAAA,QAAQ,EAAC,IAFL;AAGJC,IAAAA,SAAS,EAAE,CAHP;AAIJC,IAAAA,SAAS,EAAC,EAJN;AAKJC,IAAAA,MAAM,EAAC,IALH;AAMJC,IAAAA,IAAI,EAAC;AAND,GADkB;AAS1BC,EAAAA,KAAK,EAAC;AACFP,IAAAA,IAAI,EAACC,MADH;AAEFC,IAAAA,QAAQ,EAAC,IAFP;AAGFM,IAAAA,QAAQ,EAAC,CAACb,OAAD,CAHP;AAIFc,IAAAA,SAAS,EAAC,IAJR;AAKFJ,IAAAA,MAAM,EAAC,IALL;AAMFC,IAAAA,IAAI,EAAC;AANH,GAToB;AAiB1BI,EAAAA,QAAQ,EAAC;AACLV,IAAAA,IAAI,EAACC,MADA;AAELC,IAAAA,QAAQ,EAAC,IAFJ;AAGLS,IAAAA,GAAG,EAAC,IAHC;AAILR,IAAAA,SAAS,EAAC;AAJL,GAjBiB;AAuB1BS,EAAAA,OAAO,EAAC;AACJZ,IAAAA,IAAI,EAACC,MADD;AAEJY,IAAAA,OAAO,EAAC;AAFJ,GAvBkB;AA2B1BC,EAAAA,GAAG,EAAC;AACAd,IAAAA,IAAI,EAACC,MADL;AAEAU,IAAAA,GAAG,EAAC;AAFJ,GA3BsB;AA+B1BI,EAAAA,SAAS,EAAE;AACPf,IAAAA,IAAI,EAAC,CAACC,MAAD;AADE,GA/Be;AAkC1Be,EAAAA,SAAS,EAAC;AACNhB,IAAAA,IAAI,EAAC,CAACC,MAAD;AADC,GAlCgB;AAqC1BgB,EAAAA,KAAK,EAAE;AACHjB,IAAAA,IAAI,EAAC,CAACC,MAAD;AADF;AArCmB,CAAX,EAwChB;AACCiB,EAAAA,UAAU,EAAC;AADZ,CAxCgB,CAAnB,C,CA6CA;AACA;;AACApB,UAAU,CAACqB,GAAX,CAAe,MAAf,EAAuB,gBAAgBC,IAAhB,EAAqB;AACxC,QAAMC,IAAI,GAAG,MAAMzB,MAAM,CAAC0B,OAAP,EAAnB;AACA,OAAKZ,QAAL,GAAgB,MAAMd,MAAM,CAAC2B,IAAP,CAAY,KAAKb,QAAjB,EAA2BW,IAA3B,CAAtB;AACAD,EAAAA,IAAI;AACP,CAJD,E,CAMA;;AACAtB,UAAU,CAAC0B,OAAX,CAAmBC,KAAnB,GAA2B,gBAAelB,KAAf,EAAsBG,QAAtB,EAA+B;AACtD,QAAMgB,IAAI,GAAG,MAAM,KAAKC,OAAL,CAAa;AAACpB,IAAAA,KAAK,EAAEA;AAAR,GAAb,CAAnB;;AACA,MAAGmB,IAAH,EAAQ;AACJ,UAAME,IAAI,GAAG,MAAMhC,MAAM,CAACiC,OAAP,CAAenB,QAAf,EAAyBgB,IAAI,CAAChB,QAA9B,CAAnB;;AACA,QAAGkB,IAAH,EAAQ;AACJ,aAAOF,IAAP;AACH,KAFD,MAGI;AACA,YAAMI,KAAK,CAAC,oBAAD,CAAX;AACH;AACJ;;AACD,QAAMA,KAAK,CAAC,oBAAD,CAAX;AACH,CAZD;;AAaA,IAAIC,IAAI,GAAGtC,QAAQ,CAACuC,KAAT,CAAe,MAAf,EAAuBlC,UAAvB,CAAX;AACAmC,MAAM,CAACC,OAAP,GAAiBH,IAAjB","sourceRoot":"/Applications/dossier/mern_project_app2/src/models/","sourcesContent":["const mongoose = require('mongoose');\nconst {isEmail} = require('validator');\nconst bcrypt = require('bcrypt');\n\nconst Schema = mongoose.Schema;\nconst UserSchema = new Schema({\n    pseudo: {\n        type: String,\n        required:true,\n        minlength: 3, \n        maxlength:55, \n        unique:true,\n        trim:true\n    },\n    email:{\n        type:String,\n        required:true,\n        validate:[isEmail],\n        lowercase:true,        \n        unique:true,\n        trim:true,\n    },\n    password:{\n        type:String,\n        required:true,\n        max:1024,\n        minlength:6\n    },\n    picture:{\n        type:String,\n        default:\"./uploads/profile/random-user.png\"\n    },\n    bio:{\n        type:String,\n        max:1024\n    },\n    followers: {\n        type:[String],\n    },\n    following:{\n        type:[String],\n    },\n    likes: {\n        type:[String],\n    }\n}, {\n    timestamps:true\n}\n);\n\n//play function before save into db to allow crypt password\n// le next veut dire quand t'a fini passe à la suite\nUserSchema.pre('save', async function (next){\n    const salt = await bcrypt.genSalt();\n    this.password = await bcrypt.hash(this.password, salt);\n    next();\n})\n\n//c'est ce qui va nous permettre de comparer le password crypté de notre user en base de données avec celui utilise pdt le login d'un user\nUserSchema.statics.login = async function(email, password){\n    const user = await this.findOne({email: email});\n    if(user){\n        const auth = await bcrypt.compare(password, user.password)\n        if(auth){\n            return user\n        }\n        else{\n            throw Error('Incorrect password');\n        }\n    }\n    throw Error('Incorrect password');\n}\nlet User = mongoose.model('User', UserSchema);\nmodule.exports = User;"]}},"mtime":1651271257003},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/mern_project_app2/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/mern_project_app2\",\"filename\":\"/Applications/dossier/mern_project_app2/src/controllers/post.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/mern_project_app2\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.updatePost = exports.unlikePost = exports.readPost = exports.likePost = exports.editCommentPost = exports.deletePost = exports.deleteCommentPost = exports.createPost = exports.commentPost = void 0;\n\nvar _errors = require(\"../utils/errors.utils\");\n\nconst Post = require('../models/post.model');\n\nconst User = require('../models/user.model');\n\nconst ObjectID = require(\"mongoose\").Types.ObjectId;\n\nconst readPost = async (req, res, next) => {\n  try {\n    const posts = await Post.find().sort({\n      createdAt: -1\n    });\n    res.status(200).json(posts);\n  } catch (err) {\n    res.status(200).json(err);\n  }\n};\n\nexports.readPost = readPost;\n\nconst createPost = async (req, res, next) => {\n  if (req.file != null) {\n    try {\n      if (req.file.mimetype != \"image/jpg\" && req.file.mimetype != \"image/png\" && req.file.mimetype != \"image/jpeg\") {\n        throw new Error('invalid file');\n      }\n\n      if (req.file.size > 50000) {\n        throw new Error('max size');\n      }\n    } catch (err) {\n      const errors = (0, _errors.uploadErrors)(err);\n      return res.status(201).json(errors);\n    }\n  }\n\n  const newPost = new Post({\n    posterId: req.body.posterId,\n    message: req.body.message,\n    video: req.body.video,\n    likers: [],\n    comments: []\n  });\n\n  try {\n    const post = await newPost.save();\n    return res.status(201).json(post);\n  } catch (err) {\n    return res.status(400).json(err);\n  }\n};\n\nexports.createPost = createPost;\n\nconst updatePost = async (req, res, next) => {\n  if (!ObjectID.isValid(req.params.id)) {\n    return res.status(400).send(`Id unknown : ${req.params.id}`);\n  }\n\n  try {\n    const updatedRecord = {\n      message: req.body.message\n    };\n    const newPost = await Post.findByIdAndUpdate(req.params.id, {\n      $set: updatedRecord\n    }, {\n      new: true\n    });\n    res.status(200).send(newPost);\n  } catch (err) {\n    res.status(400).json(err);\n  }\n};\n\nexports.updatePost = updatePost;\n\nconst deletePost = async (req, res, next) => {\n  if (!ObjectID.isValid(req.params.id)) {\n    return res.status(400).send(`Id unknown : ${req.params.id}`);\n  }\n\n  try {\n    await Post.remove({\n      _id: req.params.id\n    }).exec();\n    res.status(200).json({\n      message: 'Successfully deleted !'\n    });\n  } catch (err) {\n    res.status(500).json({\n      message: err\n    });\n  }\n};\n\nexports.deletePost = deletePost;\n\nconst likePost = async (req, res, next) => {\n  if (!ObjectID.isValid(req.params.id)) {\n    return res.status(400).send(`Id unknown : ${req.params.id}`);\n  }\n\n  try {\n    const post = await Post.findByIdAndUpdate(req.params.id, {\n      $addToSet: {\n        likers: req.body.id\n      }\n    }, {\n      new: true\n    });\n    const user = await User.findByIdAndUpdate(req.body.id, {\n      $addToSet: {\n        likes: req.params.id\n      }\n    }, {\n      new: true\n    });\n    res.status(200).send(user);\n  } catch (err) {\n    res.status(400).send({\n      err\n    });\n  }\n};\n\nexports.likePost = likePost;\n\nconst unlikePost = async (req, res, next) => {\n  if (!ObjectID.isValid(req.params.id)) {\n    return res.status(400).send(`Id unknown : ${req.params.id}`);\n  }\n\n  try {\n    const post = await Post.findByIdAndUpdate(req.params.id, {\n      $pull: {\n        likers: req.body.id\n      }\n    }, {\n      new: true\n    });\n    const user = await User.findByIdAndUpdate(req.body.id, {\n      $pull: {\n        likes: req.params.id\n      }\n    }, {\n      new: true\n    });\n    res.status(200).send(user);\n  } catch (err) {\n    res.status(400).send({\n      err\n    });\n  }\n};\n\nexports.unlikePost = unlikePost;\n\nconst commentPost = async (req, res, next) => {\n  if (!ObjectID.isValid(req.params.id)) {\n    return res.status(400).send(`Id unknown : ${req.params.id}`);\n  }\n\n  try {\n    const post = await Post.findByIdAndUpdate(req.params.id, {\n      $push: {\n        comments: {\n          commenterId: req.body.id,\n          commenterPseudo: req.body.commenterPseudo,\n          text: req.body.text,\n          timestamp: new Date().getTime()\n        }\n      }\n    }, {\n      new: true\n    });\n    res.send(post);\n  } catch (err) {\n    res.status(400).send({\n      err\n    });\n  }\n};\n\nexports.commentPost = commentPost;\n\nconst editCommentPost = async (req, res, next) => {\n  if (!ObjectID.isValid(req.params.id)) {\n    return res.status(400).send(`Id unknown : ${req.params.id}`);\n  }\n\n  try {\n    //on récupère le post concerné\n    const post = await Post.findById(req.params.id); //on récupère le commentaire concerné\n\n    const theComment = await post.comments.find(comment => {\n      return comment._id.equals(req.body.commentId);\n    }); //on change le text\n\n    theComment.text = req.body.text; // on save les changements\n\n    await post.save(); //on send le post concerné\n\n    return res.send(post);\n  } catch (err) {\n    return res.status(400).send(err);\n  }\n};\n\nexports.editCommentPost = editCommentPost;\n\nconst deleteCommentPost = async (req, res, next) => {\n  if (!ObjectID.isValid(req.params.id)) {\n    return res.status(400).send(`Id unknown : ${req.params.id}`);\n  }\n\n  try {\n    const post = await Post.findByIdAndUpdate(req.params.id, {\n      $pull: {\n        comments: {\n          _id: req.body.commentId\n        }\n      }\n    }, {\n      new: true\n    }).then(newPost => {\n      res.send(newPost);\n    }).catch(err => {\n      return res.status(400).send(err);\n    });\n  } catch (err) {\n    return res.status(400).send(err);\n  }\n};\n\nexports.deleteCommentPost = deleteCommentPost;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvc3QuY29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJQb3N0IiwicmVxdWlyZSIsIlVzZXIiLCJPYmplY3RJRCIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWFkUG9zdCIsInJlcSIsInJlcyIsIm5leHQiLCJwb3N0cyIsImZpbmQiLCJzb3J0IiwiY3JlYXRlZEF0Iiwic3RhdHVzIiwianNvbiIsImVyciIsImNyZWF0ZVBvc3QiLCJmaWxlIiwibWltZXR5cGUiLCJFcnJvciIsInNpemUiLCJlcnJvcnMiLCJuZXdQb3N0IiwicG9zdGVySWQiLCJib2R5IiwibWVzc2FnZSIsInZpZGVvIiwibGlrZXJzIiwiY29tbWVudHMiLCJwb3N0Iiwic2F2ZSIsInVwZGF0ZVBvc3QiLCJpc1ZhbGlkIiwicGFyYW1zIiwiaWQiLCJzZW5kIiwidXBkYXRlZFJlY29yZCIsImZpbmRCeUlkQW5kVXBkYXRlIiwiJHNldCIsIm5ldyIsImRlbGV0ZVBvc3QiLCJyZW1vdmUiLCJfaWQiLCJleGVjIiwibGlrZVBvc3QiLCIkYWRkVG9TZXQiLCJ1c2VyIiwibGlrZXMiLCJ1bmxpa2VQb3N0IiwiJHB1bGwiLCJjb21tZW50UG9zdCIsIiRwdXNoIiwiY29tbWVudGVySWQiLCJjb21tZW50ZXJQc2V1ZG8iLCJ0ZXh0IiwidGltZXN0YW1wIiwiRGF0ZSIsImdldFRpbWUiLCJlZGl0Q29tbWVudFBvc3QiLCJmaW5kQnlJZCIsInRoZUNvbW1lbnQiLCJjb21tZW50IiwiZXF1YWxzIiwiY29tbWVudElkIiwiZGVsZXRlQ29tbWVudFBvc3QiLCJ0aGVuIiwiY2F0Y2giXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFHQTs7QUFIQSxNQUFNQSxJQUFJLEdBQUdDLE9BQU8sQ0FBQyxzQkFBRCxDQUFwQjs7QUFDQSxNQUFNQyxJQUFJLEdBQUdELE9BQU8sQ0FBQyxzQkFBRCxDQUFwQjs7QUFDQSxNQUFNRSxRQUFRLEdBQUdGLE9BQU8sQ0FBQyxVQUFELENBQVAsQ0FBb0JHLEtBQXBCLENBQTBCQyxRQUEzQzs7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Q0FBQzhCLE9BQVQsQ0FBaUIxQixHQUFHLENBQUMyQixNQUFKLENBQVdDLEVBQTVCLENBQUwsRUFBc0M7QUFDbEMsV0FBTzNCLEdBQUcsQ0FBQ00sTUFBSixDQUFXLEdBQVgsRUFBZ0JzQixJQUFoQixDQUFzQixnQkFBZTdCLEdBQUcsQ0FBQzJCLE1BQUosQ0FBV0MsRUFBRyxFQUFuRCxDQUFQO0FBQ0g7O0FBQ0QsTUFBSTtBQUNBLFVBQU1MLElBQUksR0FBRyxNQUFNOUIsSUFBSSxDQUFDc0MsaUJBQUwsQ0FDZi9CLEdBQUcsQ0FBQzJCLE1BQUosQ0FBV0MsRUFESSxFQUVmO0FBQ0llLE1BQUFBLEtBQUssRUFBRTtBQUNIckIsUUFBQUEsUUFBUSxFQUFFO0FBQ05jLFVBQUFBLEdBQUcsRUFBRXBDLEdBQUcsQ0FBQ2tCLElBQUosQ0FBU3VDO0FBRFI7QUFEUDtBQURYLEtBRmUsRUFTZjtBQUFFeEIsTUFBQUEsR0FBRyxFQUFFO0FBQVAsS0FUZSxFQVVqQjBCLElBVmlCLENBVVgzQyxPQUFELElBQWE7QUFDaEJmLE1BQUFBLEdBQUcsQ0FBQzRCLElBQUosQ0FBU2IsT0FBVDtBQUNILEtBWmtCLEVBWWhCNEMsS0FaZ0IsQ0FZVG5ELEdBQUQsSUFBUztBQUNkLGFBQU9SLEdBQUcsQ0FBQ00sTUFBSixDQUFXLEdBQVgsRUFBZ0JzQixJQUFoQixDQUFxQnBCLEdBQXJCLENBQVA7QUFDSCxLQWRrQixDQUFuQjtBQWVILEdBaEJELENBaUJBLE9BQU9BLEdBQVAsRUFBWTtBQUNSLFdBQU9SLEdBQUcsQ0FBQ00sTUFBSixDQUFXLEdBQVgsRUFBZ0JzQixJQUFoQixDQUFxQnBCLEdBQXJCLENBQVA7QUFDSDtBQUNKLENBeEJNIiwic291cmNlUm9vdCI6Ii9BcHBsaWNhdGlvbnMvZG9zc2llci9tZXJuX3Byb2plY3RfYXBwMi9zcmMvY29udHJvbGxlcnMvIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgUG9zdCA9IHJlcXVpcmUoJy4uL21vZGVscy9wb3N0Lm1vZGVsJylcbmNvbnN0IFVzZXIgPSByZXF1aXJlKCcuLi9tb2RlbHMvdXNlci5tb2RlbCcpXG5jb25zdCBPYmplY3RJRCA9IHJlcXVpcmUoXCJtb25nb29zZVwiKS5UeXBlcy5PYmplY3RJZDtcbmltcG9ydCB7IHVwbG9hZEVycm9yc30gZnJvbSAnLi4vdXRpbHMvZXJyb3JzLnV0aWxzJ1xuXG5cbmV4cG9ydCBjb25zdCByZWFkUG9zdCA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHBvc3RzID0gYXdhaXQgUG9zdC5maW5kKCkuc29ydCh7IGNyZWF0ZWRBdDogLTEgfSlcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24ocG9zdHMpXG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oZXJyKVxuICAgIH1cbn1cbmV4cG9ydCBjb25zdCBjcmVhdGVQb3N0ID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgaWYocmVxLmZpbGUgIT0gbnVsbCl7XG4gICAgICAgIHRyeXtcbiAgICAgICAgICAgIGlmKHJlcS5maWxlLm1pbWV0eXBlICE9IFwiaW1hZ2UvanBnXCIgJiYgcmVxLmZpbGUubWltZXR5cGUgIT0gXCJpbWFnZS9wbmdcIiAmJiByZXEuZmlsZS5taW1ldHlwZSAhPSBcImltYWdlL2pwZWdcIil7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIGZpbGUnKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYocmVxLmZpbGUuc2l6ZSA+IDUwMDAwKXtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ21heCBzaXplJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaChlcnIpe1xuICAgICAgICAgICAgY29uc3QgZXJyb3JzID0gdXBsb2FkRXJyb3JzKGVycik7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDEpLmpzb24oZXJyb3JzKVxuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IG5ld1Bvc3QgPSBuZXcgUG9zdCh7XG4gICAgICAgIHBvc3RlcklkOiByZXEuYm9keS5wb3N0ZXJJZCxcbiAgICAgICAgbWVzc2FnZTogcmVxLmJvZHkubWVzc2FnZSxcbiAgICAgICAgdmlkZW86IHJlcS5ib2R5LnZpZGVvLFxuICAgICAgICBsaWtlcnM6IFtdLFxuICAgICAgICBjb21tZW50czogW10sXG4gICAgfSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcG9zdCA9IGF3YWl0IG5ld1Bvc3Quc2F2ZSgpO1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDEpLmpzb24ocG9zdClcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oZXJyKVxuICAgIH1cbn1cbmV4cG9ydCBjb25zdCB1cGRhdGVQb3N0ID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgaWYgKCFPYmplY3RJRC5pc1ZhbGlkKHJlcS5wYXJhbXMuaWQpKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZChgSWQgdW5rbm93biA6ICR7cmVxLnBhcmFtcy5pZH1gKVxuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBjb25zdCB1cGRhdGVkUmVjb3JkID0ge1xuICAgICAgICAgICAgbWVzc2FnZTogcmVxLmJvZHkubWVzc2FnZVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5ld1Bvc3QgPSBhd2FpdCBQb3N0LmZpbmRCeUlkQW5kVXBkYXRlKFxuICAgICAgICAgICAgcmVxLnBhcmFtcy5pZCxcbiAgICAgICAgICAgIHsgJHNldDogdXBkYXRlZFJlY29yZCB9LFxuICAgICAgICAgICAgeyBuZXc6IHRydWUgfVxuICAgICAgICApXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKG5ld1Bvc3QpXG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oZXJyKVxuICAgIH1cblxuXG5cbn1cbmV4cG9ydCBjb25zdCBkZWxldGVQb3N0ID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgaWYgKCFPYmplY3RJRC5pc1ZhbGlkKHJlcS5wYXJhbXMuaWQpKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZChgSWQgdW5rbm93biA6ICR7cmVxLnBhcmFtcy5pZH1gKVxuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBhd2FpdCBQb3N0LnJlbW92ZSh7XG4gICAgICAgICAgICBfaWQ6IHJlcS5wYXJhbXMuaWRcbiAgICAgICAgfSkuZXhlYygpXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ1N1Y2Nlc3NmdWxseSBkZWxldGVkICEnIH0pXG5cbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IGVyciB9KVxuICAgIH1cbn1cbmV4cG9ydCBjb25zdCBsaWtlUG9zdCA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIGlmICghT2JqZWN0SUQuaXNWYWxpZChyZXEucGFyYW1zLmlkKSkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoYElkIHVua25vd24gOiAke3JlcS5wYXJhbXMuaWR9YClcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcG9zdCA9IGF3YWl0IFBvc3QuZmluZEJ5SWRBbmRVcGRhdGUoXG4gICAgICAgICAgICByZXEucGFyYW1zLmlkLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICRhZGRUb1NldDogeyBsaWtlcnM6IHJlcS5ib2R5LmlkIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmV3OiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWRBbmRVcGRhdGUoXG4gICAgICAgICAgICByZXEuYm9keS5pZCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAkYWRkVG9TZXQ6IHsgbGlrZXM6IHJlcS5wYXJhbXMuaWQgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuZXc6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQodXNlcilcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICByZXMuc3RhdHVzKDQwMCkuc2VuZCh7IGVyciB9KVxuICAgIH1cbn1cbmV4cG9ydCBjb25zdCB1bmxpa2VQb3N0ID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgaWYgKCFPYmplY3RJRC5pc1ZhbGlkKHJlcS5wYXJhbXMuaWQpKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZChgSWQgdW5rbm93biA6ICR7cmVxLnBhcmFtcy5pZH1gKVxuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBjb25zdCBwb3N0ID0gYXdhaXQgUG9zdC5maW5kQnlJZEFuZFVwZGF0ZShcbiAgICAgICAgICAgIHJlcS5wYXJhbXMuaWQsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgJHB1bGw6IHsgbGlrZXJzOiByZXEuYm9keS5pZCB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5ldzogdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkQW5kVXBkYXRlKFxuICAgICAgICAgICAgcmVxLmJvZHkuaWQsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgJHB1bGw6IHsgbGlrZXM6IHJlcS5wYXJhbXMuaWQgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuZXc6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQodXNlcilcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICByZXMuc3RhdHVzKDQwMCkuc2VuZCh7IGVyciB9KVxuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IGNvbW1lbnRQb3N0ID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgaWYgKCFPYmplY3RJRC5pc1ZhbGlkKHJlcS5wYXJhbXMuaWQpKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZChgSWQgdW5rbm93biA6ICR7cmVxLnBhcmFtcy5pZH1gKVxuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBjb25zdCBwb3N0ID0gYXdhaXQgUG9zdC5maW5kQnlJZEFuZFVwZGF0ZShcbiAgICAgICAgICAgIHJlcS5wYXJhbXMuaWQsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgJHB1c2g6IHtcbiAgICAgICAgICAgICAgICAgICAgY29tbWVudHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnRlcklkOiByZXEuYm9keS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnRlclBzZXVkbzogcmVxLmJvZHkuY29tbWVudGVyUHNldWRvLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogcmVxLmJvZHkudGV4dCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS5nZXRUaW1lKClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7IG5ldzogdHJ1ZSB9XG4gICAgICAgIClcbiAgICAgICAgcmVzLnNlbmQocG9zdClcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICByZXMuc3RhdHVzKDQwMCkuc2VuZCh7IGVyciB9KVxuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IGVkaXRDb21tZW50UG9zdCA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIGlmICghT2JqZWN0SUQuaXNWYWxpZChyZXEucGFyYW1zLmlkKSkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoYElkIHVua25vd24gOiAke3JlcS5wYXJhbXMuaWR9YClcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy9vbiByw6ljdXDDqHJlIGxlIHBvc3QgY29uY2VybsOpXG4gICAgICAgIGNvbnN0IHBvc3QgPSBhd2FpdCBQb3N0LmZpbmRCeUlkKHJlcS5wYXJhbXMuaWQpXG4gICAgICAgIC8vb24gcsOpY3Vww6hyZSBsZSBjb21tZW50YWlyZSBjb25jZXJuw6lcbiAgICAgICAgY29uc3QgdGhlQ29tbWVudCA9IGF3YWl0IHBvc3QuY29tbWVudHMuZmluZCgoY29tbWVudCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGNvbW1lbnQuX2lkLmVxdWFscyhyZXEuYm9keS5jb21tZW50SWQpXG4gICAgICAgIH0pXG4gICAgICAgIC8vb24gY2hhbmdlIGxlIHRleHRcbiAgICAgICAgdGhlQ29tbWVudC50ZXh0ID0gcmVxLmJvZHkudGV4dFxuICAgICAgICAvLyBvbiBzYXZlIGxlcyBjaGFuZ2VtZW50c1xuICAgICAgICBhd2FpdCBwb3N0LnNhdmUoKTtcbiAgICAgICAgLy9vbiBzZW5kIGxlIHBvc3QgY29uY2VybsOpXG4gICAgICAgIHJldHVybiByZXMuc2VuZChwb3N0KVxuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZChlcnIpXG4gICAgfVxufVxuXG5cbmV4cG9ydCBjb25zdCBkZWxldGVDb21tZW50UG9zdCA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIGlmICghT2JqZWN0SUQuaXNWYWxpZChyZXEucGFyYW1zLmlkKSkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoYElkIHVua25vd24gOiAke3JlcS5wYXJhbXMuaWR9YClcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcG9zdCA9IGF3YWl0IFBvc3QuZmluZEJ5SWRBbmRVcGRhdGUoXG4gICAgICAgICAgICByZXEucGFyYW1zLmlkLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICRwdWxsOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbW1lbnRzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaWQ6IHJlcS5ib2R5LmNvbW1lbnRJZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHsgbmV3OiB0cnVlIH1cbiAgICAgICAgKS50aGVuKChuZXdQb3N0KSA9PiB7XG4gICAgICAgICAgICByZXMuc2VuZChuZXdQb3N0KVxuICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoZXJyKVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoZXJyKVxuICAgIH1cbn0iXX0=","map":{"version":3,"sources":["post.controller.js"],"names":["Post","require","User","ObjectID","Types","ObjectId","readPost","req","res","next","posts","find","sort","createdAt","status","json","err","createPost","file","mimetype","Error","size","errors","newPost","posterId","body","message","video","likers","comments","post","save","updatePost","isValid","params","id","send","updatedRecord","findByIdAndUpdate","$set","new","deletePost","remove","_id","exec","likePost","$addToSet","user","likes","unlikePost","$pull","commentPost","$push","commenterId","commenterPseudo","text","timestamp","Date","getTime","editCommentPost","findById","theComment","comment","equals","commentId","deleteCommentPost","then","catch"],"mappings":"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","sourceRoot":"/Applications/dossier/mern_project_app2/src/controllers/","sourcesContent":["const Post = require('../models/post.model')\nconst User = require('../models/user.model')\nconst ObjectID = require(\"mongoose\").Types.ObjectId;\nimport { uploadErrors} from '../utils/errors.utils'\n\n\nexport const readPost = async (req, res, next) => {\n    try {\n        const posts = await Post.find().sort({ createdAt: -1 })\n        res.status(200).json(posts)\n    }\n    catch (err) {\n        res.status(200).json(err)\n    }\n}\nexport const createPost = async (req, res, next) => {\n    if(req.file != null){\n        try{\n            if(req.file.mimetype != \"image/jpg\" && req.file.mimetype != \"image/png\" && req.file.mimetype != \"image/jpeg\"){\n                throw new Error('invalid file')\n            }\n            if(req.file.size > 50000){\n                throw new Error('max size')\n            }\n        }\n        catch(err){\n            const errors = uploadErrors(err);\n            return res.status(201).json(errors)\n        }\n    }\n    const newPost = new Post({\n        posterId: req.body.posterId,\n        message: req.body.message,\n        video: req.body.video,\n        likers: [],\n        comments: [],\n    });\n    try {\n        const post = await newPost.save();\n        return res.status(201).json(post)\n    }\n    catch (err) {\n        return res.status(400).json(err)\n    }\n}\nexport const updatePost = async (req, res, next) => {\n    if (!ObjectID.isValid(req.params.id)) {\n        return res.status(400).send(`Id unknown : ${req.params.id}`)\n    }\n    try {\n        const updatedRecord = {\n            message: req.body.message\n        }\n        const newPost = await Post.findByIdAndUpdate(\n            req.params.id,\n            { $set: updatedRecord },\n            { new: true }\n        )\n        res.status(200).send(newPost)\n    }\n    catch (err) {\n        res.status(400).json(err)\n    }\n\n\n\n}\nexport const deletePost = async (req, res, next) => {\n    if (!ObjectID.isValid(req.params.id)) {\n        return res.status(400).send(`Id unknown : ${req.params.id}`)\n    }\n    try {\n        await Post.remove({\n            _id: req.params.id\n        }).exec()\n        res.status(200).json({ message: 'Successfully deleted !' })\n\n    }\n    catch (err) {\n        res.status(500).json({ message: err })\n    }\n}\nexport const likePost = async (req, res, next) => {\n    if (!ObjectID.isValid(req.params.id)) {\n        return res.status(400).send(`Id unknown : ${req.params.id}`)\n    }\n    try {\n        const post = await Post.findByIdAndUpdate(\n            req.params.id,\n            {\n                $addToSet: { likers: req.body.id }\n            },\n            {\n                new: true\n            }\n        )\n        const user = await User.findByIdAndUpdate(\n            req.body.id,\n            {\n                $addToSet: { likes: req.params.id }\n            },\n            {\n                new: true\n            }\n        );\n        res.status(200).send(user)\n    }\n    catch (err) {\n        res.status(400).send({ err })\n    }\n}\nexport const unlikePost = async (req, res, next) => {\n    if (!ObjectID.isValid(req.params.id)) {\n        return res.status(400).send(`Id unknown : ${req.params.id}`)\n    }\n    try {\n        const post = await Post.findByIdAndUpdate(\n            req.params.id,\n            {\n                $pull: { likers: req.body.id }\n            },\n            {\n                new: true\n            }\n        )\n        const user = await User.findByIdAndUpdate(\n            req.body.id,\n            {\n                $pull: { likes: req.params.id }\n            },\n            {\n                new: true\n            }\n        );\n        res.status(200).send(user)\n    }\n    catch (err) {\n        res.status(400).send({ err })\n    }\n}\n\nexport const commentPost = async (req, res, next) => {\n    if (!ObjectID.isValid(req.params.id)) {\n        return res.status(400).send(`Id unknown : ${req.params.id}`)\n    }\n    try {\n        const post = await Post.findByIdAndUpdate(\n            req.params.id,\n            {\n                $push: {\n                    comments: {\n                        commenterId: req.body.id,\n                        commenterPseudo: req.body.commenterPseudo,\n                        text: req.body.text,\n                        timestamp: new Date().getTime()\n                    }\n                }\n            },\n            { new: true }\n        )\n        res.send(post)\n    }\n    catch (err) {\n        res.status(400).send({ err })\n    }\n}\n\nexport const editCommentPost = async (req, res, next) => {\n    if (!ObjectID.isValid(req.params.id)) {\n        return res.status(400).send(`Id unknown : ${req.params.id}`)\n    }\n    try {\n        //on récupère le post concerné\n        const post = await Post.findById(req.params.id)\n        //on récupère le commentaire concerné\n        const theComment = await post.comments.find((comment) => {\n            return comment._id.equals(req.body.commentId)\n        })\n        //on change le text\n        theComment.text = req.body.text\n        // on save les changements\n        await post.save();\n        //on send le post concerné\n        return res.send(post)\n    }\n    catch (err) {\n        return res.status(400).send(err)\n    }\n}\n\n\nexport const deleteCommentPost = async (req, res, next) => {\n    if (!ObjectID.isValid(req.params.id)) {\n        return res.status(400).send(`Id unknown : ${req.params.id}`)\n    }\n    try {\n        const post = await Post.findByIdAndUpdate(\n            req.params.id,\n            {\n                $pull: {\n                    comments: {\n                        _id: req.body.commentId\n                    }\n                }\n            },\n            { new: true }\n        ).then((newPost) => {\n            res.send(newPost)\n        }).catch((err) => {\n            return res.status(400).send(err)\n        });\n    }\n    catch (err) {\n        return res.status(400).send(err)\n    }\n}"]}},"mtime":1651290190895},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/mern_project_app2/src/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/mern_project_app2\",\"filename\":\"/Applications/dossier/mern_project_app2/src/models/post.model.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/mern_project_app2\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nconst mongoose = require('mongoose');\n\nconst PostSchema = new mongoose.Schema({\n  posterId: {\n    type: String,\n    required: true\n  },\n  message: {\n    type: String,\n    trim: true,\n    maxlength: 500\n  },\n  picture: {\n    type: String\n  },\n  video: {\n    type: String\n  },\n  likers: {\n    type: [String],\n    required: true\n  },\n  //la partie commentaire est une sous base de données\n  comments: {\n    type: [{\n      commenterId: String,\n      commenterPseudo: String,\n      text: String,\n      timestamp: Number\n    }],\n    required: true\n  }\n}, {\n  timestamps: true\n});\nlet Post = mongoose.model('post', PostSchema);\nmodule.exports = Post;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvc3QubW9kZWwuanMiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJyZXF1aXJlIiwiUG9zdFNjaGVtYSIsIlNjaGVtYSIsInBvc3RlcklkIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwibWVzc2FnZSIsInRyaW0iLCJtYXhsZW5ndGgiLCJwaWN0dXJlIiwidmlkZW8iLCJsaWtlcnMiLCJjb21tZW50cyIsImNvbW1lbnRlcklkIiwiY29tbWVudGVyUHNldWRvIiwidGV4dCIsInRpbWVzdGFtcCIsIk51bWJlciIsInRpbWVzdGFtcHMiLCJQb3N0IiwibW9kZWwiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU1BLFFBQVEsR0FBR0MsT0FBTyxDQUFDLFVBQUQsQ0FBeEI7O0FBRUEsTUFBTUMsVUFBVSxHQUFHLElBQUlGLFFBQVEsQ0FBQ0csTUFBYixDQUNmO0FBQ0lDLEVBQUFBLFFBQVEsRUFBRTtBQUNOQyxJQUFBQSxJQUFJLEVBQUVDLE1BREE7QUFFTkMsSUFBQUEsUUFBUSxFQUFFO0FBRkosR0FEZDtBQUtJQyxFQUFBQSxPQUFPLEVBQUU7QUFDTEgsSUFBQUEsSUFBSSxFQUFFQyxNQUREO0FBRUxHLElBQUFBLElBQUksRUFBRSxJQUZEO0FBR0xDLElBQUFBLFNBQVMsRUFBRTtBQUhOLEdBTGI7QUFVSUMsRUFBQUEsT0FBTyxFQUFFO0FBQ0xOLElBQUFBLElBQUksRUFBRUM7QUFERCxHQVZiO0FBYUlNLEVBQUFBLEtBQUssRUFBRTtBQUNIUCxJQUFBQSxJQUFJLEVBQUVDO0FBREgsR0FiWDtBQWdCSU8sRUFBQUEsTUFBTSxFQUFFO0FBQ0pSLElBQUFBLElBQUksRUFBRSxDQUFDQyxNQUFELENBREY7QUFFSkMsSUFBQUEsUUFBUSxFQUFFO0FBRk4sR0FoQlo7QUFvQkk7QUFDQU8sRUFBQUEsUUFBUSxFQUFFO0FBQ05ULElBQUFBLElBQUksRUFBRSxDQUNGO0FBQ0lVLE1BQUFBLFdBQVcsRUFBRVQsTUFEakI7QUFFSVUsTUFBQUEsZUFBZSxFQUFFVixNQUZyQjtBQUdJVyxNQUFBQSxJQUFJLEVBQUVYLE1BSFY7QUFJSVksTUFBQUEsU0FBUyxFQUFFQztBQUpmLEtBREUsQ0FEQTtBQVNOWixJQUFBQSxRQUFRLEVBQUU7QUFUSjtBQXJCZCxDQURlLEVBa0NmO0FBQ0lhLEVBQUFBLFVBQVUsRUFBRTtBQURoQixDQWxDZSxDQUFuQjtBQXVDQSxJQUFJQyxJQUFJLEdBQUdyQixRQUFRLENBQUNzQixLQUFULENBQWUsTUFBZixFQUF1QnBCLFVBQXZCLENBQVg7QUFDQXFCLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQkgsSUFBakIiLCJzb3VyY2VSb290IjoiL0FwcGxpY2F0aW9ucy9kb3NzaWVyL21lcm5fcHJvamVjdF9hcHAyL3NyYy9tb2RlbHMvIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xuXG5jb25zdCBQb3N0U2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYShcbiAgICB7XG4gICAgICAgIHBvc3RlcklkOiB7XG4gICAgICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgbWVzc2FnZToge1xuICAgICAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICAgICAgdHJpbTogdHJ1ZSxcbiAgICAgICAgICAgIG1heGxlbmd0aDogNTAwXG4gICAgICAgIH0sXG4gICAgICAgIHBpY3R1cmU6IHtcbiAgICAgICAgICAgIHR5cGU6IFN0cmluZ1xuICAgICAgICB9LFxuICAgICAgICB2aWRlbzoge1xuICAgICAgICAgICAgdHlwZTogU3RyaW5nXG4gICAgICAgIH0sXG4gICAgICAgIGxpa2Vyczoge1xuICAgICAgICAgICAgdHlwZTogW1N0cmluZ10sXG4gICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgLy9sYSBwYXJ0aWUgY29tbWVudGFpcmUgZXN0IHVuZSBzb3VzIGJhc2UgZGUgZG9ubsOpZXNcbiAgICAgICAgY29tbWVudHM6IHtcbiAgICAgICAgICAgIHR5cGU6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbW1lbnRlcklkOiBTdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgIGNvbW1lbnRlclBzZXVkbzogU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBTdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogTnVtYmVyXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICAgIHRpbWVzdGFtcHM6IHRydWVcbiAgICB9XG4pO1xuXG5sZXQgUG9zdCA9IG1vbmdvb3NlLm1vZGVsKCdwb3N0JywgUG9zdFNjaGVtYSlcbm1vZHVsZS5leHBvcnRzID0gUG9zdDsiXX0=","map":{"version":3,"sources":["post.model.js"],"names":["mongoose","require","PostSchema","Schema","posterId","type","String","required","message","trim","maxlength","picture","video","likers","comments","commenterId","commenterPseudo","text","timestamp","Number","timestamps","Post","model","module","exports"],"mappings":";;AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AAEA,MAAMC,UAAU,GAAG,IAAIF,QAAQ,CAACG,MAAb,CACf;AACIC,EAAAA,QAAQ,EAAE;AACNC,IAAAA,IAAI,EAAEC,MADA;AAENC,IAAAA,QAAQ,EAAE;AAFJ,GADd;AAKIC,EAAAA,OAAO,EAAE;AACLH,IAAAA,IAAI,EAAEC,MADD;AAELG,IAAAA,IAAI,EAAE,IAFD;AAGLC,IAAAA,SAAS,EAAE;AAHN,GALb;AAUIC,EAAAA,OAAO,EAAE;AACLN,IAAAA,IAAI,EAAEC;AADD,GAVb;AAaIM,EAAAA,KAAK,EAAE;AACHP,IAAAA,IAAI,EAAEC;AADH,GAbX;AAgBIO,EAAAA,MAAM,EAAE;AACJR,IAAAA,IAAI,EAAE,CAACC,MAAD,CADF;AAEJC,IAAAA,QAAQ,EAAE;AAFN,GAhBZ;AAoBI;AACAO,EAAAA,QAAQ,EAAE;AACNT,IAAAA,IAAI,EAAE,CACF;AACIU,MAAAA,WAAW,EAAET,MADjB;AAEIU,MAAAA,eAAe,EAAEV,MAFrB;AAGIW,MAAAA,IAAI,EAAEX,MAHV;AAIIY,MAAAA,SAAS,EAAEC;AAJf,KADE,CADA;AASNZ,IAAAA,QAAQ,EAAE;AATJ;AArBd,CADe,EAkCf;AACIa,EAAAA,UAAU,EAAE;AADhB,CAlCe,CAAnB;AAuCA,IAAIC,IAAI,GAAGrB,QAAQ,CAACsB,KAAT,CAAe,MAAf,EAAuBpB,UAAvB,CAAX;AACAqB,MAAM,CAACC,OAAP,GAAiBH,IAAjB","sourceRoot":"/Applications/dossier/mern_project_app2/src/models/","sourcesContent":["const mongoose = require('mongoose');\n\nconst PostSchema = new mongoose.Schema(\n    {\n        posterId: {\n            type: String,\n            required: true,\n        },\n        message: {\n            type: String,\n            trim: true,\n            maxlength: 500\n        },\n        picture: {\n            type: String\n        },\n        video: {\n            type: String\n        },\n        likers: {\n            type: [String],\n            required: true,\n        },\n        //la partie commentaire est une sous base de données\n        comments: {\n            type: [\n                {\n                    commenterId: String,\n                    commenterPseudo: String,\n                    text: String,\n                    timestamp: Number\n                }\n            ],\n            required: true,\n        }\n    },\n    {\n        timestamps: true\n    }\n);\n\nlet Post = mongoose.model('post', PostSchema)\nmodule.exports = Post;"]}},"mtime":1651276586978},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/mern_project_app2/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/mern_project_app2\",\"filename\":\"/Applications/dossier/mern_project_app2/src/controllers/upload.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/mern_project_app2\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.uploadProfil = void 0;\n\nvar _errors = require(\"../utils/errors.utils\");\n\nconst User = require('../models/user.model');\n\nconst uploadProfil = async (req, res) => {\n  console.log(req.file);\n\n  try {\n    if (req.file.mimetype != \"image/jpg\" && req.file.mimetype != \"image/png\" && req.file.mimetype != \"image/jpeg\") {\n      throw new Error('invalid file');\n    }\n\n    if (req.file.size > 50000) {\n      throw new Error('max size');\n    }\n  } catch (err) {\n    const errors = (0, _errors.uploadErrors)(err);\n    return res.status(201).json(errors);\n  }\n\n  try {\n    await User.findByIdAndUpdate(req.body.userId, {\n      $set: {\n        picture: `./uploads/profil/${req.file.filename}`\n      }\n    }, {\n      new: true,\n      upsert: true,\n      setDefaultsOnInsert: true\n    }).then(user => {\n      return res.send(user);\n    }).catch(err => {\n      return res.status(500).send(err);\n    });\n  } catch (err) {\n    return res.status(500).send(err);\n  }\n};\n\nexports.uploadProfil = uploadProfil;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVwbG9hZC5jb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbIlVzZXIiLCJyZXF1aXJlIiwidXBsb2FkUHJvZmlsIiwicmVxIiwicmVzIiwiY29uc29sZSIsImxvZyIsImZpbGUiLCJtaW1ldHlwZSIsIkVycm9yIiwic2l6ZSIsImVyciIsImVycm9ycyIsInN0YXR1cyIsImpzb24iLCJmaW5kQnlJZEFuZFVwZGF0ZSIsImJvZHkiLCJ1c2VySWQiLCIkc2V0IiwicGljdHVyZSIsImZpbGVuYW1lIiwibmV3IiwidXBzZXJ0Iiwic2V0RGVmYXVsdHNPbkluc2VydCIsInRoZW4iLCJ1c2VyIiwic2VuZCIsImNhdGNoIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQ0E7O0FBREEsTUFBTUEsSUFBSSxHQUFHQyxPQUFPLENBQUMsc0JBQUQsQ0FBcEI7O0FBR08sTUFBTUMsWUFBWSxHQUFHLE9BQU1DLEdBQU4sRUFBV0MsR0FBWCxLQUFtQjtBQUMzQ0MsRUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVlILEdBQUcsQ0FBQ0ksSUFBaEI7O0FBQ0EsTUFBRztBQUNDLFFBQUdKLEdBQUcsQ0FBQ0ksSUFBSixDQUFTQyxRQUFULElBQXFCLFdBQXJCLElBQW9DTCxHQUFHLENBQUNJLElBQUosQ0FBU0MsUUFBVCxJQUFxQixXQUF6RCxJQUF3RUwsR0FBRyxDQUFDSSxJQUFKLENBQVNDLFFBQVQsSUFBcUIsWUFBaEcsRUFBNkc7QUFDekcsWUFBTSxJQUFJQyxLQUFKLENBQVUsY0FBVixDQUFOO0FBQ0g7O0FBQ0QsUUFBR04sR0FBRyxDQUFDSSxJQUFKLENBQVNHLElBQVQsR0FBZ0IsS0FBbkIsRUFBeUI7QUFDckIsWUFBTSxJQUFJRCxLQUFKLENBQVUsVUFBVixDQUFOO0FBQ0g7QUFDSixHQVBELENBUUEsT0FBTUUsR0FBTixFQUFVO0FBQ04sVUFBTUMsTUFBTSxHQUFHLDBCQUFhRCxHQUFiLENBQWY7QUFDQSxXQUFPUCxHQUFHLENBQUNTLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQkYsTUFBckIsQ0FBUDtBQUNIOztBQUNELE1BQUc7QUFDTSxVQUFNWixJQUFJLENBQUNlLGlCQUFMLENBQ1BaLEdBQUcsQ0FBQ2EsSUFBSixDQUFTQyxNQURGLEVBRVA7QUFDSUMsTUFBQUEsSUFBSSxFQUFHO0FBQUVDLFFBQUFBLE9BQU8sRUFBRyxvQkFBbUJoQixHQUFHLENBQUNJLElBQUosQ0FBU2EsUUFBUztBQUFqRDtBQURYLEtBRk8sRUFLUDtBQUFDQyxNQUFBQSxHQUFHLEVBQUMsSUFBTDtBQUFXQyxNQUFBQSxNQUFNLEVBQUMsSUFBbEI7QUFBd0JDLE1BQUFBLG1CQUFtQixFQUFDO0FBQTVDLEtBTE8sRUFNTEMsSUFOSyxDQU1DQyxJQUFELElBQVU7QUFDYixhQUFPckIsR0FBRyxDQUFDc0IsSUFBSixDQUFTRCxJQUFULENBQVA7QUFDSCxLQVJNLEVBUUpFLEtBUkksQ0FRR2hCLEdBQUQsSUFBUztBQUNkLGFBQU9QLEdBQUcsQ0FBQ1MsTUFBSixDQUFXLEdBQVgsRUFBZ0JhLElBQWhCLENBQXFCZixHQUFyQixDQUFQO0FBQ0gsS0FWTSxDQUFOO0FBV1IsR0FaRCxDQWFBLE9BQU1BLEdBQU4sRUFBVTtBQUNOLFdBQU9QLEdBQUcsQ0FBQ1MsTUFBSixDQUFXLEdBQVgsRUFBZ0JhLElBQWhCLENBQXFCZixHQUFyQixDQUFQO0FBQ0g7QUFFSixDQS9CTSIsInNvdXJjZVJvb3QiOiIvQXBwbGljYXRpb25zL2Rvc3NpZXIvbWVybl9wcm9qZWN0X2FwcDIvc3JjL2NvbnRyb2xsZXJzLyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFVzZXIgPSByZXF1aXJlKCcuLi9tb2RlbHMvdXNlci5tb2RlbCcpXG5pbXBvcnQgeyB1cGxvYWRFcnJvcnN9IGZyb20gJy4uL3V0aWxzL2Vycm9ycy51dGlscydcblxuZXhwb3J0IGNvbnN0IHVwbG9hZFByb2ZpbCA9IGFzeW5jKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc29sZS5sb2cocmVxLmZpbGUpXG4gICAgdHJ5e1xuICAgICAgICBpZihyZXEuZmlsZS5taW1ldHlwZSAhPSBcImltYWdlL2pwZ1wiICYmIHJlcS5maWxlLm1pbWV0eXBlICE9IFwiaW1hZ2UvcG5nXCIgJiYgcmVxLmZpbGUubWltZXR5cGUgIT0gXCJpbWFnZS9qcGVnXCIpe1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIGZpbGUnKVxuICAgICAgICB9XG4gICAgICAgIGlmKHJlcS5maWxlLnNpemUgPiA1MDAwMCl7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ21heCBzaXplJylcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaChlcnIpe1xuICAgICAgICBjb25zdCBlcnJvcnMgPSB1cGxvYWRFcnJvcnMoZXJyKTtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAxKS5qc29uKGVycm9ycylcbiAgICB9XG4gICAgdHJ5e1xuICAgICAgICAgICAgIGF3YWl0IFVzZXIuZmluZEJ5SWRBbmRVcGRhdGUoXG4gICAgICAgICAgICByZXEuYm9keS51c2VySWQsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgJHNldCA6IHsgcGljdHVyZTogYC4vdXBsb2Fkcy9wcm9maWwvJHtyZXEuZmlsZS5maWxlbmFtZX1gIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7bmV3OnRydWUsIHVwc2VydDp0cnVlLCBzZXREZWZhdWx0c09uSW5zZXJ0OnRydWV9XG4gICAgICAgICAgICApLnRoZW4oKHVzZXIpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnNlbmQodXNlcilcbiAgICAgICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLnNlbmQoZXJyKVxuICAgICAgICAgICAgfSlcbiAgICB9XG4gICAgY2F0Y2goZXJyKXtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5zZW5kKGVycilcbiAgICB9XG4gICAgXG59XG5cbiJdfQ==","map":{"version":3,"sources":["upload.controller.js"],"names":["User","require","uploadProfil","req","res","console","log","file","mimetype","Error","size","err","errors","status","json","findByIdAndUpdate","body","userId","$set","picture","filename","new","upsert","setDefaultsOnInsert","then","user","send","catch"],"mappings":";;;;;;;AACA;;AADA,MAAMA,IAAI,GAAGC,OAAO,CAAC,sBAAD,CAApB;;AAGO,MAAMC,YAAY,GAAG,OAAMC,GAAN,EAAWC,GAAX,KAAmB;AAC3CC,EAAAA,OAAO,CAACC,GAAR,CAAYH,GAAG,CAACI,IAAhB;;AACA,MAAG;AACC,QAAGJ,GAAG,CAACI,IAAJ,CAASC,QAAT,IAAqB,WAArB,IAAoCL,GAAG,CAACI,IAAJ,CAASC,QAAT,IAAqB,WAAzD,IAAwEL,GAAG,CAACI,IAAJ,CAASC,QAAT,IAAqB,YAAhG,EAA6G;AACzG,YAAM,IAAIC,KAAJ,CAAU,cAAV,CAAN;AACH;;AACD,QAAGN,GAAG,CAACI,IAAJ,CAASG,IAAT,GAAgB,KAAnB,EAAyB;AACrB,YAAM,IAAID,KAAJ,CAAU,UAAV,CAAN;AACH;AACJ,GAPD,CAQA,OAAME,GAAN,EAAU;AACN,UAAMC,MAAM,GAAG,0BAAaD,GAAb,CAAf;AACA,WAAOP,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBF,MAArB,CAAP;AACH;;AACD,MAAG;AACM,UAAMZ,IAAI,CAACe,iBAAL,CACPZ,GAAG,CAACa,IAAJ,CAASC,MADF,EAEP;AACIC,MAAAA,IAAI,EAAG;AAAEC,QAAAA,OAAO,EAAG,oBAAmBhB,GAAG,CAACI,IAAJ,CAASa,QAAS;AAAjD;AADX,KAFO,EAKP;AAACC,MAAAA,GAAG,EAAC,IAAL;AAAWC,MAAAA,MAAM,EAAC,IAAlB;AAAwBC,MAAAA,mBAAmB,EAAC;AAA5C,KALO,EAMLC,IANK,CAMCC,IAAD,IAAU;AACb,aAAOrB,GAAG,CAACsB,IAAJ,CAASD,IAAT,CAAP;AACH,KARM,EAQJE,KARI,CAQGhB,GAAD,IAAS;AACd,aAAOP,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBa,IAAhB,CAAqBf,GAArB,CAAP;AACH,KAVM,CAAN;AAWR,GAZD,CAaA,OAAMA,GAAN,EAAU;AACN,WAAOP,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBa,IAAhB,CAAqBf,GAArB,CAAP;AACH;AAEJ,CA/BM","sourceRoot":"/Applications/dossier/mern_project_app2/src/controllers/","sourcesContent":["const User = require('../models/user.model')\nimport { uploadErrors} from '../utils/errors.utils'\n\nexport const uploadProfil = async(req, res) => {\n    console.log(req.file)\n    try{\n        if(req.file.mimetype != \"image/jpg\" && req.file.mimetype != \"image/png\" && req.file.mimetype != \"image/jpeg\"){\n            throw new Error('invalid file')\n        }\n        if(req.file.size > 50000){\n            throw new Error('max size')\n        }\n    }\n    catch(err){\n        const errors = uploadErrors(err);\n        return res.status(201).json(errors)\n    }\n    try{\n             await User.findByIdAndUpdate(\n            req.body.userId,\n            {\n                $set : { picture: `./uploads/profil/${req.file.filename}` }\n            },\n            {new:true, upsert:true, setDefaultsOnInsert:true}\n            ).then((user) => {\n                return res.send(user)\n            }).catch((err) => {\n                return res.status(500).send(err)\n            })\n    }\n    catch(err){\n        return res.status(500).send(err)\n    }\n    \n}\n\n"]}},"mtime":1651289874047},"{\"assumptions\":{},\"sourceRoot\":\"/Applications/dossier/mern_project_app2/src/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Applications/dossier/mern_project_app2\",\"filename\":\"/Applications/dossier/mern_project_app2/src/controllers/upload.controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Applications/dossier/mern_project_app2\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.uploadProfil = void 0;\n\nvar _errors = require(\"../utils/errors.utils\");\n\nconst User = require('../models/user.model');\n\nconst uploadProfil = async (req, res) => {\n  try {\n    if (req.file.mimetype != \"image/jpg\" && req.file.mimetype != \"image/png\" && req.file.mimetype != \"image/jpeg\") {\n      throw new Error('invalid file');\n    }\n\n    if (req.file.size > 50000) {\n      throw new Error('max size');\n    }\n  } catch (err) {\n    const errors = (0, _errors.uploadErrors)(err);\n    return res.status(201).json(errors);\n  }\n\n  try {\n    await User.findByIdAndUpdate(req.body.userId, {\n      $set: {\n        picture: `./uploads/profil/${req.file.filename}`\n      }\n    }, {\n      new: true,\n      upsert: true,\n      setDefaultsOnInsert: true\n    }).then(user => {\n      return res.send(user);\n    }).catch(err => {\n      return res.status(500).send(err);\n    });\n  } catch (err) {\n    return res.status(500).send(err);\n  }\n};\n\nexports.uploadProfil = uploadProfil;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVwbG9hZC5jb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbIlVzZXIiLCJyZXF1aXJlIiwidXBsb2FkUHJvZmlsIiwicmVxIiwicmVzIiwiZmlsZSIsIm1pbWV0eXBlIiwiRXJyb3IiLCJzaXplIiwiZXJyIiwiZXJyb3JzIiwic3RhdHVzIiwianNvbiIsImZpbmRCeUlkQW5kVXBkYXRlIiwiYm9keSIsInVzZXJJZCIsIiRzZXQiLCJwaWN0dXJlIiwiZmlsZW5hbWUiLCJuZXciLCJ1cHNlcnQiLCJzZXREZWZhdWx0c09uSW5zZXJ0IiwidGhlbiIsInVzZXIiLCJzZW5kIiwiY2F0Y2giXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFDQTs7QUFEQSxNQUFNQSxJQUFJLEdBQUdDLE9BQU8sQ0FBQyxzQkFBRCxDQUFwQjs7QUFHTyxNQUFNQyxZQUFZLEdBQUcsT0FBTUMsR0FBTixFQUFXQyxHQUFYLEtBQW1CO0FBQzNDLE1BQUc7QUFDQyxRQUFHRCxHQUFHLENBQUNFLElBQUosQ0FBU0MsUUFBVCxJQUFxQixXQUFyQixJQUFvQ0gsR0FBRyxDQUFDRSxJQUFKLENBQVNDLFFBQVQsSUFBcUIsV0FBekQsSUFBd0VILEdBQUcsQ0FBQ0UsSUFBSixDQUFTQyxRQUFULElBQXFCLFlBQWhHLEVBQTZHO0FBQ3pHLFlBQU0sSUFBSUMsS0FBSixDQUFVLGNBQVYsQ0FBTjtBQUNIOztBQUNELFFBQUdKLEdBQUcsQ0FBQ0UsSUFBSixDQUFTRyxJQUFULEdBQWdCLEtBQW5CLEVBQXlCO0FBQ3JCLFlBQU0sSUFBSUQsS0FBSixDQUFVLFVBQVYsQ0FBTjtBQUNIO0FBQ0osR0FQRCxDQVFBLE9BQU1FLEdBQU4sRUFBVTtBQUNOLFVBQU1DLE1BQU0sR0FBRywwQkFBYUQsR0FBYixDQUFmO0FBQ0EsV0FBT0wsR0FBRyxDQUFDTyxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUJGLE1BQXJCLENBQVA7QUFDSDs7QUFDRCxNQUFHO0FBQ00sVUFBTVYsSUFBSSxDQUFDYSxpQkFBTCxDQUNQVixHQUFHLENBQUNXLElBQUosQ0FBU0MsTUFERixFQUVQO0FBQ0lDLE1BQUFBLElBQUksRUFBRztBQUFFQyxRQUFBQSxPQUFPLEVBQUcsb0JBQW1CZCxHQUFHLENBQUNFLElBQUosQ0FBU2EsUUFBUztBQUFqRDtBQURYLEtBRk8sRUFLUDtBQUFDQyxNQUFBQSxHQUFHLEVBQUMsSUFBTDtBQUFXQyxNQUFBQSxNQUFNLEVBQUMsSUFBbEI7QUFBd0JDLE1BQUFBLG1CQUFtQixFQUFDO0FBQTVDLEtBTE8sRUFNTEMsSUFOSyxDQU1DQyxJQUFELElBQVU7QUFDYixhQUFPbkIsR0FBRyxDQUFDb0IsSUFBSixDQUFTRCxJQUFULENBQVA7QUFDSCxLQVJNLEVBUUpFLEtBUkksQ0FRR2hCLEdBQUQsSUFBUztBQUNkLGFBQU9MLEdBQUcsQ0FBQ08sTUFBSixDQUFXLEdBQVgsRUFBZ0JhLElBQWhCLENBQXFCZixHQUFyQixDQUFQO0FBQ0gsS0FWTSxDQUFOO0FBV1IsR0FaRCxDQWFBLE9BQU1BLEdBQU4sRUFBVTtBQUNOLFdBQU9MLEdBQUcsQ0FBQ08sTUFBSixDQUFXLEdBQVgsRUFBZ0JhLElBQWhCLENBQXFCZixHQUFyQixDQUFQO0FBQ0g7QUFFSixDQTlCTSIsInNvdXJjZVJvb3QiOiIvQXBwbGljYXRpb25zL2Rvc3NpZXIvbWVybl9wcm9qZWN0X2FwcDIvc3JjL2NvbnRyb2xsZXJzLyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFVzZXIgPSByZXF1aXJlKCcuLi9tb2RlbHMvdXNlci5tb2RlbCcpXG5pbXBvcnQgeyB1cGxvYWRFcnJvcnN9IGZyb20gJy4uL3V0aWxzL2Vycm9ycy51dGlscydcblxuZXhwb3J0IGNvbnN0IHVwbG9hZFByb2ZpbCA9IGFzeW5jKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5e1xuICAgICAgICBpZihyZXEuZmlsZS5taW1ldHlwZSAhPSBcImltYWdlL2pwZ1wiICYmIHJlcS5maWxlLm1pbWV0eXBlICE9IFwiaW1hZ2UvcG5nXCIgJiYgcmVxLmZpbGUubWltZXR5cGUgIT0gXCJpbWFnZS9qcGVnXCIpe1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIGZpbGUnKVxuICAgICAgICB9XG4gICAgICAgIGlmKHJlcS5maWxlLnNpemUgPiA1MDAwMCl7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ21heCBzaXplJylcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaChlcnIpe1xuICAgICAgICBjb25zdCBlcnJvcnMgPSB1cGxvYWRFcnJvcnMoZXJyKTtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAxKS5qc29uKGVycm9ycylcbiAgICB9XG4gICAgdHJ5e1xuICAgICAgICAgICAgIGF3YWl0IFVzZXIuZmluZEJ5SWRBbmRVcGRhdGUoXG4gICAgICAgICAgICByZXEuYm9keS51c2VySWQsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgJHNldCA6IHsgcGljdHVyZTogYC4vdXBsb2Fkcy9wcm9maWwvJHtyZXEuZmlsZS5maWxlbmFtZX1gIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7bmV3OnRydWUsIHVwc2VydDp0cnVlLCBzZXREZWZhdWx0c09uSW5zZXJ0OnRydWV9XG4gICAgICAgICAgICApLnRoZW4oKHVzZXIpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnNlbmQodXNlcilcbiAgICAgICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLnNlbmQoZXJyKVxuICAgICAgICAgICAgfSlcbiAgICB9XG4gICAgY2F0Y2goZXJyKXtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5zZW5kKGVycilcbiAgICB9XG4gICAgXG59XG5cbiJdfQ==","map":{"version":3,"sources":["upload.controller.js"],"names":["User","require","uploadProfil","req","res","file","mimetype","Error","size","err","errors","status","json","findByIdAndUpdate","body","userId","$set","picture","filename","new","upsert","setDefaultsOnInsert","then","user","send","catch"],"mappings":";;;;;;;AACA;;AADA,MAAMA,IAAI,GAAGC,OAAO,CAAC,sBAAD,CAApB;;AAGO,MAAMC,YAAY,GAAG,OAAMC,GAAN,EAAWC,GAAX,KAAmB;AAC3C,MAAG;AACC,QAAGD,GAAG,CAACE,IAAJ,CAASC,QAAT,IAAqB,WAArB,IAAoCH,GAAG,CAACE,IAAJ,CAASC,QAAT,IAAqB,WAAzD,IAAwEH,GAAG,CAACE,IAAJ,CAASC,QAAT,IAAqB,YAAhG,EAA6G;AACzG,YAAM,IAAIC,KAAJ,CAAU,cAAV,CAAN;AACH;;AACD,QAAGJ,GAAG,CAACE,IAAJ,CAASG,IAAT,GAAgB,KAAnB,EAAyB;AACrB,YAAM,IAAID,KAAJ,CAAU,UAAV,CAAN;AACH;AACJ,GAPD,CAQA,OAAME,GAAN,EAAU;AACN,UAAMC,MAAM,GAAG,0BAAaD,GAAb,CAAf;AACA,WAAOL,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBF,MAArB,CAAP;AACH;;AACD,MAAG;AACM,UAAMV,IAAI,CAACa,iBAAL,CACPV,GAAG,CAACW,IAAJ,CAASC,MADF,EAEP;AACIC,MAAAA,IAAI,EAAG;AAAEC,QAAAA,OAAO,EAAG,oBAAmBd,GAAG,CAACE,IAAJ,CAASa,QAAS;AAAjD;AADX,KAFO,EAKP;AAACC,MAAAA,GAAG,EAAC,IAAL;AAAWC,MAAAA,MAAM,EAAC,IAAlB;AAAwBC,MAAAA,mBAAmB,EAAC;AAA5C,KALO,EAMLC,IANK,CAMCC,IAAD,IAAU;AACb,aAAOnB,GAAG,CAACoB,IAAJ,CAASD,IAAT,CAAP;AACH,KARM,EAQJE,KARI,CAQGhB,GAAD,IAAS;AACd,aAAOL,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBa,IAAhB,CAAqBf,GAArB,CAAP;AACH,KAVM,CAAN;AAWR,GAZD,CAaA,OAAMA,GAAN,EAAU;AACN,WAAOL,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBa,IAAhB,CAAqBf,GAArB,CAAP;AACH;AAEJ,CA9BM","sourceRoot":"/Applications/dossier/mern_project_app2/src/controllers/","sourcesContent":["const User = require('../models/user.model')\nimport { uploadErrors} from '../utils/errors.utils'\n\nexport const uploadProfil = async(req, res) => {\n    try{\n        if(req.file.mimetype != \"image/jpg\" && req.file.mimetype != \"image/png\" && req.file.mimetype != \"image/jpeg\"){\n            throw new Error('invalid file')\n        }\n        if(req.file.size > 50000){\n            throw new Error('max size')\n        }\n    }\n    catch(err){\n        const errors = uploadErrors(err);\n        return res.status(201).json(errors)\n    }\n    try{\n             await User.findByIdAndUpdate(\n            req.body.userId,\n            {\n                $set : { picture: `./uploads/profil/${req.file.filename}` }\n            },\n            {new:true, upsert:true, setDefaultsOnInsert:true}\n            ).then((user) => {\n                return res.send(user)\n            }).catch((err) => {\n                return res.status(500).send(err)\n            })\n    }\n    catch(err){\n        return res.status(500).send(err)\n    }\n    \n}\n\n"]}},"mtime":1651290088425}}